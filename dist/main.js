!function(t){var r={};function n(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)n.d(e,o,function(r){return t[r]}.bind(null,o));return e},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="",n(n.s=3)}([function(t,r,n){"use strict";n.d(r,"d",(function(){return o})),n.d(r,"c",(function(){return u})),n.d(r,"h",(function(){return i})),n.d(r,"a",(function(){return c})),n.d(r,"g",(function(){return a})),n.d(r,"b",(function(){return s})),n.d(r,"e",(function(){return l})),n.d(r,"f",(function(){return h})),n.d(r,"i",(function(){return d}));var e=function(){for(var t=0,r=0,n=arguments.length;r<n;r++)t+=arguments[r].length;var e=Array(t),o=0;for(r=0;r<n;r++)for(var u=arguments[r],i=0,c=u.length;i<c;i++,o++)e[o]=u[i];return e};function o(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];for(var e="number"==typeof r[0]?r[0]:0,o="function"==typeof r[0]?r[0]:r[1],u=t<e?[t,e]:[e,t],i=u[0],c=u[1]-i,a=Array(c),f=0;f<c;f++)a[f]=o?o(f+i):f+i;return a}var u=function(t,r,n){void 0===r&&(r=0),void 0===n&&(n=!0);var e=t<r?[t,r]:[r,t],o=e[0],u=e[1],i=Math.random()*(u-o);return o+(n?Math.floor(i):i)},i=function(t){return t[Math.floor(Math.random()*t.length)]},c=function(t,r){var n=r.x-t.x,e=r.y-t.y;return Math.sqrt(Math.pow(n,2)+Math.pow(e,2))},a=function(t,r,n){var e=t.x-r.x,o=t.y-r.y,u=Math.cos(n),i=Math.sin(n),c=e*i+o*u;return{x:e*u-o*i+r.x,y:c+r.y}};function f(t){return void 0===t||"[object Null]"===Object.prototype.toString.call(t)}var s=function(t,r){var n;return t.find((function(t,e,o){return!f(n=r(t,e,o))})),n},l=function(t,r){void 0===r&&(r=1);var n=r%4;switch(n<0?4-n:n){case 1:return t.reduce((function(r,n,e){return n.forEach((function(n,o){var u=o,i=t.length-e-1;r[u]=r[u]||[],r[u][i]=n})),r}),[]);case 2:return e(t).reverse().map((function(t){return e(t).reverse()}));case 3:return t.reduce((function(t,r,n){return r.forEach((function(e,o){var u=r.length-o-1,i=n;t[u]=t[u]||[],t[u][i]=e})),t}),[]);default:return t.map((function(t){return e(t)}))}},h=function(t,r,n,e){var o=t.row,u=t.col,i=e%4;switch(i<0?4-i:i){case 1:return{row:u,col:r-o-1};case 2:return{row:r-o-1,col:n-u-1};case 3:return{row:n-u-1,col:o};default:return{row:o,col:u}}},d=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t}},function(t,r,n){"use strict";var e="mundane",o=function(){function t(t){var r=t.type,n=t.value,o=t.variant;this.type=r,this.value=n||1,this._variant=o||e}return Object.defineProperty(t.prototype,"variant",{get:function(){return this._variant||e},set:function(t){this._variant=t||e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMundane",{get:function(){return this.variant===e},enumerable:!0,configurable:!0}),t}();r.a=o},function(t,r,n){"use strict";var e=n(1),o=n(0),u=function(){for(var t=0,r=0,n=arguments.length;r<n;r++)t+=arguments[r].length;var e=Array(t),o=0;for(r=0;r<n;r++)for(var u=arguments[r],i=0,c=u.length;i<c;i++,o++)e[o]=u[i];return e},i=function(){function t(t){this.rowCount=9,this.colCount=9,this.tileClass=e.a,Object.assign(this,t),this.tileDefs=t.tileDefs}return Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows=this._rows||this.newRows(),this._rows},set:function(t){this._rows=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tiles",{get:function(){return this.rows.reduce((function(t,r){return u(t,r)}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileTypes",{get:function(){return Object.keys(this.tileDefs)},enumerable:!0,configurable:!0}),t.prototype.newMundaneTile=function(){var t=Object(o.h)(this.tileTypes);return this.tileDefs[t].generator({variant:"mundane"})},t.prototype.newRows=function(){var t=this;return Object(o.d)(this.rowCount,(function(){return Object(o.d)(t.colCount,(function(){return t.newMundaneTile()}))}))},t.prototype.shuffle=function(){var t=this,r=this.rows.length;this.rows.forEach((function(n,e){var u=n.length;n.forEach((function(n,i){var c=Object(o.c)(r),a=Object(o.c)(u),f=t.rows[c][a];t.rows[c][a]=n,t.rows[e][i]=f}))}))},t}();r.a=i},function(t,r,n){"use strict";n.r(r);var e=n(2);window.Board=e.a}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmNlcm5zL3V0aWxpdGllcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGlsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQm9hcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmFuZ2UiLCJtaW4iLCJtYXgiLCJtYXhBbmRPck1hcHBlciIsIm1hcHBlciIsInJlYWxNaW4iLCJkaWZmIiwibGlzdCIsIkFycmF5IiwicmFuZCIsImludCIsInJlYWxNYXgiLCJyYW5kb21EaWZmIiwiTWF0aCIsInJhbmRvbSIsImZsb29yIiwic2FtcGxlIiwibGVuZ3RoIiwiZGlzdGFuY2VCZXR3ZWVuIiwib3JpZ2luIiwiZGVzdGluYXRpb24iLCJkeCIsIngiLCJkeSIsInkiLCJzcXJ0Iiwicm90YXRlUG9pbnQiLCJjb29yZHMiLCJhcm91bmQiLCJyYWRpYW5zIiwicmVsYXRpdmUiLCJjb3NpbmUiLCJjb3MiLCJzaW5lIiwic2luIiwibmV3WSIsImlzTnVsbGlzaCIsInRvU3RyaW5nIiwiZmluZE1hcCIsInJlc3VsdCIsImZpbmQiLCJpdGVtIiwiaW5kZXgiLCJvcmlnaW5hbCIsInJvdGF0ZSIsImdyaWQiLCJyb3RhdGlvbnMiLCJxdWFkcmFudHMiLCJyZWR1Y2UiLCJtZW1vIiwicm93Iiwicm93SW5kZXgiLCJmb3JFYWNoIiwiY29sSW5kZXgiLCJuZXdSb3dJbmRleCIsIm5ld0NvbEluZGV4IiwicmV2ZXJzZSIsIm1hcCIsInJvdGF0ZUdyaWRQb3NpdGlvbiIsInJvd3MiLCJjb2xzIiwiY29sIiwidHVwbGUiLCJNVU5EQU5FX1ZBUklBTlQiLCJ0eXBlIiwidmFyaWFudCIsInRoaXMiLCJfdmFyaWFudCIsIm9wdHMiLCJyb3dDb3VudCIsImNvbENvdW50IiwidGlsZUNsYXNzIiwiYXNzaWduIiwidGlsZURlZnMiLCJfcm93cyIsIm5ld1Jvd3MiLCJ0aWxlcyIsImtleXMiLCJuZXdNdW5kYW5lVGlsZSIsInRpbGVUeXBlIiwidGlsZVR5cGVzIiwiZ2VuZXJhdG9yIiwic2h1ZmZsZSIsInRpbGUiLCJleGlzdGluZyIsIndpbmRvdyIsIkJvYXJkIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixF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SUFBTUMsRUFBVyxZQUFPYixLQUFLYyxXQUU3QixPQURnQmQsS0FBS08sU0FBU00sR0FDZkUsVUFBVSxDQUFFaEIsUUFBUyxhQUd0QyxZQUFBVSxRQUFBLHNCQUNFLE9BQU8sWUFBTVQsS0FBS0csVUFBVSxXQUFNLE9BQUMsV0FBRCxDQUFPLEVBQUtDLFVBQVUsV0FBTSxTQUFLUSx3QkFHckUsWUFBQUksUUFBQSxzQkFDUWIsRUFBV0gsS0FBS1AsS0FBSzFDLE9BQzNCaUQsS0FBS1AsS0FBS1AsU0FBUSxTQUFDRixFQUFLQyxHQUN0QixJQUFNbUIsRUFBV3BCLEVBQUlqQyxPQUNyQmlDLEVBQUlFLFNBQVEsU0FBQytCLEVBQU05QixHQUNqQixJQUFNQyxFQUFjLFlBQUtlLEdBQ25CZCxFQUFjLFlBQUtlLEdBQ25CYyxFQUFXLEVBQUt6QixLQUFLTCxHQUFhQyxHQUN4QyxFQUFLSSxLQUFLTCxHQUFhQyxHQUFlNEIsRUFDdEMsRUFBS3hCLEtBQUtSLEdBQVVFLEdBQVkrQixTQUl4QyxFQXJEQSxHLG9DQzVCQSxrQkFFQ0MsT0FBZUMsTUFBUSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwiaW1wb3J0IHsgQ29vcmRQb3NpdGlvbiwgTnVsbGlzaCwgR3JpZFBvc2l0aW9uLCBMaXRlcmFsIH0gZnJvbSBcIi4uL3R5cGVzL2NvbW1vblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZ2U8VD4obWluOiBudW1iZXIsIC4uLm1heEFuZE9yTWFwcGVyOiBbXSk6IG51bWJlcltdO1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmdlPFQ+KG1pbjogbnVtYmVyLCAuLi5tYXhBbmRPck1hcHBlcjogW251bWJlcl0pOiBudW1iZXJbXTtcbmV4cG9ydCBmdW5jdGlvbiByYW5nZTxUPihtaW46IG51bWJlciwgLi4ubWF4QW5kT3JNYXBwZXI6IFsobjogbnVtYmVyKSA9PiBUXSk6IFRbXTtcbmV4cG9ydCBmdW5jdGlvbiByYW5nZTxUPihtaW46IG51bWJlciwgLi4ubWF4QW5kT3JNYXBwZXI6IFtudW1iZXIsIChuOiBudW1iZXIpID0+IFRdKTogVFtdO1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmdlPFQ+KG1pbjogbnVtYmVyLCAuLi5tYXhBbmRPck1hcHBlcjogW118W251bWJlcnwoKG46IG51bWJlcikgPT4gVCldfFtudW1iZXIsIChuOiBudW1iZXIpID0+IFRdKTogKG51bWJlcnxUKVtdIHtcbiAgY29uc3QgbWF4ID0gdHlwZW9mIG1heEFuZE9yTWFwcGVyWzBdID09PSAnbnVtYmVyJyA/IG1heEFuZE9yTWFwcGVyWzBdIDogMDtcbiAgY29uc3QgbWFwcGVyID0gdHlwZW9mIG1heEFuZE9yTWFwcGVyWzBdID09PSAnZnVuY3Rpb24nID8gbWF4QW5kT3JNYXBwZXJbMF0gOiBtYXhBbmRPck1hcHBlclsxXTtcbiAgY29uc3QgW3JlYWxNaW4sIHJlYWxNYXhdID0gbWluIDwgbWF4ID8gW21pbiwgbWF4XSA6IFttYXgsIG1pbl07XG4gIGNvbnN0IGRpZmYgPSByZWFsTWF4IC0gcmVhbE1pbjtcbiAgY29uc3QgbGlzdCA9IEFycmF5KGRpZmYpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGRpZmY7IGkrKykgbGlzdFtpXSA9IG1hcHBlciA/IG1hcHBlcihpICsgcmVhbE1pbikgOiBpICsgcmVhbE1pbjtcbiAgcmV0dXJuIGxpc3Q7XG59XG5cbmV4cG9ydCBjb25zdCByYW5kID0gKG1pbjogbnVtYmVyLCBtYXggPSAwLCBpbnQgPSB0cnVlKTogbnVtYmVyID0+IHtcbiAgY29uc3QgW3JlYWxNaW4sIHJlYWxNYXhdID0gbWluIDwgbWF4ID8gW21pbiwgbWF4XSA6IFttYXgsIG1pbl07XG4gIGNvbnN0IHJhbmRvbURpZmYgPSBNYXRoLnJhbmRvbSgpICogKHJlYWxNYXggLSByZWFsTWluKTtcbiAgcmV0dXJuIHJlYWxNaW4gKyAoaW50ID8gTWF0aC5mbG9vcihyYW5kb21EaWZmKSA6IHJhbmRvbURpZmYpO1xufTtcblxuZXhwb3J0IGNvbnN0IGRhbXBlbiA9IChudW06IG51bWJlciwgYnk6IG51bWJlciwgY2VudGVyID0gMCk6IG51bWJlciA9PiB7XG4gIC8vIG51bWJlciBpcyBhbHJlYWR5IGF0IHRoZSBjZW50ZXJcbiAgaWYgKG51bSA9PT0gY2VudGVyKSByZXR1cm4gY2VudGVyO1xuXG4gIC8vIG51bWJlciBpcyBoaWdoZXIgdGhhbiB0aGUgY2VudGVyOyBzdWJ0cmFjdCBhbmQgZG9uJ3Qgb3ZlcnNob290IHRoZSBjZW50ZXJcbiAgaWYgKG51bSA+IGNlbnRlcikge1xuICAgIGNvbnN0IG5ld051bSA9IG51bSAtIGJ5O1xuICAgIHJldHVybiBuZXdOdW0gPCBjZW50ZXIgPyBjZW50ZXIgOiBuZXdOdW07XG4gIH1cblxuICAvLyBudW1iZXIgaXMgbG93ZXIgdGhhbiB0aGUgY2VudGVyOyBhZGQgYW5kIGRvbid0IG92ZXJzaG9vdCB0aGUgY2VudGVyXG4gIGNvbnN0IG5ld051bSA9IG51bSArIGJ5O1xuICByZXR1cm4gbmV3TnVtID4gY2VudGVyID8gY2VudGVyIDogbmV3TnVtO1xufTtcblxuZXhwb3J0IGNvbnN0IGJvdW5kID0gKG51bTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbiAgaWYgKG51bSA8IHJlYWxNaW4pIHJldHVybiByZWFsTWluO1xuICBpZiAobnVtID4gcmVhbE1heCkgcmV0dXJuIHJlYWxNYXg7XG4gIHJldHVybiBudW07XG59O1xuXG5leHBvcnQgY29uc3QgYmV0d2VlbiA9IChudW06IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBpbmNsdXNpdmUgPSB0cnVlKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IFtyZWFsTWluLCByZWFsTWF4XSA9IG1pbiA8IG1heCA/IFttaW4sIG1heF0gOiBbbWF4LCBtaW5dO1xuICByZXR1cm4gaW5jbHVzaXZlID8gKG51bSA+PSByZWFsTWluICYmIG51bSA8PSByZWFsTWF4KSA6IChudW0gPiByZWFsTWluICYmIG51bSA8IHJlYWxNYXgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGRpZmZlcmVuY2UgPSAobjogbnVtYmVyLCBtOiBudW1iZXIpOiBudW1iZXIgPT4gTWF0aC5hYnMobiAtIG0pO1xuXG5leHBvcnQgY29uc3Qgc2FtcGxlID0gPFQ+KGxpc3Q6IFRbXSk6IFQgPT4ge1xuICByZXR1cm4gbGlzdFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsaXN0Lmxlbmd0aCldO1xufTtcblxuZXhwb3J0IGNvbnN0IGRpc3RhbmNlQmV0d2VlbiA9IChvcmlnaW46IENvb3JkUG9zaXRpb24sIGRlc3RpbmF0aW9uOiBDb29yZFBvc2l0aW9uKTogbnVtYmVyID0+IHtcbiAgY29uc3QgZHggPSBkZXN0aW5hdGlvbi54IC0gb3JpZ2luLng7XG4gIGNvbnN0IGR5ID0gZGVzdGluYXRpb24ueSAtIG9yaWdpbi55O1xuICByZXR1cm4gTWF0aC5zcXJ0KChkeCAqKiAyKSArIChkeSAqKiAyKSk7XG59O1xuXG5leHBvcnQgY29uc3Qgcm90YXRlUG9pbnQgPSAoY29vcmRzOiBDb29yZFBvc2l0aW9uLCBhcm91bmQ6IENvb3JkUG9zaXRpb24sIHJhZGlhbnM6IG51bWJlcik6IENvb3JkUG9zaXRpb24gPT4ge1xuICBjb25zdCByZWxhdGl2ZSA9IHsgeDogY29vcmRzLnggLSBhcm91bmQueCwgeTogY29vcmRzLnkgLSBhcm91bmQueSB9O1xuICBjb25zdCBjb3NpbmUgPSBNYXRoLmNvcyhyYWRpYW5zKTtcbiAgY29uc3Qgc2luZSA9IE1hdGguc2luKHJhZGlhbnMpO1xuICBjb25zdCBuZXdYID0gKHJlbGF0aXZlLnggKiBjb3NpbmUpIC0gKHJlbGF0aXZlLnkgKiBzaW5lKTtcbiAgY29uc3QgbmV3WSA9IChyZWxhdGl2ZS54ICogc2luZSkgKyAocmVsYXRpdmUueSAqIGNvc2luZSk7XG4gIHJldHVybiB7IHg6IG5ld1ggKyBhcm91bmQueCwgeTogbmV3WSArIGFyb3VuZC55IH07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaXNOdWxsaXNoKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBOdWxsaXNoIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgTnVsbF0nO1xufVxuXG5leHBvcnQgY29uc3QgZmlsdGVyTWFwID0gPFQsIEs+KGxpc3Q6IFRbXSwgbWFwcGVyOiAoaXRlbTogVCwgaW5kZXg6IG51bWJlciwgb3JpZ2luYWw6IFRbXSkgPT4gS3xOdWxsaXNoKTogS1tdID0+IHtcbiAgcmV0dXJuIGxpc3QucmVkdWNlKChtZW1vLCBpdGVtLCBpbmRleCwgb3JpZ2luYWwpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBtYXBwZXIoaXRlbSwgaW5kZXgsIG9yaWdpbmFsKTtcbiAgICByZXR1cm4gaXNOdWxsaXNoKHJlc3VsdCkgPyBtZW1vIDogWy4uLm1lbW8sIHJlc3VsdF07XG4gIH0sIFtdIGFzIEtbXSk7XG59O1xuXG5leHBvcnQgY29uc3QgZmluZE1hcCA9IDxULCBLPihsaXN0OiBUW10sIG1hcHBlcjogKGl0ZW06IFQsIGluZGV4OiBudW1iZXIsIG9yaWdpbmFsOiBUW10pID0+IEt8TnVsbGlzaCk6IEt8dW5kZWZpbmVkID0+IHtcbiAgbGV0IHJlc3VsdDtcbiAgbGlzdC5maW5kKChpdGVtLCBpbmRleCwgb3JpZ2luYWwpID0+IHtcbiAgICByZXN1bHQgPSBtYXBwZXIoaXRlbSwgaW5kZXgsIG9yaWdpbmFsKTtcbiAgICByZXR1cm4gIWlzTnVsbGlzaChyZXN1bHQpO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCB1bmlxID0gPFQsIFAgZXh0ZW5kcyBrZXlvZiBUPihsaXN0OiBUW10sIG1hcHBlcjogUHxOdWxsaXNofCgoaXRlbTogVCwgaW5kZXg6IG51bWJlciwgb3JpZ2luYWw6IFRbXSkgPT4gYW55KSwgc29ydGVkID0gZmFsc2UpOiBUW10gPT4ge1xuICBjb25zdCBtYXBwZXJGbiA9IGlzTnVsbGlzaChtYXBwZXIpIHx8IHR5cGVvZiBtYXBwZXIgPT09ICdmdW5jdGlvbicgPyBtYXBwZXIgOiAoaXRlbTogVCkgPT4gaXRlbVttYXBwZXJdO1xuXG4gIGlmIChzb3J0ZWQgJiYgIW1hcHBlckZuKSB7XG4gICAgbGV0IGxhc3RTZWVuOiBUO1xuICAgIHJldHVybiBsaXN0LnJlZHVjZSgobWVtbywgaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChpbmRleCAhPT0gMCAmJiBpdGVtID09PSBsYXN0U2VlbikgcmV0dXJuIG1lbW87XG4gICAgICBsYXN0U2VlbiA9IGl0ZW07XG4gICAgICByZXR1cm4gWy4uLm1lbW8sIGl0ZW1dO1xuICAgIH0sIFtdIGFzIFRbXSk7XG4gIH1cblxuICBjb25zdCBzZWVuID0gbmV3IFNldCgpO1xuICByZXR1cm4gbGlzdC5yZWR1Y2UoKG1lbW8sIGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgY29uc3Qga2V5ID0gbWFwcGVyRm4gPyBtYXBwZXJGbihpdGVtLCBpbmRleCwgbGlzdCkgOiBpdGVtO1xuICAgIGlmIChzZWVuLmhhcyhrZXkpKSByZXR1cm4gbWVtbztcbiAgICBzZWVuLmFkZChrZXkpO1xuICAgIHJldHVybiBbLi4ubWVtbywgaXRlbV07XG4gIH0sIFtdIGFzIFRbXSk7XG59O1xuXG5leHBvcnQgY29uc3Qgcm90YXRlID0gPFQ+KGdyaWQ6IFRbXVtdLCByb3RhdGlvbnMgPSAxKTogVFtdW10gPT4ge1xuICBjb25zdCBxdWFkcmFudHMgPSByb3RhdGlvbnMgJSA0O1xuICBzd2l0Y2ggKHF1YWRyYW50cyA8IDAgPyA0IC0gcXVhZHJhbnRzIDogcXVhZHJhbnRzKSB7XG4gICAgY2FzZSAxOiB7XG4gICAgICByZXR1cm4gZ3JpZC5yZWR1Y2UoKG1lbW8sIHJvdywgcm93SW5kZXgpID0+IHtcbiAgICAgICAgcm93LmZvckVhY2goKGl0ZW0sIGNvbEluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3Um93SW5kZXggPSBjb2xJbmRleDtcbiAgICAgICAgICBjb25zdCBuZXdDb2xJbmRleCA9IGdyaWQubGVuZ3RoIC0gcm93SW5kZXggLSAxO1xuICAgICAgICAgIG1lbW9bbmV3Um93SW5kZXhdID0gbWVtb1tuZXdSb3dJbmRleF0gfHwgW107XG4gICAgICAgICAgbWVtb1tuZXdSb3dJbmRleF1bbmV3Q29sSW5kZXhdID0gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtZW1vO1xuICAgICAgfSwgW10gYXMgVFtdW10pO1xuICAgIH1cbiAgICBjYXNlIDI6IHJldHVybiBbLi4uZ3JpZF0ucmV2ZXJzZSgpLm1hcChyb3cgPT4gWy4uLnJvd10ucmV2ZXJzZSgpKTtcbiAgICBjYXNlIDM6IHtcbiAgICAgIHJldHVybiBncmlkLnJlZHVjZSgobWVtbywgcm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgICByb3cuZm9yRWFjaCgoaXRlbSwgY29sSW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdSb3dJbmRleCA9IHJvdy5sZW5ndGggLSBjb2xJbmRleCAtIDE7XG4gICAgICAgICAgY29uc3QgbmV3Q29sSW5kZXggPSByb3dJbmRleDtcbiAgICAgICAgICBtZW1vW25ld1Jvd0luZGV4XSA9IG1lbW9bbmV3Um93SW5kZXhdIHx8IFtdO1xuICAgICAgICAgIG1lbW9bbmV3Um93SW5kZXhdW25ld0NvbEluZGV4XSA9IGl0ZW07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbWVtbztcbiAgICAgIH0sIFtdIGFzIFRbXVtdKTtcbiAgICB9XG4gICAgZGVmYXVsdDogcmV0dXJuIGdyaWQubWFwKHJvdyA9PiBbLi4ucm93XSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCByb3RhdGVHcmlkUG9zaXRpb24gPSAoeyByb3csIGNvbCB9OiBHcmlkUG9zaXRpb24sIHJvd3M6IG51bWJlciwgY29sczogbnVtYmVyLCByb3RhdGlvbnM6IG51bWJlcik6IEdyaWRQb3NpdGlvbiA9PiB7XG4gIGNvbnN0IHF1YWRyYW50cyA9IHJvdGF0aW9ucyAlIDQ7XG4gIHN3aXRjaCAocXVhZHJhbnRzIDwgMCA/IDQgLSBxdWFkcmFudHMgOiBxdWFkcmFudHMpIHtcbiAgICBjYXNlIDE6IHJldHVybiB7IHJvdzogY29sLCBjb2w6IHJvd3MgLSByb3cgLSAxIH07XG4gICAgY2FzZSAyOiByZXR1cm4geyByb3c6IHJvd3MgLSByb3cgLSAxLCBjb2w6IGNvbHMgLSBjb2wgLSAxIH07XG4gICAgY2FzZSAzOiByZXR1cm4geyByb3c6IGNvbHMgLSBjb2wgLSAxLCBjb2w6IHJvdyB9O1xuICAgIGRlZmF1bHQ6IHJldHVybiB7IHJvdywgY29sIH07XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB0dXBsZSA9IDxUIGV4dGVuZHMgTGl0ZXJhbD4oLi4ubGlzdDogVFtdKTogVFtdID0+IGxpc3Q7XG4iLCJpbXBvcnQgeyBOZWVkIH0gZnJvbSBcIi4vdHlwZXMvY29tbW9uXCI7XG5cbmNvbnN0IE1VTkRBTkVfVkFSSUFOVCA9ICdtdW5kYW5lJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGlsZSB7XG4gIHB1YmxpYyB0eXBlOiBzdHJpbmc7XG4gIHB1YmxpYyB2YWx1ZTogbnVtYmVyO1xuICBwdWJsaWMgX3ZhcmlhbnQhOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoeyB0eXBlLCB2YWx1ZSwgdmFyaWFudCB9OiBOZWVkPFRpbGUsICd0eXBlJz4pIHtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZSB8fCAxO1xuICAgIHRoaXMuX3ZhcmlhbnQgPSB2YXJpYW50IHx8IE1VTkRBTkVfVkFSSUFOVDtcbiAgfVxuXG4gIHNldCB2YXJpYW50KHZhcmlhbnQ6IHN0cmluZykgeyB0aGlzLl92YXJpYW50ID0gdmFyaWFudCB8fCBNVU5EQU5FX1ZBUklBTlQgfVxuICBnZXQgdmFyaWFudCgpOiBzdHJpbmcgeyByZXR1cm4gdGhpcy5fdmFyaWFudCB8fCBNVU5EQU5FX1ZBUklBTlQgfVxuXG4gIGdldCBpc011bmRhbmUoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLnZhcmlhbnQgPT09IE1VTkRBTkVfVkFSSUFOVCB9XG59XG4iLCJpbXBvcnQgVGlsZSBmcm9tIFwiLi9UaWxlXCI7XG5pbXBvcnQgeyByYW5nZSwgc2FtcGxlLCByYW5kIH0gZnJvbSBcIi4vY29uY2VybnMvdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBOZWVkIH0gZnJvbSBcIi4vdHlwZXMvY29tbW9uXCI7XG5cbmV4cG9ydCB0eXBlIFRpbGVHZW5lcmF0b3I8VGlsZUNsYXNzIGV4dGVuZHMgVGlsZT4gPSAob3B0czogUGljazxUaWxlQ2xhc3MsICd2YXJpYW50Jz4pID0+IFRpbGVDbGFzcztcblxuZXhwb3J0IGludGVyZmFjZSBNdW5kYW5lVGlsZURlZjxUaWxlQ2xhc3MgZXh0ZW5kcyBUaWxlPiB7XG4gIGdlbmVyYXRvcjogVGlsZUdlbmVyYXRvcjxUaWxlQ2xhc3M+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNwZWNpYWxUaWxlRGVmPFRpbGVDbGFzcyBleHRlbmRzIFRpbGU+IHtcbiAgZ2VuZXJhdG9yOiBUaWxlR2VuZXJhdG9yPFRpbGVDbGFzcz47XG59XG5cbmV4cG9ydCB0eXBlIFRpbGVEZWY8VGlsZUNsYXNzIGV4dGVuZHMgVGlsZT4gPSBNdW5kYW5lVGlsZURlZjxUaWxlQ2xhc3M+IHwgU3BlY2lhbFRpbGVEZWY8VGlsZUNsYXNzPjtcblxuZXhwb3J0IGludGVyZmFjZSBNdW5kYW5lVGlsZURlZnM8VGlsZUNsYXNzIGV4dGVuZHMgVGlsZT4ge1xuICBbdHlwZTogc3RyaW5nXTogTXVuZGFuZVRpbGVEZWY8VGlsZUNsYXNzPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTcGVjaWFsVGlsZURlZnM8VGlsZUNsYXNzIGV4dGVuZHMgVGlsZT4ge1xuICBbdHlwZTogc3RyaW5nXTogTXVuZGFuZVRpbGVEZWY8VGlsZUNsYXNzPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUaWxlRGVmczxUaWxlQ2xhc3MgZXh0ZW5kcyBUaWxlPiB7XG4gIFt0eXBlOiBzdHJpbmddOiBUaWxlRGVmPFRpbGVDbGFzcz47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvYXJkPFRpbGVDbGFzcyBleHRlbmRzIFRpbGUgPSBUaWxlPiB7XG4gIHB1YmxpYyByb3dDb3VudCA9IDk7XG4gIHB1YmxpYyBjb2xDb3VudCA9IDk7XG4gIHB1YmxpYyB0aWxlQ2xhc3MgPSBUaWxlO1xuICBwdWJsaWMgdGlsZURlZnM6IFRpbGVEZWZzPFRpbGVDbGFzcz47XG4gIHB1YmxpYyBvblRpbGVNYXRjaGVkPzogKHRpbGU6IFRpbGVDbGFzcykgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfcm93cz86IFRpbGVDbGFzc1tdW107XG5cbiAgY29uc3RydWN0b3Iob3B0czogTmVlZDxCb2FyZDxUaWxlQ2xhc3M+LCAndGlsZURlZnMnPikge1xuICAgIE9iamVjdC5hc3NpZ24odGhpcywgb3B0cyk7XG4gICAgdGhpcy50aWxlRGVmcyA9IG9wdHMudGlsZURlZnM7XG4gIH1cblxuICBnZXQgcm93cygpOiBUaWxlQ2xhc3NbXVtdIHtcbiAgICB0aGlzLl9yb3dzID0gdGhpcy5fcm93cyB8fCB0aGlzLm5ld1Jvd3MoKTtcbiAgICByZXR1cm4gdGhpcy5fcm93cztcbiAgfVxuXG4gIHNldCByb3dzKHJvd3M6IFRpbGVDbGFzc1tdW10pIHtcbiAgICB0aGlzLl9yb3dzID0gcm93cztcbiAgfVxuXG4gIGdldCB0aWxlcygpOiBUaWxlQ2xhc3NbXSB7XG4gICAgcmV0dXJuIHRoaXMucm93cy5yZWR1Y2UoKHRpbGVzLCByb3cpID0+IFsuLi50aWxlcywgLi4ucm93XSwgW10pO1xuICB9XG5cbiAgZ2V0IHRpbGVUeXBlcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMudGlsZURlZnMpO1xuICB9XG5cbiAgbmV3TXVuZGFuZVRpbGUoKTogVGlsZUNsYXNzIHtcbiAgICBjb25zdCB0aWxlVHlwZSA9IHNhbXBsZSh0aGlzLnRpbGVUeXBlcyk7XG4gICAgY29uc3QgdGlsZURlZiA9IHRoaXMudGlsZURlZnNbdGlsZVR5cGVdO1xuICAgIHJldHVybiB0aWxlRGVmLmdlbmVyYXRvcih7IHZhcmlhbnQ6ICdtdW5kYW5lJyB9KTtcbiAgfVxuXG4gIG5ld1Jvd3MoKTogVGlsZUNsYXNzW11bXSB7XG4gICAgcmV0dXJuIHJhbmdlKHRoaXMucm93Q291bnQsICgpID0+IChyYW5nZSh0aGlzLmNvbENvdW50LCAoKSA9PiB0aGlzLm5ld011bmRhbmVUaWxlKCkpKSk7XG4gIH1cblxuICBzaHVmZmxlKCk6IHZvaWQge1xuICAgIGNvbnN0IHJvd0NvdW50ID0gdGhpcy5yb3dzLmxlbmd0aDtcbiAgICB0aGlzLnJvd3MuZm9yRWFjaCgocm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgY29uc3QgY29sQ291bnQgPSByb3cubGVuZ3RoO1xuICAgICAgcm93LmZvckVhY2goKHRpbGUsIGNvbEluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1Jvd0luZGV4ID0gcmFuZChyb3dDb3VudCk7XG4gICAgICAgIGNvbnN0IG5ld0NvbEluZGV4ID0gcmFuZChjb2xDb3VudCk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5yb3dzW25ld1Jvd0luZGV4XVtuZXdDb2xJbmRleF07XG4gICAgICAgIHRoaXMucm93c1tuZXdSb3dJbmRleF1bbmV3Q29sSW5kZXhdID0gdGlsZTtcbiAgICAgICAgdGhpcy5yb3dzW3Jvd0luZGV4XVtjb2xJbmRleF0gPSBleGlzdGluZztcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgQm9hcmQgZnJvbSAnLi9Cb2FyZCc7XG5cbih3aW5kb3cgYXMgYW55KS5Cb2FyZCA9IEJvYXJkO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==