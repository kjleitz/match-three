!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(t,e,r){"use strict";r.d(e,"d",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"h",(function(){return a})),r.d(e,"a",(function(){return l})),r.d(e,"g",(function(){return s})),r.d(e,"b",(function(){return u})),r.d(e,"e",(function(){return h})),r.d(e,"f",(function(){return f})),r.d(e,"i",(function(){return p}));var n=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,i++)n[i]=o[a];return n};function i(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n="number"==typeof e[0]?e[0]:0,i="function"==typeof e[0]?e[0]:e[1],o=t<n?[t,n]:[n,t],a=o[0],l=o[1]-a,s=Array(l),c=0;c<l;c++)s[c]=i?i(c+a):c+a;return s}var o=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=!0);var n=t<e?[t,e]:[e,t],i=n[0],o=n[1],a=Math.random()*(o-i);return i+(r?Math.floor(a):a)},a=function(t){return t[Math.floor(Math.random()*t.length)]},l=function(t,e){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(Math.pow(r,2)+Math.pow(n,2))},s=function(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=Math.cos(r),a=Math.sin(r),l=n*a+i*o;return{x:n*o-i*a+e.x,y:l+e.y}};function c(t){return void 0===t||"[object Null]"===Object.prototype.toString.call(t)}var u=function(t,e){var r;return t.find((function(t,n,i){return!c(r=e(t,n,i))})),r},h=function(t,e){void 0===e&&(e=1);var r=e%4;switch(r<0?4-r:r){case 1:return t.reduce((function(e,r,n){return r.forEach((function(r,i){var o=i,a=t.length-n-1;e[o]=e[o]||[],e[o][a]=r})),e}),[]);case 2:return n(t).reverse().map((function(t){return n(t).reverse()}));case 3:return t.reduce((function(t,e,r){return e.forEach((function(n,i){var o=e.length-i-1,a=r;t[o]=t[o]||[],t[o][a]=n})),t}),[]);default:return t.map((function(t){return n(t)}))}},f=function(t,e,r,n){var i=t.row,o=t.col,a=n%4;switch(a<0?4-a:a){case 1:return{row:o,col:e-i-1};case 2:return{row:e-i-1,col:r-o-1};case 3:return{row:r-o-1,col:i};default:return{row:i,col:o}}},p=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}},function(t,e,r){"use strict";var n="mundane",i=function(){function t(t){var e=t.type,r=t.value,i=t.variant;this.type=e,this.value=r||1,this._variant=i||n}return Object.defineProperty(t.prototype,"variant",{get:function(){return this._variant||n},set:function(t){this._variant=t||n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMundane",{get:function(){return this.variant===n},enumerable:!0,configurable:!0}),t}();e.a=i},function(t,e,r){"use strict";var n=r(1),i=r(0),o=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,i++)n[i]=o[a];return n},a=function(){function t(t){this.rowCount=9,this.colCount=9,this.tileClass=n.a,Object.assign(this,t),this.tileDefs=t.tileDefs}return Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows=this._rows||this.newRows(),this._rows},set:function(t){this._rows=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tiles",{get:function(){return this.rows.reduce((function(t,e){return o(t,e)}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileTypes",{get:function(){return Object.keys(this.tileDefs)},enumerable:!0,configurable:!0}),t.prototype.newMundaneTile=function(){var t=Object(i.h)(this.tileTypes);return this.tileDefs[t].generator({variant:"mundane"})},t.prototype.newRows=function(){var t=this;return Object(i.d)(this.rowCount,(function(){return Object(i.d)(t.colCount,(function(){return t.newMundaneTile()}))}))},t.prototype.shuffle=function(){var t=this,e=this.rows.length;this.rows.forEach((function(r,n){var o=r.length;r.forEach((function(r,a){var l=Object(i.c)(e),s=Object(i.c)(o),c=t.rows[l][s];t.rows[l][s]=r,t.rows[n][a]=c}))}))},t}();e.a=a},,function(t,e,r){"use strict";r.r(e);var n=function(t,e,r){void 0===r&&(r=0),requestAnimationFrame((function(){return n(t,e,r+1)})),t.clearRect(0,0,window.innerWidth,window.innerHeight),e(r)},i=n,o=document.createElement("canvas"),a=function(){o.width=window.innerWidth,o.height=window.innerHeight};a(),window.addEventListener("resize",a),document.body.appendChild(o);var l=o.getContext("2d");l||console.error("Canvas '2d' context is not supported.");var s,c=r(2),u=r(1),h=r(0),f=function(t,e,r,n,i,o,a){var l=2*o,s=.75*l,c=o,u=a-2*s,f=i.y+u/2,p=f-u,d=i.x-c/2,y=i.x+c/2,g=i.x-l/2,v=i.x+l/2,w=p,b=w-s,m=f,x=m+s,S={vertical:0,horizontal:.5*Math.PI}[e],T=[{x:d,y:p},{x:d,y:f},{x:g,y:m},{x:i.x,y:x},{x:v,y:m},{x:y,y:f},{x:y,y:p},{x:v,y:w},{x:i.x,y:b},{x:g,y:w}],O=S?T.map((function(t){return Object(h.g)(t,i,S)})):T;t.fillStyle=r,t.strokeStyle=n,t.beginPath();var C=O[0];t.moveTo(C.x,C.y),O.forEach((function(e){var r=e.x,n=e.y;return t.lineTo(r,n)})),t.lineTo(C.x,C.y),t.closePath(),t.fill(),n&&t.stroke()},p=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=parseInt("FFFFFF",16),y=function(t){function e(e){var r=t.call(this,e)||this;return r.width=50,r.height=50,r.color="white",r.selected=!1,r.targeted=!1,r.matchedAt=null,r.blank=!1,r.matchAnimationMs=250,r._imgUrl="",r.width=e.width||r.width,r.height=e.height||r.height,r.color=e.color||r.color,r.blank=e.blank||r.blank,r.matchAnimationMs=e.matchAnimationMs||r.matchAnimationMs,r._imgUrl=e.imgUrl||r._imgUrl,r.applyNormalStyle=e.applyNormalStyle||r.defaultApplyNormalStyle,r.applySelectedStyle=e.applySelectedStyle||r.defaultApplySelectedStyle,r.applyTargetedStyle=e.applyTargetedStyle||r.defaultApplyTargetedStyle,r.applyMatchedStyle=e.applyMatchedStyle||r.defaultApplyMatchedStyle,r}return p(e,t),Object.defineProperty(e.prototype,"matched",{get:function(){return!!this.matchedAt},set:function(t){var e=this;t&&this.matchedAt||(clearTimeout(this.blankTimeout),t?(this.matchedAt=new Date,this.blankTimeout=window.setTimeout((function(){return e.blank=!0}),this.matchAnimationMs)):this.matchedAt=null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imgUrl",{get:function(){return this._imgUrl},set:function(t){this._imgUrl=t,delete this._image},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){if(this._image)return this.image;if(!this.imgUrl)return null;var t=document.createElement("img");return t.src=this.imgUrl,t.width=this.width,t.height=this.height,this._image=t,this._image},enumerable:!0,configurable:!0}),e.prototype.draw=function(t,e,r){this.blank||(this.applyNormalStyle(t,this,{x:e,y:r}),this.matched?this.applyMatchedStyle(t,this,{x:e,y:r}):this.selected?this.applySelectedStyle(t,this,{x:e,y:r}):this.targeted&&this.applyTargetedStyle(t,this,{x:e,y:r}))},e.prototype.defaultApplyNormalStyle=function(t,e,r){var n=r.x,i=r.y,o=e.width,a=e.height,l=e.image,s=e.color,c=e.variant;l?t.drawImage(l,n,i):(t.fillStyle=s,t.fillRect(n,i,o,a));var u={x:n+a/2,y:i+o/2},h=o/8,p=.6*a;switch(c){case"horizontalClear":f(t,"horizontal","white","white",u,h,p);break;case"verticalClear":f(t,"vertical","white","white",u,h,p);break;case"crossClear":!function(t,e,r,n,i,o){var a=2*i,l=.75*a,s=i,c=s,u=o-2*l-s,h=n.y-c/2,f=h-u,p=n.y+c/2,d=p+u,y=n.x-s/2,g=y-u,v=n.x+s/2,w=v+u,b=f,m=b-l,x=d,S=x+l,T=g,O=T-l,C=w,k=C+l,j=h,E=p,M=y,_=v,D=n.y-a/2,A=n.y+a/2,P=n.x-a/2,F=n.x+a/2,N=[{x:M,y:f},{x:M,y:h},{x:g,y:j},{x:T,y:D},{x:O,y:n.y},{x:T,y:A},{x:g,y:E},{x:y,y:E},{x:M,y:d},{x:P,y:x},{x:n.x,y:S},{x:F,y:x},{x:_,y:d},{x:_,y:p},{x:w,y:E},{x:C,y:A},{x:k,y:n.y},{x:C,y:D},{x:w,y:j},{x:v,y:j},{x:_,y:f},{x:F,y:b},{x:n.x,y:m},{x:P,y:b}];t.fillStyle=e,t.strokeStyle=r,t.beginPath();var L=N[0];t.moveTo(L.x,L.y),N.forEach((function(e){var r=e.x,n=e.y;return t.lineTo(r,n)})),t.lineTo(L.x,L.y),t.closePath(),t.fill(),r&&t.stroke()}(t,"white","white",u,h,p);break;case"typeClear":t.fillStyle="#"+((new Date).getTime()%d).toString(16),t.fillRect(n,i,o,a);break;case"bombClear":t.fillStyle="black";var y=o/2,g=a/2;t.fillRect(n+y/2,i+g/2,y,g)}},e.prototype.defaultApplySelectedStyle=function(t,e,r){var n=r.x,i=r.y,o=e.width,a=e.height;t.fillStyle="rgba(255, 255, 255, 0.5)",t.fillRect(n,i,o,a)},e.prototype.defaultApplyTargetedStyle=function(t,e,r){var n=r.x,i=r.y,o=e.width,a=e.height,l=(new Date).getTime(),s=this.matchAnimationMs,c=2+3*Math.sin(l/s%Math.PI);t.fillStyle="rgba(255, 255, 255, 0.9)",t.fillRect(n,i,o,a),t.fillStyle=e.color,t.fillRect(n+c,i+c,o-2*c,a-2*c)},e.prototype.defaultApplyMatchedStyle=function(t,e,r){var n=r.x,i=r.y,o=e.width,a=e.height,l=e.color,s=e.matchAnimationMs;if(e.matchedAt){var c=(new Date).getTime()-e.matchedAt.getTime(),u=c>s?1:c/s,h=u*(o/2),f=u*(a/2);t.fillStyle="#FFF",t.fillRect(n,i,o,a),t.fillStyle=l,t.fillRect(n+h,i+f,o-2*h,a-2*f)}},e}(u.a),g=new(function(){function t(){var t=this;this.x=0,this.y=0,this.pressed=!1,this.pressCallbacks=[],this.depressCallbacks=[],this.moveCallbacks=[],this.pressedStartPos={x:this.x,y:this.y},window.addEventListener("mousedown",(function(e){t.populateFromMouseEvent(e),t.pressCallbacks.forEach((function(e){return e(t)}))})),window.addEventListener("mousemove",(function(e){t.populateFromMouseEvent(e),t.moveCallbacks.forEach((function(e){return e(t)}))})),window.addEventListener("mouseup",(function(e){t.depressCallbacks.forEach((function(e){return e(t)})),t.populateFromMouseEvent(e)})),window.addEventListener("touchstart",(function(e){t.populateFromTouchEvent(e),t.pressCallbacks.forEach((function(e){return e(t)}))})),window.addEventListener("touchmove",(function(e){t.populateFromTouchEvent(e),t.moveCallbacks.forEach((function(e){return e(t)}))})),window.addEventListener("touchend",(function(e){t.depressCallbacks.forEach((function(e){return e(t)})),t.populateFromTouchEvent(e)}))}return Object.defineProperty(t.prototype,"dragVector",{get:function(){var t=this.pressedStartPos,e=t.x,r=t.y;return this.pressed?{x:this.x-e,y:this.y-r}:{x:0,y:0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragDirection",{get:function(){var t=this.dragVector,e=t.x,r=t.y;return 0===e&&0===r?"none":Math.abs(e)>=Math.abs(r)?e<0?"left":"right":r<0?"up":"down"},enumerable:!0,configurable:!0}),t.prototype.onPress=function(t){this.pressCallbacks.push(t)},t.prototype.onDepress=function(t){this.depressCallbacks.push(t)},t.prototype.onMove=function(t){this.moveCallbacks.push(t)},t.prototype.populateFromMouseEvent=function(t){this.x=t.x,this.y=t.y;var e=this.pressed;this.pressed=1===t.buttons,this.pressed&&!e&&(this.pressedStartPos={x:this.x,y:this.y})},t.prototype.populateFromTouchEvent=function(t){var e=t.touches,r=this.pressed;if(0===e.length)this.pressed=!1;else{var n=e[0];this.x=n.clientX,this.y=n.clientY,this.pressed=!0,r||(this.pressedStartPos={x:this.x,y:this.y})}},t}()),v=function(){return(v=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},w=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,i++)n[i]=o[a];return n},b=function(){function t(t){void 0===t&&(t={}),this.value=t.value||1,this.extend=t.extend||!1,this.map=t.map||[[]]}return t.fromLength=function(e,r){var n=void 0===r?{}:r,i=n.value;return new t({value:void 0===i?1:i,extend:!!n.orMore,map:[Object(h.d)(e,(function(){return!0}))]})},t.rotated=function(e,r){return void 0===r&&(r=1),new t(v(v({},e),{map:Object(h.e)(e.map,r)}))},Object.defineProperty(t.prototype,"extend",{get:function(){return this._extend&&this.linear},set:function(t){this._extend=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"map",{get:function(){return this._map},set:function(t){delete this._linear;var e=t.reduce((function(t,e){var r=e.length;return r>t?r:t}),0);this._map=t.map((function(t){return Object(h.d)(e,(function(e){return t[e]||!1}))}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linear",{get:function(){return void 0!==this._linear?this._linear:(this._linear=1===this.map.length&&this.map[0].every((function(t){return t}))||this.map.every((function(t){return 1===t.length&&t[0]})),this._linear)},enumerable:!0,configurable:!0}),t.prototype.match=function(t,e,r){void 0===r&&(r=0);var n=[];if(r>3)return{rotation:r,matched:n,center:null};var i,o=!1;if(Object(h.e)(this.map,r).every((function(r,a){var l=t[a];return!!l&&r.every((function(t,r){if(!t)return!0;var a=l[r];if(!a)return!1;var s=a[e];return o||(i=s,o=!0),s===i&&(n.push(a),!0)}))}))){var a=this.centerPosition(r),l=a.row,s=a.col,c=t[l][s];return{rotation:r,matched:n,center:c}}return this.match(t,e,r+1)},t.prototype.screen=function(t,e){return void 0===e&&(e={row:0,col:0}),(e.row<0?this.map.slice(-1*e.row):w(Object(h.d)(e.row,(function(){return[]})),this.map)).map((function(t){return e.col<0?t.slice(-1*e.col):w(Object(h.d)(e.col,(function(){return!1})),t)})).reduce((function(e,r,n){var i=t[n];return w(e,r.reduce((function(t,e,r){var n=i&&i[r];return n&&e?w(t,[n]):t}),[]))}),[])},Object.defineProperty(t.prototype,"center",{get:function(){var t=Math.floor(this.map.length/2),e=this.map[t],r=Math.floor(e.length/2);return{mustMatch:e[r],row:t,col:r}},enumerable:!0,configurable:!0}),t.prototype.centerPosition=function(t){if(void 0===t&&(t=0),void 0===this._centerPosition){var e=this.map.reduce((function(t,e){return t+e.reduce((function(t,e){return e?t+1:t}),0)}),0),r=Math.floor(e/2),n=0;this._centerPosition=Object(h.b)(this.map,(function(t,e){return Object(h.b)(t,(function(t,i){if(t)return n===r?{row:e,col:i}:void(n+=1)}))}))}var i=this.map.length,o=this.map[0].length;return Object(h.f)(this._centerPosition,i,o,t)},t}(),m=b,x=function(){return[b.fromLength(3,{value:1}),b.fromLength(4,{value:2}),b.fromLength(5,{value:3}),b.fromLength(6,{value:4,orMore:!0}),new b({value:5,map:[[!0,!0,!0],[!0],[!0]]}),new b({value:6,map:[[!0,!0,!0],[!1,!0],[!1,!0]]}),new b({value:7,map:[[!0,!0],[!0,!0]]})]},S=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),T=function(){return(T=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},O=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,i++)n[i]=o[a];return n},C=function(){return{row:-1,col:-1,tile:null}},k=function(t){function e(e){var r=t.call(this,T(T({},e),{tileDefs:{red:{generator:function(t){var e=t.variant;return r.defaultNewTileOfType("red",e)}},orange:{generator:function(t){var e=t.variant;return r.defaultNewTileOfType("orange",e)}},purple:{generator:function(t){var e=t.variant;return r.defaultNewTileOfType("purple",e)}},green:{generator:function(t){var e=t.variant;return r.defaultNewTileOfType("green",e)}},blue:{generator:function(t){var e=t.variant;return r.defaultNewTileOfType("blue",e)}}}}))||this;r.dragStartCallbacks=[],r.dragEndCallbacks=[],r.dragCallbacks=[],r.dragOrigin=C(),r.swapOrigin=C(),r.swapTarget=C(),r.needsShuffle=!1,r.x=e.x||0,r.y=e.y||0;var n=e.width||50*r.colCount;return r.width=n-n%r.colCount,r.height=e.height||r.width,r.sensitivity=e.sensitivity||25,r.shapes=e.shapes||x(),r.applyNormalStyle=e.applyNormalStyle,r.applySelectedStyle=e.applySelectedStyle,r.applyTargetedStyle=e.applyTargetedStyle,r.applyMatchedStyle=e.applyMatchedStyle,r.matchAnimationMs=e.matchAnimationMs||250,g.onPress(r.runDragStartCallbacks.bind(r)),g.onDepress(r.runDragEndCallbacks.bind(r)),g.onMove(r.runDragCallbacks.bind(r)),r.stabilizeInitialTiles(),window.setInterval((function(){return r.checkShuffle()}),1e3),r}return S(e,t),Object.defineProperty(e.prototype,"tileWidth",{get:function(){return this.width/this.colCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileHeight",{get:function(){return this.height/this.rowCount},enumerable:!0,configurable:!0}),e.prototype.draw=function(t){var e=this,r=this.checkSettle(),n=this.startedSettlingAt?(new Date).getTime()-this.startedSettlingAt.getTime():0,i=n/100*this.tileHeight,o=n>100;o&&delete this.startedSettlingAt;var a=[];this.rows.forEach((function(n,l){n.forEach((function(n,s){var c=e.x+s*n.width,u=e.y+l*n.height;if(r&&!n.blank){var h={row:l,col:s},f=e.adjacentTile(h,"down");f.tile&&f.tile.blank&&(u+=i,o&&a.push([h,f]))}n.draw(t,c,u)}))})),a.forEach((function(t){var r=t[0],n=t[1];return e.swapTile(r,n)}))},e.prototype.update=function(){var t=this;if(this.spawnNewTiles(),!this.tilesWillDrop()){this.needsShuffle&&this.shuffle();var e=this.matchShapes();if(e.length){var r=this.swapOrigin.tile,n=this.swapTarget.tile,i=O(e).sort((function(t,e){return t.shape.value>e.shape.value?-1:e.shape.value>t.shape.value?1:t.tiles.some((function(t){return t===n||t===r}))?-1:e.tiles.some((function(t){return t===n||t===r}))?1:0})),o=new Map;i.forEach((function(e){var i=e.tiles,a=e.shape,l=e.rotation,s=e.centerTile;i.forEach((function(e){return t.explodeTile(e)}));var c=t.variantForShape(a,l);if(c){var u=i.find((function(t){return t===n||t===r}))||s,h=o.get(u);o.set(u,O(h||[],[c]))}})),o.forEach((function(t,e){e.variant=t[0],e.matched=!1})),e.length&&this.onTileMatched&&new Set(O(Array.from(o.keys()),this.tiles.filter((function(t){return t.matched})))).forEach((function(e){return t.onTileMatched(e)}))}}},e.prototype.spawnNewTiles=function(){var t=this;this.rows[0]=this.rows[0].map((function(e){return e.blank?t.newMundaneTile():e}))},e.prototype.tilesWillDrop=function(){return this.rows.slice(1).some((function(t){return t.some((function(t){return t.matched||t.blank}))}))},e.prototype.explodeTile=function(t){if(t.isMundane&&(t.matched=!0),!t.matched)switch(t.matched=!0,t.variant){case"horizontalClear":this.clearRow(this.findTile(t));break;case"verticalClear":this.clearCol(this.findTile(t));break;case"crossClear":this.clearCross(this.findTile(t));break;case"typeClear":this.clearType(t.type);break;case"bombClear":this.clearBomb(this.findTile(t))}},e.prototype.clearRow=function(t){var e=this,r=t.row;this.rows[r].forEach((function(t){return e.explodeTile(t)}))},e.prototype.clearCol=function(t){var e=this,r=t.col;this.rows.forEach((function(t){return e.explodeTile(t[r])}))},e.prototype.clearCross=function(t){var e=t.row,r=t.col;this.clearRow({row:e}),this.clearCol({col:r})},e.prototype.clearType=function(t){var e=this;this.tiles.forEach((function(r){r.type===t&&e.explodeTile(r)}))},e.prototype.clearBomb=function(t){var e=this,r=t.row,n=t.col,i=new m({map:[[!1,!1,!0],[!1,!0,!0,!0],[!0,!0,!0,!0,!0],[!1,!0,!0,!0],[!1,!1,!0]]}),o=i.center,a=r-o.row,l=n-o.col;i.screen(this.rows,{row:a,col:l}).forEach((function(t){return e.explodeTile(t)}))},e.prototype.checkSettle=function(){return this.tiles.some((function(t){return t.blank}))?(this.startedSettlingAt||(this.startedSettlingAt=new Date),!0):(delete this.startedSettlingAt,!1)},e.prototype.tileAt=function(t){if("row"in t){var e=t.row,r=t.col,n=this.rows[e][r];return n?{row:e,col:r,tile:n}:C()}var i=t.x-this.x,o=t.y-this.y;if(i>this.width||o>this.height)return C();var a=i/this.width,l=o/this.height,s=Math.floor(l*this.rowCount),c=Math.floor(a*this.colCount);return{row:s,col:c,tile:this.rows[s][c]}},e.prototype.findTile=function(t){return Object(h.b)(this.rows,(function(e,r){return Object(h.b)(e,(function(e,n){if(t===e)return{row:r,col:n,tile:e}}))}))||C()},e.prototype.tileCenter=function(t){var e=t.row,r=t.col,n=t.tile;return n?{x:this.x+r*n.height+n.height/2,y:this.y+e*n.width+n.width/2}:{x:-1,y:-1}},e.prototype.swapTile=function(t,e){"string"==typeof e?this.swapTileInDirection(t,e):this.swapTileWithTile(t,e)},e.prototype.onDragStart=function(t){var e=this.dragStartCallbacks.length;return this.dragStartCallbacks.push(t),e},e.prototype.removeDragStartListener=function(t){delete this.dragStartCallbacks[t]},e.prototype.onDragEnd=function(t){var e=this.dragEndCallbacks.length;return this.dragEndCallbacks.push(t),e},e.prototype.removeDragEndListener=function(t){delete this.dragEndCallbacks[t]},e.prototype.onDrag=function(t){var e=this.dragCallbacks.length;return this.dragCallbacks.push(t),e},e.prototype.removeDragListener=function(t){delete this.dragCallbacks[t]},e.prototype.adjacentSpace=function(t,e){var r="row"in t?t:this.tileAt(t),n=r.row,i=r.col;switch(e){case"up":return{row:n-1,col:i};case"down":return{row:n+1,col:i};case"left":return{row:n,col:i-1};case"right":return{row:n,col:i+1};default:return{row:n,col:i}}},e.prototype.adjacentTile=function(t,e){var r=this.adjacentSpace(t,e),n=r.row,i=r.col,o=this.rows[n]&&this.rows[n][i];return o?{row:n,col:i,tile:o}:C()},e.prototype.removeTile=function(t){t.blank=!0},e.prototype.matchShapes=function(){var t=this;return Object(h.d)(this.colCount).reduce((function(e,r){return t.shapes.forEach((function(n){t.rows.forEach((function(i,o){var a=t.rows.slice(o).map((function(t){return t.slice(r)})),l=n.match(a,"type"),s=l.rotation,c=l.matched,u=l.center;c.length>0&&e.push({shape:n,rotation:s,tiles:c,centerTile:u})}))})),e}),[])},e.prototype.defaultNewTileOfType=function(t,e){return new y({type:t,variant:e,color:{red:"red",orange:"orange",purple:"purple",green:"green",blue:"blue"}[t],width:this.tileWidth,height:this.tileHeight,applyNormalStyle:this.applyNormalStyle,applySelectedStyle:this.applySelectedStyle,applyTargetedStyle:this.applyTargetedStyle,applyMatchedStyle:this.applyMatchedStyle})},e.prototype.variantForShape=function(t,e){switch(t.value){case 2:return e%2==0?"verticalClear":"horizontalClear";case 3:case 4:return"typeClear";case 5:case 6:return"crossClear";case 7:return"bombClear";default:return""}},e.prototype.swapTileWithTile=function(t,e){var r=this.tileAt(t);if(r.tile){this.swapOrigin=r;var n=this.tileAt(e);n.tile&&(this.swapTarget=n,this.rows[n.row][n.col]=r.tile,this.rows[r.row][r.col]=n.tile)}},e.prototype.swapTileInDirection=function(t,e){var r=this.tileAt(t);if(r.tile){this.swapOrigin=r;var n=this.adjacentTile(r,e);n.tile&&(this.swapTarget=n,this.rows[n.row][n.col]=r.tile,this.rows[r.row][r.col]=n.tile)}},e.prototype.clearExistingDragFlags=function(){this.tiles.forEach((function(t){t.selected=!1,t.targeted=!1}))},e.prototype.setDragStartFlags=function(t){this.clearExistingDragFlags(),t.tile.selected=!0,t.tile.targeted=!0},e.prototype.setDragEndFlags=function(){this.clearExistingDragFlags()},e.prototype.setDragFlags=function(t,e){this.clearExistingDragFlags(),t.tile.selected=!0,e.tile.targeted=!0},e.prototype.runDragStartCallbacks=function(t){if(!this.checkSettle()){var e=t.x,r=t.y,n=this.tileAt({x:e,y:r});if(n.tile){this.dragOrigin=n,this.setDragStartFlags(this.dragOrigin);var i=Object(h.a)(t,this.tileCenter(n)),o=t.dragDirection,a=n;this.dragStartCallbacks.forEach((function(l){l({x:e,y:r,distance:i,direction:o,origin:n,destination:a,mouse:t})}))}}},e.prototype.runDragEndCallbacks=function(t){if(!this.checkSettle()){var e=this.dragOrigin;if(e.tile){var r=t.x,n=t.y,i=Object(h.a)(t,this.tileCenter(e)),o=i>this.sensitivity?this.adjacentTile(e,t.dragDirection):e,a=o.tile?o:e,l=t.dragDirection;this.setDragEndFlags(),this.dragEndCallbacks.forEach((function(o){o({x:r,y:n,distance:i,direction:l,origin:e,destination:a,mouse:t})})),this.dragOrigin=C()}}},e.prototype.runDragCallbacks=function(t){if(!this.checkSettle()){var e=this.dragOrigin;if(e.tile){var r=t.x,n=t.y;if(t.pressed){var i=Object(h.a)(t,this.tileCenter(e)),o=i>this.sensitivity?this.adjacentTile(e,t.dragDirection):e,a=o.tile?o:e,l=t.dragDirection;this.setDragFlags(e,a),this.dragCallbacks.forEach((function(o){o({x:r,y:n,distance:i,direction:l,origin:e,destination:a,mouse:t})}))}}}},e.prototype.replaceTile=function(t,e){var r=this.findTile(t),n=r.row,i=r.col;this.rows[n][i]=e},e.prototype.stabilizeInitialTiles=function(t){var e=this;if(void 0===t&&(t=20),t<=0)return this.rows=this.newRows(),void this.stabilizeInitialTiles();var r=this.matchShapes();r.length&&(r[0].tiles.forEach((function(t){return e.replaceTile(t,e.newMundaneTile())})),this.stabilizeInitialTiles(t-1))},e.prototype.possibleMatchesExist=function(){var t=this;return!!Object(h.b)(this.rows,(function(e,r){return Object(h.b)(e,(function(e,n){var i={row:r,col:n};return Object(h.b)(Object(h.i)("up","down","left","right"),(function(e){if(t.swapTileInDirection(i,e),t.matchShapes())return!0;t.swapTileInDirection(i,e)}))}))}))},e.prototype.checkShuffle=function(){this.needsShuffle=!this.possibleMatchesExist()},e}(c.a);window.defaultShapes=x;var j={},E=10;window.addEventListener("DOMContentLoaded",(function(){var t=Math.min(window.innerWidth,window.innerHeight,500),e=new k({width:t,rowCount:9,colCount:9,onTileMatched:function(t){j[t.type]=j[t.type]||0,j[t.type]+=1}});e.onDragEnd((function(t){E<=0||(e.swapTile(t.origin,t.destination),e.matchShapes().length?E--:e.swapTile(t.origin,t.destination))})),i(l,(function(r){e.draw(l),e.update();l.fillStyle="black",l.font="24px Courier",E<=0?l.fillText("FIN",24,t+20):l.fillText("Moves left: "+E,24,t+20),Object.keys(j).sort().forEach((function(e,r){var n=t+20+30*(1+r),i=j[e];l.fillStyle=e,l.fillRect(20,n,24,24),l.fillStyle="black",l.font="24px Courier",l.fillText(i+"/20",54,n+20.4)}))})),window.board=e}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmNlcm5zL3V0aWxpdGllcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGlsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQm9hcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvZ2FtZUxvb3AudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvY2FudmFzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb25jZXJucy9kcmF3aW5nLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL0NhbnZhc1RpbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvbW91c2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1NoYXBlLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL0NhbnZhc0JvYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmFuZ2UiLCJtaW4iLCJtYXgiLCJtYXhBbmRPck1hcHBlciIsIm1hcHBlciIsInJlYWxNaW4iLCJkaWZmIiwibGlzdCIsIkFycmF5IiwicmFuZCIsImludCIsInJlYWxNYXgiLCJyYW5kb21EaWZmIiwiTWF0aCIsInJhbmRvbSIsImZsb29yIiwic2FtcGxlIiwibGVuZ3RoIiwiZGlzdGFuY2VCZXR3ZWVuIiwib3JpZ2luIiwiZGVzdGluYXRpb24iLCJkeCIsIngiLCJkeSIsInkiLCJzcXJ0Iiwicm90YXRlUG9pbnQiLCJjb29yZHMiLCJhcm91bmQiLCJyYWRpYW5zIiwicmVsYXRpdmUiLCJjb3NpbmUiLCJjb3MiLCJzaW5lIiwic2luIiwibmV3WSIsImlzTnVsbGlzaCIsInRvU3RyaW5nIiwiZmluZE1hcCIsInJlc3VsdCIsImZpbmQiLCJpdGVtIiwiaW5kZXgiLCJvcmlnaW5hbCIsInJvdGF0ZSIsImdyaWQiLCJyb3RhdGlvbnMiLCJxdWFkcmFudHMiLCJyZWR1Y2UiLCJtZW1vIiwicm93Iiwicm93SW5kZXgiLCJmb3JFYWNoIiwiY29sSW5kZXgiLCJuZXdSb3dJbmRleCIsIm5ld0NvbEluZGV4IiwicmV2ZXJzZSIsIm1hcCIsInJvdGF0ZUdyaWRQb3NpdGlvbiIsInJvd3MiLCJjb2xzIiwiY29sIiwidHVwbGUiLCJNVU5EQU5FX1ZBUklBTlQiLCJ0eXBlIiwidmFyaWFudCIsInRoaXMiLCJfdmFyaWFudCIsIm9wdHMiLCJyb3dDb3VudCIsImNvbENvdW50IiwidGlsZUNsYXNzIiwiYXNzaWduIiwidGlsZURlZnMiLCJfcm93cyIsIm5ld1Jvd3MiLCJ0aWxlcyIsImtleXMiLCJuZXdNdW5kYW5lVGlsZSIsInRpbGVUeXBlIiwidGlsZVR5cGVzIiwiZ2VuZXJhdG9yIiwic2h1ZmZsZSIsInRpbGUiLCJleGlzdGluZyIsImdhbWVMb29wIiwiZHJhdyIsImxvb3BDb3VudCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNsZWFyUmVjdCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0cmV0Y2hDYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJnZXRDb250ZXh0IiwiY29uc29sZSIsImVycm9yIiwiZHJhd0RvdWJsZUFycm93IiwiY3R4IiwiZGlyIiwiZmlsbFN0eWxlIiwic3Ryb2tlU3R5bGUiLCJjZW50ZXIiLCJoZWFkV2lkdGgiLCJoZWFkTGVuZ3RoIiwidGFpbFdpZHRoIiwidGFpbExlbmd0aCIsInRhaWxCb3R0b20iLCJ0YWlsVG9wIiwidGFpbExlZnQiLCJ0YWlsUmlnaHQiLCJoZWFkTGVmdCIsImhlYWRSaWdodCIsInRvcEhlYWRCYXNlIiwidG9wSGVhZFRpcCIsImJvdHRvbUhlYWRCYXNlIiwiYm90dG9tSGVhZFRpcCIsImFuZ2xlIiwidmVydGljYWwiLCJob3Jpem9udGFsIiwiUEkiLCJwb2ludHMiLCJyb3RhdGVkUG9pbnRzIiwicHQiLCJiZWdpblBhdGgiLCJzdGFydFBvaW50IiwibW92ZVRvIiwibGluZVRvIiwiY2xvc2VQYXRoIiwiZmlsbCIsInN0cm9rZSIsIk1BWF9DT0xPUl9JTlQiLCJwYXJzZUludCIsImNvbG9yIiwic2VsZWN0ZWQiLCJ0YXJnZXRlZCIsIm1hdGNoZWRBdCIsImJsYW5rIiwibWF0Y2hBbmltYXRpb25NcyIsIl9pbWdVcmwiLCJpbWdVcmwiLCJhcHBseU5vcm1hbFN0eWxlIiwiZGVmYXVsdEFwcGx5Tm9ybWFsU3R5bGUiLCJhcHBseVNlbGVjdGVkU3R5bGUiLCJkZWZhdWx0QXBwbHlTZWxlY3RlZFN0eWxlIiwiYXBwbHlUYXJnZXRlZFN0eWxlIiwiZGVmYXVsdEFwcGx5VGFyZ2V0ZWRTdHlsZSIsImFwcGx5TWF0Y2hlZFN0eWxlIiwiZGVmYXVsdEFwcGx5TWF0Y2hlZFN0eWxlIiwibWF0Y2hlZCIsImNsZWFyVGltZW91dCIsImJsYW5rVGltZW91dCIsIkRhdGUiLCJzZXRUaW1lb3V0IiwiX2ltYWdlIiwiaW1hZ2UiLCJzcmMiLCJkcmF3SW1hZ2UiLCJmaWxsUmVjdCIsImFycm93V2lkdGgiLCJhcnJvd0xlbmd0aCIsInRhaWxJbnRlcnNlY3Rpb25XaWR0aCIsInRhaWxJbnRlcnNlY3Rpb25IZWlnaHQiLCJub3J0aFRhaWxCYXNlIiwibm9ydGhUYWlsVGlwIiwic291dGhUYWlsQmFzZSIsInNvdXRoVGFpbFRpcCIsIndlc3RUYWlsQmFzZSIsIndlc3RUYWlsVGlwIiwiZWFzdFRhaWxCYXNlIiwiZWFzdFRhaWxUaXAiLCJub3J0aEhlYWRCYXNlIiwibm9ydGhIZWFkVGlwIiwic291dGhIZWFkQmFzZSIsInNvdXRoSGVhZFRpcCIsIndlc3RIZWFkQmFzZSIsIndlc3RIZWFkVGlwIiwiZWFzdEhlYWRCYXNlIiwiZWFzdEhlYWRUaXAiLCJob3Jpem9udGFsVGFpbFRvcCIsImhvcml6b250YWxUYWlsQm90dG9tIiwidmVydGljYWxUYWlsTGVmdCIsInZlcnRpY2FsVGFpbFJpZ2h0IiwiaG9yaXpvbnRhbEhlYWRUb3AiLCJob3Jpem9udGFsSGVhZEJvdHRvbSIsInZlcnRpY2FsSGVhZExlZnQiLCJ2ZXJ0aWNhbEhlYWRSaWdodCIsImRyYXdDcm9zc0Fycm93IiwiZ2V0VGltZSIsImJveFdpZHRoIiwiYm94SGVpZ2h0IiwibWlsbGlzIiwicHVsc2VNcyIsInN0cm9rZVdpZHRoIiwibXNTaW5jZU1hdGNoIiwicGVyY2VudERvbmUiLCJUaWxlIiwicHJlc3NlZCIsInByZXNzQ2FsbGJhY2tzIiwiZGVwcmVzc0NhbGxiYWNrcyIsIm1vdmVDYWxsYmFja3MiLCJwcmVzc2VkU3RhcnRQb3MiLCJldmVudCIsInBvcHVsYXRlRnJvbU1vdXNlRXZlbnQiLCJjYWxsYmFjayIsInBvcHVsYXRlRnJvbVRvdWNoRXZlbnQiLCJhYnMiLCJvblByZXNzIiwicHVzaCIsIm9uRGVwcmVzcyIsIm9uTW92ZSIsImFscmVhZHlQcmVzc2VkIiwiYnV0dG9ucyIsInRvdWNoZXMiLCJ0b3VjaCIsImNsaWVudFgiLCJjbGllbnRZIiwiZXh0ZW5kIiwiZnJvbUxlbmd0aCIsIlNoYXBlIiwib3JNb3JlIiwicm90YXRlZCIsInNoYXBlIiwiX2V4dGVuZCIsImxpbmVhciIsIl9tYXAiLCJfbGluZWFyIiwicm93TGVuZ3RoIiwiZXZlcnkiLCJzcGFjZSIsIm1hdGNoIiwiZmllbGQiLCJyb3RhdGlvbiIsIm1hdGNoVmFsdWUiLCJtYXRjaFZhbHVlU2V0IiwibWF0Y2hlclJvdyIsImdyaWRSb3ciLCJtdXN0TWF0Y2giLCJncmlkSXRlbSIsImdyaWRWYWx1ZSIsInNjcmVlbiIsIm9mZnNldCIsInNsaWNlIiwiYWxsTWF0Y2hlZFRpbGVzIiwibWF0Y2hlZFJvd1RpbGVzIiwibWFwUm93IiwiY2VudGVyUG9zaXRpb24iLCJfY2VudGVyUG9zaXRpb24iLCJtdXN0TWF0Y2hDb3VudCIsInRvdGFsIiwic3VtIiwiZGVmYXVsdFNoYXBlcyIsImJsYW5rQ2FudmFzVGlsZUluZm8iLCJyZWQiLCJkZWZhdWx0TmV3VGlsZU9mVHlwZSIsIm9yYW5nZSIsInB1cnBsZSIsImdyZWVuIiwiYmx1ZSIsImRyYWdTdGFydENhbGxiYWNrcyIsImRyYWdFbmRDYWxsYmFja3MiLCJkcmFnQ2FsbGJhY2tzIiwiZHJhZ09yaWdpbiIsInN3YXBPcmlnaW4iLCJzd2FwVGFyZ2V0IiwibmVlZHNTaHVmZmxlIiwicmF3V2lkdGgiLCJzZW5zaXRpdml0eSIsInNoYXBlcyIsInJ1bkRyYWdTdGFydENhbGxiYWNrcyIsInJ1bkRyYWdFbmRDYWxsYmFja3MiLCJydW5EcmFnQ2FsbGJhY2tzIiwic3RhYmlsaXplSW5pdGlhbFRpbGVzIiwic2V0SW50ZXJ2YWwiLCJjaGVja1NodWZmbGUiLCJzZXR0bGluZyIsImNoZWNrU2V0dGxlIiwibXNTaW5jZVNldHRsZSIsInN0YXJ0ZWRTZXR0bGluZ0F0IiwidGlsZUhlaWdodCIsIml0c1N3YXBUaW1lQnJ1aCIsInRpbGVzVG9Td2FwIiwidGlsZUluZGV4IiwicG9zaXRpb24iLCJiZWxvdyIsImFkamFjZW50VGlsZSIsInN3YXBUaWxlIiwidXBkYXRlIiwic3Bhd25OZXdUaWxlcyIsInRpbGVzV2lsbERyb3AiLCJtYXRjaGVkU2hhcGVzIiwibWF0Y2hTaGFwZXMiLCJvcmlnaW5UaWxlIiwidGFyZ2V0VGlsZSIsInNvcnRlZE1hdGNoZWRTaGFwZXMiLCJzb3J0IiwiYSIsImIiLCJzb21lIiwidHJhbnNjZW5kZW50VGlsZXMiLCJNYXAiLCJjZW50ZXJUaWxlIiwiZXhwbG9kZVRpbGUiLCJ2YXJpYW50Rm9yU2hhcGUiLCJ0cmFuc2NlbmRlbnQiLCJzZXQiLCJ2YXJpYW50cyIsIm9uVGlsZU1hdGNoZWQiLCJTZXQiLCJmcm9tIiwiZmlsdGVyIiwiaXNNdW5kYW5lIiwiY2xlYXJSb3ciLCJmaW5kVGlsZSIsImNsZWFyQ29sIiwiY2xlYXJDcm9zcyIsImNsZWFyVHlwZSIsImNsZWFyQm9tYiIsImJvbWJTaGFwZSIsImJvbWJUb3AiLCJib21iTGVmdCIsInRpbGVBdCIsInBvcyIsImZyYWN0aW9uWCIsImZyYWN0aW9uWSIsInRhcmdldCIsInJvd1RpbGVzIiwidGlsZUNlbnRlciIsInRpbGVJbmZvIiwidG8iLCJzd2FwVGlsZUluRGlyZWN0aW9uIiwic3dhcFRpbGVXaXRoVGlsZSIsIm9uRHJhZ1N0YXJ0IiwicmVtb3ZlRHJhZ1N0YXJ0TGlzdGVuZXIiLCJpZCIsIm9uRHJhZ0VuZCIsInJlbW92ZURyYWdFbmRMaXN0ZW5lciIsIm9uRHJhZyIsInJlbW92ZURyYWdMaXN0ZW5lciIsImFkamFjZW50U3BhY2UiLCJkaXJlY3Rpb24iLCJyZW1vdmVUaWxlIiwiX3JvdyIsIm5ld0dyaWQiLCJ0aWxlV2lkdGgiLCJjbGVhckV4aXN0aW5nRHJhZ0ZsYWdzIiwic2V0RHJhZ1N0YXJ0RmxhZ3MiLCJzZXREcmFnRW5kRmxhZ3MiLCJzZXREcmFnRmxhZ3MiLCJtb3VzZSIsImRpc3RhbmNlIiwiZHJhZ0RpcmVjdGlvbiIsInJlcGxhY2VUaWxlIiwidGlsZTEiLCJ0aWxlMiIsInRyaWVzIiwicG9zc2libGVNYXRjaGVzRXhpc3QiLCJfdGlsZSIsIkJvYXJkIiwic2NvcmVzIiwibW92ZXMiLCJib2FyZFNpemUiLCJib2FyZCIsIl9sb29wQ291bnQiLCJmb250Iiwic2l6ZSIsImZpbGxUZXh0Iiwic2NvcmUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FB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bWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4iLCJpbXBvcnQgeyBDb29yZFBvc2l0aW9uLCBOdWxsaXNoLCBHcmlkUG9zaXRpb24sIExpdGVyYWwgfSBmcm9tIFwiLi4vdHlwZXMvY29tbW9uXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByYW5nZTxUPihtaW46IG51bWJlciwgLi4ubWF4QW5kT3JNYXBwZXI6IFtdKTogbnVtYmVyW107XG5leHBvcnQgZnVuY3Rpb24gcmFuZ2U8VD4obWluOiBudW1iZXIsIC4uLm1heEFuZE9yTWFwcGVyOiBbbnVtYmVyXSk6IG51bWJlcltdO1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmdlPFQ+KG1pbjogbnVtYmVyLCAuLi5tYXhBbmRPck1hcHBlcjogWyhuOiBudW1iZXIpID0+IFRdKTogVFtdO1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmdlPFQ+KG1pbjogbnVtYmVyLCAuLi5tYXhBbmRPck1hcHBlcjogW251bWJlciwgKG46IG51bWJlcikgPT4gVF0pOiBUW107XG5leHBvcnQgZnVuY3Rpb24gcmFuZ2U8VD4obWluOiBudW1iZXIsIC4uLm1heEFuZE9yTWFwcGVyOiBbXXxbbnVtYmVyfCgobjogbnVtYmVyKSA9PiBUKV18W251bWJlciwgKG46IG51bWJlcikgPT4gVF0pOiAobnVtYmVyfFQpW10ge1xuICBjb25zdCBtYXggPSB0eXBlb2YgbWF4QW5kT3JNYXBwZXJbMF0gPT09ICdudW1iZXInID8gbWF4QW5kT3JNYXBwZXJbMF0gOiAwO1xuICBjb25zdCBtYXBwZXIgPSB0eXBlb2YgbWF4QW5kT3JNYXBwZXJbMF0gPT09ICdmdW5jdGlvbicgPyBtYXhBbmRPck1hcHBlclswXSA6IG1heEFuZE9yTWFwcGVyWzFdO1xuICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbiAgY29uc3QgZGlmZiA9IHJlYWxNYXggLSByZWFsTWluO1xuICBjb25zdCBsaXN0ID0gQXJyYXkoZGlmZik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGlmZjsgaSsrKSBsaXN0W2ldID0gbWFwcGVyID8gbWFwcGVyKGkgKyByZWFsTWluKSA6IGkgKyByZWFsTWluO1xuICByZXR1cm4gbGlzdDtcbn1cblxuZXhwb3J0IGNvbnN0IHJhbmQgPSAobWluOiBudW1iZXIsIG1heCA9IDAsIGludCA9IHRydWUpOiBudW1iZXIgPT4ge1xuICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbiAgY29uc3QgcmFuZG9tRGlmZiA9IE1hdGgucmFuZG9tKCkgKiAocmVhbE1heCAtIHJlYWxNaW4pO1xuICByZXR1cm4gcmVhbE1pbiArIChpbnQgPyBNYXRoLmZsb29yKHJhbmRvbURpZmYpIDogcmFuZG9tRGlmZik7XG59O1xuXG5leHBvcnQgY29uc3QgZGFtcGVuID0gKG51bTogbnVtYmVyLCBieTogbnVtYmVyLCBjZW50ZXIgPSAwKTogbnVtYmVyID0+IHtcbiAgLy8gbnVtYmVyIGlzIGFscmVhZHkgYXQgdGhlIGNlbnRlclxuICBpZiAobnVtID09PSBjZW50ZXIpIHJldHVybiBjZW50ZXI7XG5cbiAgLy8gbnVtYmVyIGlzIGhpZ2hlciB0aGFuIHRoZSBjZW50ZXI7IHN1YnRyYWN0IGFuZCBkb24ndCBvdmVyc2hvb3QgdGhlIGNlbnRlclxuICBpZiAobnVtID4gY2VudGVyKSB7XG4gICAgY29uc3QgbmV3TnVtID0gbnVtIC0gYnk7XG4gICAgcmV0dXJuIG5ld051bSA8IGNlbnRlciA/IGNlbnRlciA6IG5ld051bTtcbiAgfVxuXG4gIC8vIG51bWJlciBpcyBsb3dlciB0aGFuIHRoZSBjZW50ZXI7IGFkZCBhbmQgZG9uJ3Qgb3ZlcnNob290IHRoZSBjZW50ZXJcbiAgY29uc3QgbmV3TnVtID0gbnVtICsgYnk7XG4gIHJldHVybiBuZXdOdW0gPiBjZW50ZXIgPyBjZW50ZXIgOiBuZXdOdW07XG59O1xuXG5leHBvcnQgY29uc3QgYm91bmQgPSAobnVtOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IFtyZWFsTWluLCByZWFsTWF4XSA9IG1pbiA8IG1heCA/IFttaW4sIG1heF0gOiBbbWF4LCBtaW5dO1xuICBpZiAobnVtIDwgcmVhbE1pbikgcmV0dXJuIHJlYWxNaW47XG4gIGlmIChudW0gPiByZWFsTWF4KSByZXR1cm4gcmVhbE1heDtcbiAgcmV0dXJuIG51bTtcbn07XG5cbmV4cG9ydCBjb25zdCBiZXR3ZWVuID0gKG51bTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIGluY2x1c2l2ZSA9IHRydWUpOiBib29sZWFuID0+IHtcbiAgY29uc3QgW3JlYWxNaW4sIHJlYWxNYXhdID0gbWluIDwgbWF4ID8gW21pbiwgbWF4XSA6IFttYXgsIG1pbl07XG4gIHJldHVybiBpbmNsdXNpdmUgPyAobnVtID49IHJlYWxNaW4gJiYgbnVtIDw9IHJlYWxNYXgpIDogKG51bSA+IHJlYWxNaW4gJiYgbnVtIDwgcmVhbE1heCk7XG59O1xuXG5leHBvcnQgY29uc3QgZGlmZmVyZW5jZSA9IChuOiBudW1iZXIsIG06IG51bWJlcik6IG51bWJlciA9PiBNYXRoLmFicyhuIC0gbSk7XG5cbmV4cG9ydCBjb25zdCBzYW1wbGUgPSA8VD4obGlzdDogVFtdKTogVCA9PiB7XG4gIHJldHVybiBsaXN0W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxpc3QubGVuZ3RoKV07XG59O1xuXG5leHBvcnQgY29uc3QgZGlzdGFuY2VCZXR3ZWVuID0gKG9yaWdpbjogQ29vcmRQb3NpdGlvbiwgZGVzdGluYXRpb246IENvb3JkUG9zaXRpb24pOiBudW1iZXIgPT4ge1xuICBjb25zdCBkeCA9IGRlc3RpbmF0aW9uLnggLSBvcmlnaW4ueDtcbiAgY29uc3QgZHkgPSBkZXN0aW5hdGlvbi55IC0gb3JpZ2luLnk7XG4gIHJldHVybiBNYXRoLnNxcnQoKGR4ICoqIDIpICsgKGR5ICoqIDIpKTtcbn07XG5cbmV4cG9ydCBjb25zdCByb3RhdGVQb2ludCA9IChjb29yZHM6IENvb3JkUG9zaXRpb24sIGFyb3VuZDogQ29vcmRQb3NpdGlvbiwgcmFkaWFuczogbnVtYmVyKTogQ29vcmRQb3NpdGlvbiA9PiB7XG4gIGNvbnN0IHJlbGF0aXZlID0geyB4OiBjb29yZHMueCAtIGFyb3VuZC54LCB5OiBjb29yZHMueSAtIGFyb3VuZC55IH07XG4gIGNvbnN0IGNvc2luZSA9IE1hdGguY29zKHJhZGlhbnMpO1xuICBjb25zdCBzaW5lID0gTWF0aC5zaW4ocmFkaWFucyk7XG4gIGNvbnN0IG5ld1ggPSAocmVsYXRpdmUueCAqIGNvc2luZSkgLSAocmVsYXRpdmUueSAqIHNpbmUpO1xuICBjb25zdCBuZXdZID0gKHJlbGF0aXZlLnggKiBzaW5lKSArIChyZWxhdGl2ZS55ICogY29zaW5lKTtcbiAgcmV0dXJuIHsgeDogbmV3WCArIGFyb3VuZC54LCB5OiBuZXdZICsgYXJvdW5kLnkgfTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBpc051bGxpc2godmFsdWU6IGFueSk6IHZhbHVlIGlzIE51bGxpc2gge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBOdWxsXSc7XG59XG5cbmV4cG9ydCBjb25zdCBmaWx0ZXJNYXAgPSA8VCwgSz4obGlzdDogVFtdLCBtYXBwZXI6IChpdGVtOiBULCBpbmRleDogbnVtYmVyLCBvcmlnaW5hbDogVFtdKSA9PiBLfE51bGxpc2gpOiBLW10gPT4ge1xuICByZXR1cm4gbGlzdC5yZWR1Y2UoKG1lbW8sIGl0ZW0sIGluZGV4LCBvcmlnaW5hbCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IG1hcHBlcihpdGVtLCBpbmRleCwgb3JpZ2luYWwpO1xuICAgIHJldHVybiBpc051bGxpc2gocmVzdWx0KSA/IG1lbW8gOiBbLi4ubWVtbywgcmVzdWx0XTtcbiAgfSwgW10gYXMgS1tdKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaW5kTWFwID0gPFQsIEs+KGxpc3Q6IFRbXSwgbWFwcGVyOiAoaXRlbTogVCwgaW5kZXg6IG51bWJlciwgb3JpZ2luYWw6IFRbXSkgPT4gS3xOdWxsaXNoKTogS3x1bmRlZmluZWQgPT4ge1xuICBsZXQgcmVzdWx0O1xuICBsaXN0LmZpbmQoKGl0ZW0sIGluZGV4LCBvcmlnaW5hbCkgPT4ge1xuICAgIHJlc3VsdCA9IG1hcHBlcihpdGVtLCBpbmRleCwgb3JpZ2luYWwpO1xuICAgIHJldHVybiAhaXNOdWxsaXNoKHJlc3VsdCk7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGNvbnN0IHVuaXEgPSA8VCwgUCBleHRlbmRzIGtleW9mIFQ+KGxpc3Q6IFRbXSwgbWFwcGVyOiBQfE51bGxpc2h8KChpdGVtOiBULCBpbmRleDogbnVtYmVyLCBvcmlnaW5hbDogVFtdKSA9PiBhbnkpLCBzb3J0ZWQgPSBmYWxzZSk6IFRbXSA9PiB7XG4gIGNvbnN0IG1hcHBlckZuID0gaXNOdWxsaXNoKG1hcHBlcikgfHwgdHlwZW9mIG1hcHBlciA9PT0gJ2Z1bmN0aW9uJyA/IG1hcHBlciA6IChpdGVtOiBUKSA9PiBpdGVtW21hcHBlcl07XG5cbiAgaWYgKHNvcnRlZCAmJiAhbWFwcGVyRm4pIHtcbiAgICBsZXQgbGFzdFNlZW46IFQ7XG4gICAgcmV0dXJuIGxpc3QucmVkdWNlKChtZW1vLCBpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGluZGV4ICE9PSAwICYmIGl0ZW0gPT09IGxhc3RTZWVuKSByZXR1cm4gbWVtbztcbiAgICAgIGxhc3RTZWVuID0gaXRlbTtcbiAgICAgIHJldHVybiBbLi4ubWVtbywgaXRlbV07XG4gICAgfSwgW10gYXMgVFtdKTtcbiAgfVxuXG4gIGNvbnN0IHNlZW4gPSBuZXcgU2V0KCk7XG4gIHJldHVybiBsaXN0LnJlZHVjZSgobWVtbywgaXRlbSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBrZXkgPSBtYXBwZXJGbiA/IG1hcHBlckZuKGl0ZW0sIGluZGV4LCBsaXN0KSA6IGl0ZW07XG4gICAgaWYgKHNlZW4uaGFzKGtleSkpIHJldHVybiBtZW1vO1xuICAgIHNlZW4uYWRkKGtleSk7XG4gICAgcmV0dXJuIFsuLi5tZW1vLCBpdGVtXTtcbiAgfSwgW10gYXMgVFtdKTtcbn07XG5cbmV4cG9ydCBjb25zdCByb3RhdGUgPSA8VD4oZ3JpZDogVFtdW10sIHJvdGF0aW9ucyA9IDEpOiBUW11bXSA9PiB7XG4gIGNvbnN0IHF1YWRyYW50cyA9IHJvdGF0aW9ucyAlIDQ7XG4gIHN3aXRjaCAocXVhZHJhbnRzIDwgMCA/IDQgLSBxdWFkcmFudHMgOiBxdWFkcmFudHMpIHtcbiAgICBjYXNlIDE6IHtcbiAgICAgIHJldHVybiBncmlkLnJlZHVjZSgobWVtbywgcm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgICByb3cuZm9yRWFjaCgoaXRlbSwgY29sSW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdSb3dJbmRleCA9IGNvbEluZGV4O1xuICAgICAgICAgIGNvbnN0IG5ld0NvbEluZGV4ID0gZ3JpZC5sZW5ndGggLSByb3dJbmRleCAtIDE7XG4gICAgICAgICAgbWVtb1tuZXdSb3dJbmRleF0gPSBtZW1vW25ld1Jvd0luZGV4XSB8fCBbXTtcbiAgICAgICAgICBtZW1vW25ld1Jvd0luZGV4XVtuZXdDb2xJbmRleF0gPSBpdGVtO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lbW87XG4gICAgICB9LCBbXSBhcyBUW11bXSk7XG4gICAgfVxuICAgIGNhc2UgMjogcmV0dXJuIFsuLi5ncmlkXS5yZXZlcnNlKCkubWFwKHJvdyA9PiBbLi4ucm93XS5yZXZlcnNlKCkpO1xuICAgIGNhc2UgMzoge1xuICAgICAgcmV0dXJuIGdyaWQucmVkdWNlKChtZW1vLCByb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICAgIHJvdy5mb3JFYWNoKChpdGVtLCBjb2xJbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5ld1Jvd0luZGV4ID0gcm93Lmxlbmd0aCAtIGNvbEluZGV4IC0gMTtcbiAgICAgICAgICBjb25zdCBuZXdDb2xJbmRleCA9IHJvd0luZGV4O1xuICAgICAgICAgIG1lbW9bbmV3Um93SW5kZXhdID0gbWVtb1tuZXdSb3dJbmRleF0gfHwgW107XG4gICAgICAgICAgbWVtb1tuZXdSb3dJbmRleF1bbmV3Q29sSW5kZXhdID0gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtZW1vO1xuICAgICAgfSwgW10gYXMgVFtdW10pO1xuICAgIH1cbiAgICBkZWZhdWx0OiByZXR1cm4gZ3JpZC5tYXAocm93ID0+IFsuLi5yb3ddKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHJvdGF0ZUdyaWRQb3NpdGlvbiA9ICh7IHJvdywgY29sIH06IEdyaWRQb3NpdGlvbiwgcm93czogbnVtYmVyLCBjb2xzOiBudW1iZXIsIHJvdGF0aW9uczogbnVtYmVyKTogR3JpZFBvc2l0aW9uID0+IHtcbiAgY29uc3QgcXVhZHJhbnRzID0gcm90YXRpb25zICUgNDtcbiAgc3dpdGNoIChxdWFkcmFudHMgPCAwID8gNCAtIHF1YWRyYW50cyA6IHF1YWRyYW50cykge1xuICAgIGNhc2UgMTogcmV0dXJuIHsgcm93OiBjb2wsIGNvbDogcm93cyAtIHJvdyAtIDEgfTtcbiAgICBjYXNlIDI6IHJldHVybiB7IHJvdzogcm93cyAtIHJvdyAtIDEsIGNvbDogY29scyAtIGNvbCAtIDEgfTtcbiAgICBjYXNlIDM6IHJldHVybiB7IHJvdzogY29scyAtIGNvbCAtIDEsIGNvbDogcm93IH07XG4gICAgZGVmYXVsdDogcmV0dXJuIHsgcm93LCBjb2wgfTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHR1cGxlID0gPFQgZXh0ZW5kcyBMaXRlcmFsPiguLi5saXN0OiBUW10pOiBUW10gPT4gbGlzdDtcbiIsImltcG9ydCB7IE5lZWQgfSBmcm9tIFwiLi90eXBlcy9jb21tb25cIjtcblxuY29uc3QgTVVOREFORV9WQVJJQU5UID0gJ211bmRhbmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaWxlIHtcbiAgcHVibGljIHR5cGU6IHN0cmluZztcbiAgcHVibGljIHZhbHVlOiBudW1iZXI7XG4gIHB1YmxpYyBfdmFyaWFudCE6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcih7IHR5cGUsIHZhbHVlLCB2YXJpYW50IH06IE5lZWQ8VGlsZSwgJ3R5cGUnPikge1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlIHx8IDE7XG4gICAgdGhpcy5fdmFyaWFudCA9IHZhcmlhbnQgfHwgTVVOREFORV9WQVJJQU5UO1xuICB9XG5cbiAgc2V0IHZhcmlhbnQodmFyaWFudDogc3RyaW5nKSB7IHRoaXMuX3ZhcmlhbnQgPSB2YXJpYW50IHx8IE1VTkRBTkVfVkFSSUFOVCB9XG4gIGdldCB2YXJpYW50KCk6IHN0cmluZyB7IHJldHVybiB0aGlzLl92YXJpYW50IHx8IE1VTkRBTkVfVkFSSUFOVCB9XG5cbiAgZ2V0IGlzTXVuZGFuZSgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMudmFyaWFudCA9PT0gTVVOREFORV9WQVJJQU5UIH1cbn1cbiIsImltcG9ydCBUaWxlIGZyb20gXCIuL1RpbGVcIjtcbmltcG9ydCB7IHJhbmdlLCBzYW1wbGUsIHJvdGF0ZSwgcmFuZCB9IGZyb20gXCIuL2NvbmNlcm5zL3V0aWxpdGllc1wiO1xuaW1wb3J0IHsgTmVlZCB9IGZyb20gXCIuL3R5cGVzL2NvbW1vblwiO1xuXG5leHBvcnQgdHlwZSBUaWxlR2VuZXJhdG9yPFRpbGVDbGFzcyBleHRlbmRzIFRpbGU+ID0gKG9wdHM6IFBpY2s8VGlsZUNsYXNzLCAndmFyaWFudCc+KSA9PiBUaWxlQ2xhc3M7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTXVuZGFuZVRpbGVEZWY8VGlsZUNsYXNzIGV4dGVuZHMgVGlsZT4ge1xuICBnZW5lcmF0b3I6IFRpbGVHZW5lcmF0b3I8VGlsZUNsYXNzPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTcGVjaWFsVGlsZURlZjxUaWxlQ2xhc3MgZXh0ZW5kcyBUaWxlPiB7XG4gIGdlbmVyYXRvcjogVGlsZUdlbmVyYXRvcjxUaWxlQ2xhc3M+O1xufVxuXG5leHBvcnQgdHlwZSBUaWxlRGVmPFRpbGVDbGFzcyBleHRlbmRzIFRpbGU+ID0gTXVuZGFuZVRpbGVEZWY8VGlsZUNsYXNzPiB8IFNwZWNpYWxUaWxlRGVmPFRpbGVDbGFzcz47XG5cbmV4cG9ydCBpbnRlcmZhY2UgTXVuZGFuZVRpbGVEZWZzPFRpbGVDbGFzcyBleHRlbmRzIFRpbGU+IHtcbiAgW3R5cGU6IHN0cmluZ106IE11bmRhbmVUaWxlRGVmPFRpbGVDbGFzcz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3BlY2lhbFRpbGVEZWZzPFRpbGVDbGFzcyBleHRlbmRzIFRpbGU+IHtcbiAgW3R5cGU6IHN0cmluZ106IE11bmRhbmVUaWxlRGVmPFRpbGVDbGFzcz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGlsZURlZnM8VGlsZUNsYXNzIGV4dGVuZHMgVGlsZT4ge1xuICBbdHlwZTogc3RyaW5nXTogVGlsZURlZjxUaWxlQ2xhc3M+O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb2FyZDxUaWxlQ2xhc3MgZXh0ZW5kcyBUaWxlID0gVGlsZT4ge1xuICBwdWJsaWMgcm93Q291bnQgPSA5O1xuICBwdWJsaWMgY29sQ291bnQgPSA5O1xuICBwdWJsaWMgdGlsZUNsYXNzID0gVGlsZTtcbiAgcHVibGljIHRpbGVEZWZzOiBUaWxlRGVmczxUaWxlQ2xhc3M+O1xuICBwdWJsaWMgb25UaWxlTWF0Y2hlZD86ICh0aWxlOiBUaWxlQ2xhc3MpID0+IHZvaWQ7XG4gIHByaXZhdGUgX3Jvd3M/OiBUaWxlQ2xhc3NbXVtdO1xuXG4gIGNvbnN0cnVjdG9yKG9wdHM6IE5lZWQ8Qm9hcmQ8VGlsZUNsYXNzPiwgJ3RpbGVEZWZzJz4pIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIG9wdHMpO1xuICAgIHRoaXMudGlsZURlZnMgPSBvcHRzLnRpbGVEZWZzO1xuICB9XG5cbiAgZ2V0IHJvd3MoKTogVGlsZUNsYXNzW11bXSB7XG4gICAgdGhpcy5fcm93cyA9IHRoaXMuX3Jvd3MgfHwgdGhpcy5uZXdSb3dzKCk7XG4gICAgcmV0dXJuIHRoaXMuX3Jvd3M7XG4gIH1cblxuICBzZXQgcm93cyhyb3dzOiBUaWxlQ2xhc3NbXVtdKSB7XG4gICAgdGhpcy5fcm93cyA9IHJvd3M7XG4gIH1cblxuICBnZXQgdGlsZXMoKTogVGlsZUNsYXNzW10ge1xuICAgIHJldHVybiB0aGlzLnJvd3MucmVkdWNlKCh0aWxlcywgcm93KSA9PiBbLi4udGlsZXMsIC4uLnJvd10sIFtdKTtcbiAgfVxuXG4gIGdldCB0aWxlVHlwZXMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnRpbGVEZWZzKTtcbiAgfVxuXG4gIG5ld011bmRhbmVUaWxlKCk6IFRpbGVDbGFzcyB7XG4gICAgY29uc3QgdGlsZVR5cGUgPSBzYW1wbGUodGhpcy50aWxlVHlwZXMpO1xuICAgIGNvbnN0IHRpbGVEZWYgPSB0aGlzLnRpbGVEZWZzW3RpbGVUeXBlXTtcbiAgICByZXR1cm4gdGlsZURlZi5nZW5lcmF0b3IoeyB2YXJpYW50OiAnbXVuZGFuZScgfSk7XG4gIH1cblxuICBuZXdSb3dzKCk6IFRpbGVDbGFzc1tdW10ge1xuICAgIHJldHVybiByYW5nZSh0aGlzLnJvd0NvdW50LCAoKSA9PiAocmFuZ2UodGhpcy5jb2xDb3VudCwgKCkgPT4gdGhpcy5uZXdNdW5kYW5lVGlsZSgpKSkpO1xuICB9XG5cbiAgc2h1ZmZsZSgpOiB2b2lkIHtcbiAgICBjb25zdCByb3dDb3VudCA9IHRoaXMucm93cy5sZW5ndGg7XG4gICAgdGhpcy5yb3dzLmZvckVhY2goKHJvdywgcm93SW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGNvbENvdW50ID0gcm93Lmxlbmd0aDtcbiAgICAgIHJvdy5mb3JFYWNoKCh0aWxlLCBjb2xJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdSb3dJbmRleCA9IHJhbmQocm93Q291bnQpO1xuICAgICAgICBjb25zdCBuZXdDb2xJbmRleCA9IHJhbmQoY29sQ291bnQpO1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMucm93c1tuZXdSb3dJbmRleF1bbmV3Q29sSW5kZXhdO1xuICAgICAgICB0aGlzLnJvd3NbbmV3Um93SW5kZXhdW25ld0NvbEluZGV4XSA9IHRpbGU7XG4gICAgICAgIHRoaXMucm93c1tyb3dJbmRleF1bY29sSW5kZXhdID0gZXhpc3Rpbmc7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiY29uc3QgZ2FtZUxvb3AgPSAoYzogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBkcmF3OiAobG9vcENvdW50OiBudW1iZXIpID0+IHZvaWQsIGxvb3BDb3VudCA9IDApOiB2b2lkID0+IHtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IGdhbWVMb29wKGMsIGRyYXcsIGxvb3BDb3VudCArIDEpKTtcbiAgYy5jbGVhclJlY3QoMCwgMCwgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gIGRyYXcobG9vcENvdW50KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWVMb29wO1xuIiwiY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cbmNvbnN0IHN0cmV0Y2hDYW52YXMgPSAoKTogdm9pZCA9PiB7XG4gIGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xufTtcblxuc3RyZXRjaENhbnZhcygpO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHN0cmV0Y2hDYW52YXMpO1xuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG5jb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSE7XG5pZiAoIWN0eCkgY29uc29sZS5lcnJvcihcIkNhbnZhcyAnMmQnIGNvbnRleHQgaXMgbm90IHN1cHBvcnRlZC5cIik7XG5cbmV4cG9ydCB7IGN0eCB9O1xuZXhwb3J0IGRlZmF1bHQgY2FudmFzO1xuIiwiaW1wb3J0IHsgQ29vcmRQb3NpdGlvbiB9IGZyb20gXCIuLi90eXBlcy9jb21tb25cIjtcbmltcG9ydCB7IHJvdGF0ZVBvaW50IH0gZnJvbSBcIi4vdXRpbGl0aWVzXCI7XG5cbmV4cG9ydCBjb25zdCBkcmF3QXJyb3cgPSAoXG4gIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICBkaXI6ICd1cCd8J2Rvd24nfCdsZWZ0J3wncmlnaHQnLFxuICBmaWxsU3R5bGU6IHN0cmluZyxcbiAgc3Ryb2tlU3R5bGU6IHN0cmluZyxcbiAgY2VudGVyOiBDb29yZFBvc2l0aW9uLFxuICB3aWR0aDogbnVtYmVyLFxuICBsZW5ndGg6IG51bWJlclxuKTogdm9pZCA9PiB7XG4gIGNvbnN0IGhlYWRXaWR0aCA9IHdpZHRoICogMjtcbiAgY29uc3QgaGVhZExlbmd0aCA9IDAuNzUgKiBoZWFkV2lkdGg7XG4gIGNvbnN0IHRhaWxXaWR0aCA9IHdpZHRoO1xuICBjb25zdCB0YWlsTGVuZ3RoID0gbGVuZ3RoIC0gaGVhZExlbmd0aDtcbiAgLy8gY29uc3QgdGFpbEJvdHRvbSA9IGNlbnRlci55ICsgKHRhaWxXaWR0aCAvIDIpOyAvLyBsaWtlIGFmZml4aW5nIGl0IHdpdGggYSBuYWlsIHNvIHRoYXQgaXQncyBjZW50ZXJlZCBzZW1pLXNxdWFyZSB3aXRoIHRoZSBlbmRcbiAgY29uc3QgdGFpbEJvdHRvbSA9IGNlbnRlci55ICsgKHRhaWxMZW5ndGggLyAyKSArIChoZWFkTGVuZ3RoIC8gMik7XG4gIGNvbnN0IHRhaWxUb3AgPSB0YWlsQm90dG9tIC0gdGFpbExlbmd0aDtcbiAgY29uc3QgdGFpbExlZnQgPSBjZW50ZXIueCAtICh0YWlsV2lkdGggLyAyKTtcbiAgY29uc3QgdGFpbFJpZ2h0ID0gY2VudGVyLnggKyAodGFpbFdpZHRoIC8gMik7XG4gIGNvbnN0IGhlYWRCb3R0b20gPSB0YWlsVG9wO1xuICBjb25zdCBoZWFkVG9wID0gaGVhZEJvdHRvbSAtIGhlYWRMZW5ndGg7XG4gIGNvbnN0IGhlYWRMZWZ0ID0gY2VudGVyLnggLSAoaGVhZFdpZHRoIC8gMik7XG4gIGNvbnN0IGhlYWRSaWdodCA9IGNlbnRlci54ICsgKGhlYWRXaWR0aCAvIDIpO1xuXG4gIGNvbnN0IGFuZ2xlID0ge1xuICAgIHVwOiAwLFxuICAgIHJpZ2h0OiAwLjUgKiBNYXRoLlBJLFxuICAgIGRvd246IE1hdGguUEksXG4gICAgbGVmdDogMS41ICogTWF0aC5QSSxcbiAgfVtkaXJdO1xuXG4gIGNvbnN0IHBvaW50cyA9IFtcbiAgICB7IHg6IHRhaWxMZWZ0LCB5OiB0YWlsVG9wIH0sXG4gICAgeyB4OiB0YWlsTGVmdCwgeTogdGFpbEJvdHRvbSB9LFxuICAgIHsgeDogdGFpbFJpZ2h0LCB5OiB0YWlsQm90dG9tIH0sXG4gICAgeyB4OiB0YWlsUmlnaHQsIHk6IHRhaWxUb3AgfSxcbiAgICB7IHg6IGhlYWRSaWdodCwgeTogaGVhZEJvdHRvbSB9LFxuICAgIHsgeDogY2VudGVyLngsIHk6IGhlYWRUb3AgfSxcbiAgICB7IHg6IGhlYWRMZWZ0LCB5OiBoZWFkQm90dG9tIH0sXG4gIF07XG5cbiAgY29uc3Qgcm90YXRlZFBvaW50cyA9IGFuZ2xlID8gcG9pbnRzLm1hcChwdCA9PiByb3RhdGVQb2ludChwdCwgY2VudGVyLCBhbmdsZSkpIDogcG9pbnRzO1xuXG4gIGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XG4gIGN0eC5zdHJva2VTdHlsZSA9IHN0cm9rZVN0eWxlO1xuICBjdHguYmVnaW5QYXRoKCk7XG4gIGNvbnN0IHN0YXJ0UG9pbnQgPSByb3RhdGVkUG9pbnRzWzBdO1xuICBjdHgubW92ZVRvKHN0YXJ0UG9pbnQueCwgc3RhcnRQb2ludC55KTtcbiAgcm90YXRlZFBvaW50cy5mb3JFYWNoKCh7IHgsIHkgfSkgPT4gY3R4LmxpbmVUbyh4LCB5KSk7XG4gIGN0eC5saW5lVG8oc3RhcnRQb2ludC54LCBzdGFydFBvaW50LnkpO1xuICBjdHguY2xvc2VQYXRoKCk7XG4gIGN0eC5maWxsKCk7XG4gIGlmIChzdHJva2VTdHlsZSkgY3R4LnN0cm9rZSgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGRyYXdEb3VibGVBcnJvdyA9IChcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gIGRpcjogJ2hvcml6b250YWwnfCd2ZXJ0aWNhbCcsXG4gIGZpbGxTdHlsZTogc3RyaW5nLFxuICBzdHJva2VTdHlsZTogc3RyaW5nLFxuICBjZW50ZXI6IENvb3JkUG9zaXRpb24sXG4gIHdpZHRoOiBudW1iZXIsXG4gIGxlbmd0aDogbnVtYmVyXG4pOiB2b2lkID0+IHtcbiAgY29uc3QgaGVhZFdpZHRoID0gd2lkdGggKiAyO1xuICBjb25zdCBoZWFkTGVuZ3RoID0gMC43NSAqIGhlYWRXaWR0aDtcbiAgY29uc3QgdGFpbFdpZHRoID0gd2lkdGg7XG4gIGNvbnN0IHRhaWxMZW5ndGggPSBsZW5ndGggLSAoaGVhZExlbmd0aCAqIDIpO1xuICBjb25zdCB0YWlsQm90dG9tID0gY2VudGVyLnkgKyAodGFpbExlbmd0aCAvIDIpO1xuICBjb25zdCB0YWlsVG9wID0gdGFpbEJvdHRvbSAtIHRhaWxMZW5ndGg7XG4gIGNvbnN0IHRhaWxMZWZ0ID0gY2VudGVyLnggLSAodGFpbFdpZHRoIC8gMik7XG4gIGNvbnN0IHRhaWxSaWdodCA9IGNlbnRlci54ICsgKHRhaWxXaWR0aCAvIDIpO1xuICBjb25zdCBoZWFkTGVmdCA9IGNlbnRlci54IC0gKGhlYWRXaWR0aCAvIDIpO1xuICBjb25zdCBoZWFkUmlnaHQgPSBjZW50ZXIueCArIChoZWFkV2lkdGggLyAyKTtcbiAgY29uc3QgdG9wSGVhZEJhc2UgPSB0YWlsVG9wO1xuICBjb25zdCB0b3BIZWFkVGlwID0gdG9wSGVhZEJhc2UgLSBoZWFkTGVuZ3RoO1xuICBjb25zdCBib3R0b21IZWFkQmFzZSA9IHRhaWxCb3R0b207XG4gIGNvbnN0IGJvdHRvbUhlYWRUaXAgPSBib3R0b21IZWFkQmFzZSArIGhlYWRMZW5ndGg7XG5cbiAgY29uc3QgYW5nbGUgPSB7XG4gICAgdmVydGljYWw6IDAsXG4gICAgaG9yaXpvbnRhbDogMC41ICogTWF0aC5QSSxcbiAgfVtkaXJdO1xuXG4gIGNvbnN0IHBvaW50cyA9IFtcbiAgICB7IHg6IHRhaWxMZWZ0LCB5OiB0YWlsVG9wIH0sXG4gICAgeyB4OiB0YWlsTGVmdCwgeTogdGFpbEJvdHRvbSB9LFxuICAgIHsgeDogaGVhZExlZnQsIHk6IGJvdHRvbUhlYWRCYXNlIH0sXG4gICAgeyB4OiBjZW50ZXIueCwgeTogYm90dG9tSGVhZFRpcCB9LFxuICAgIHsgeDogaGVhZFJpZ2h0LCB5OiBib3R0b21IZWFkQmFzZSB9LFxuICAgIHsgeDogdGFpbFJpZ2h0LCB5OiB0YWlsQm90dG9tIH0sXG4gICAgeyB4OiB0YWlsUmlnaHQsIHk6IHRhaWxUb3AgfSxcbiAgICB7IHg6IGhlYWRSaWdodCwgeTogdG9wSGVhZEJhc2UgfSxcbiAgICB7IHg6IGNlbnRlci54LCB5OiB0b3BIZWFkVGlwIH0sXG4gICAgeyB4OiBoZWFkTGVmdCwgeTogdG9wSGVhZEJhc2UgfSxcbiAgXTtcblxuICBjb25zdCByb3RhdGVkUG9pbnRzID0gYW5nbGUgPyBwb2ludHMubWFwKHB0ID0+IHJvdGF0ZVBvaW50KHB0LCBjZW50ZXIsIGFuZ2xlKSkgOiBwb2ludHM7XG5cbiAgY3R4LmZpbGxTdHlsZSA9IGZpbGxTdHlsZTtcbiAgY3R4LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3R5bGU7XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY29uc3Qgc3RhcnRQb2ludCA9IHJvdGF0ZWRQb2ludHNbMF07XG4gIGN0eC5tb3ZlVG8oc3RhcnRQb2ludC54LCBzdGFydFBvaW50LnkpO1xuICByb3RhdGVkUG9pbnRzLmZvckVhY2goKHsgeCwgeSB9KSA9PiBjdHgubGluZVRvKHgsIHkpKTtcbiAgY3R4LmxpbmVUbyhzdGFydFBvaW50LngsIHN0YXJ0UG9pbnQueSk7XG4gIGN0eC5jbG9zZVBhdGgoKTtcbiAgY3R4LmZpbGwoKTtcbiAgaWYgKHN0cm9rZVN0eWxlKSBjdHguc3Ryb2tlKCk7XG59O1xuXG5leHBvcnQgY29uc3QgZHJhd0Nyb3NzQXJyb3cgPSAoXG4gIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICBmaWxsU3R5bGU6IHN0cmluZyxcbiAgc3Ryb2tlU3R5bGU6IHN0cmluZyxcbiAgY2VudGVyOiBDb29yZFBvc2l0aW9uLFxuICB3aWR0aDogbnVtYmVyLFxuICBsZW5ndGg6IG51bWJlclxuKTogdm9pZCA9PiB7XG4gIGNvbnN0IGhlYWRXaWR0aCA9IHdpZHRoICogMjtcbiAgY29uc3QgaGVhZExlbmd0aCA9IDAuNzUgKiBoZWFkV2lkdGg7XG4gIGNvbnN0IHRhaWxXaWR0aCA9IHdpZHRoO1xuICBjb25zdCB0YWlsSW50ZXJzZWN0aW9uV2lkdGggPSB0YWlsV2lkdGg7XG4gIGNvbnN0IHRhaWxJbnRlcnNlY3Rpb25IZWlnaHQgPSB0YWlsSW50ZXJzZWN0aW9uV2lkdGg7XG4gIGNvbnN0IHRhaWxMZW5ndGggPSBsZW5ndGggLSAoaGVhZExlbmd0aCAqIDIpIC0gdGFpbEludGVyc2VjdGlvbldpZHRoO1xuXG4gIGNvbnN0IG5vcnRoVGFpbEJhc2UgPSBjZW50ZXIueSAtICh0YWlsSW50ZXJzZWN0aW9uSGVpZ2h0IC8gMik7XG4gIGNvbnN0IG5vcnRoVGFpbFRpcCA9IG5vcnRoVGFpbEJhc2UgLSB0YWlsTGVuZ3RoO1xuICBjb25zdCBzb3V0aFRhaWxCYXNlID0gY2VudGVyLnkgKyAodGFpbEludGVyc2VjdGlvbkhlaWdodCAvIDIpO1xuICBjb25zdCBzb3V0aFRhaWxUaXAgPSBzb3V0aFRhaWxCYXNlICsgdGFpbExlbmd0aDtcbiAgY29uc3Qgd2VzdFRhaWxCYXNlID0gY2VudGVyLnggLSAodGFpbEludGVyc2VjdGlvbldpZHRoIC8gMik7XG4gIGNvbnN0IHdlc3RUYWlsVGlwID0gd2VzdFRhaWxCYXNlIC0gdGFpbExlbmd0aDtcbiAgY29uc3QgZWFzdFRhaWxCYXNlID0gY2VudGVyLnggKyAodGFpbEludGVyc2VjdGlvbldpZHRoIC8gMik7XG4gIGNvbnN0IGVhc3RUYWlsVGlwID0gZWFzdFRhaWxCYXNlICsgdGFpbExlbmd0aDtcblxuICBjb25zdCBub3J0aEhlYWRCYXNlID0gbm9ydGhUYWlsVGlwO1xuICBjb25zdCBub3J0aEhlYWRUaXAgPSBub3J0aEhlYWRCYXNlIC0gaGVhZExlbmd0aDtcbiAgY29uc3Qgc291dGhIZWFkQmFzZSA9IHNvdXRoVGFpbFRpcDtcbiAgY29uc3Qgc291dGhIZWFkVGlwID0gc291dGhIZWFkQmFzZSArIGhlYWRMZW5ndGg7XG4gIGNvbnN0IHdlc3RIZWFkQmFzZSA9IHdlc3RUYWlsVGlwO1xuICBjb25zdCB3ZXN0SGVhZFRpcCA9IHdlc3RIZWFkQmFzZSAtIGhlYWRMZW5ndGg7XG4gIGNvbnN0IGVhc3RIZWFkQmFzZSA9IGVhc3RUYWlsVGlwO1xuICBjb25zdCBlYXN0SGVhZFRpcCA9IGVhc3RIZWFkQmFzZSArIGhlYWRMZW5ndGg7XG5cbiAgY29uc3QgaG9yaXpvbnRhbFRhaWxUb3AgPSBub3J0aFRhaWxCYXNlO1xuICBjb25zdCBob3Jpem9udGFsVGFpbEJvdHRvbSA9IHNvdXRoVGFpbEJhc2U7XG4gIGNvbnN0IHZlcnRpY2FsVGFpbExlZnQgPSB3ZXN0VGFpbEJhc2U7XG4gIGNvbnN0IHZlcnRpY2FsVGFpbFJpZ2h0ID0gZWFzdFRhaWxCYXNlO1xuICBjb25zdCBob3Jpem9udGFsSGVhZFRvcCA9IGNlbnRlci55IC0gKGhlYWRXaWR0aCAvIDIpO1xuICBjb25zdCBob3Jpem9udGFsSGVhZEJvdHRvbSA9IGNlbnRlci55ICsgKGhlYWRXaWR0aCAvIDIpO1xuICBjb25zdCB2ZXJ0aWNhbEhlYWRMZWZ0ID0gY2VudGVyLnggLSAoaGVhZFdpZHRoIC8gMik7XG4gIGNvbnN0IHZlcnRpY2FsSGVhZFJpZ2h0ID0gY2VudGVyLnggKyAoaGVhZFdpZHRoIC8gMik7XG5cbiAgY29uc3QgcG9pbnRzID0gW1xuICAgIHsgeDogdmVydGljYWxUYWlsTGVmdCwgeTogbm9ydGhUYWlsVGlwIH0sXG4gICAgeyB4OiB2ZXJ0aWNhbFRhaWxMZWZ0LCB5OiBub3J0aFRhaWxCYXNlIH0sXG4gICAgeyB4OiB3ZXN0VGFpbFRpcCwgeTogaG9yaXpvbnRhbFRhaWxUb3AgfSxcblxuICAgIHsgeDogd2VzdEhlYWRCYXNlLCB5OiBob3Jpem9udGFsSGVhZFRvcCB9LFxuICAgIHsgeDogd2VzdEhlYWRUaXAsIHk6IGNlbnRlci55IH0sXG4gICAgeyB4OiB3ZXN0SGVhZEJhc2UsIHk6IGhvcml6b250YWxIZWFkQm90dG9tIH0sXG5cbiAgICB7IHg6IHdlc3RUYWlsVGlwLCB5OiBob3Jpem9udGFsVGFpbEJvdHRvbSB9LFxuICAgIHsgeDogd2VzdFRhaWxCYXNlLCB5OiBob3Jpem9udGFsVGFpbEJvdHRvbSB9LFxuICAgIHsgeDogdmVydGljYWxUYWlsTGVmdCwgeTogc291dGhUYWlsVGlwIH0sXG5cbiAgICB7IHg6IHZlcnRpY2FsSGVhZExlZnQsIHk6IHNvdXRoSGVhZEJhc2UgfSxcbiAgICB7IHg6IGNlbnRlci54LCB5OiBzb3V0aEhlYWRUaXAgfSxcbiAgICB7IHg6IHZlcnRpY2FsSGVhZFJpZ2h0LCB5OiBzb3V0aEhlYWRCYXNlIH0sXG5cbiAgICB7IHg6IHZlcnRpY2FsVGFpbFJpZ2h0LCB5OiBzb3V0aFRhaWxUaXAgfSxcbiAgICB7IHg6IHZlcnRpY2FsVGFpbFJpZ2h0LCB5OiBzb3V0aFRhaWxCYXNlIH0sXG4gICAgeyB4OiBlYXN0VGFpbFRpcCwgeTogaG9yaXpvbnRhbFRhaWxCb3R0b20gfSxcblxuICAgIHsgeDogZWFzdEhlYWRCYXNlLCB5OiBob3Jpem9udGFsSGVhZEJvdHRvbSB9LFxuICAgIHsgeDogZWFzdEhlYWRUaXAsIHk6IGNlbnRlci55IH0sXG4gICAgeyB4OiBlYXN0SGVhZEJhc2UsIHk6IGhvcml6b250YWxIZWFkVG9wIH0sXG5cbiAgICB7IHg6IGVhc3RUYWlsVGlwLCB5OiBob3Jpem9udGFsVGFpbFRvcCB9LFxuICAgIHsgeDogZWFzdFRhaWxCYXNlLCB5OiBob3Jpem9udGFsVGFpbFRvcCB9LFxuICAgIHsgeDogdmVydGljYWxUYWlsUmlnaHQsIHk6IG5vcnRoVGFpbFRpcCB9LFxuXG4gICAgeyB4OiB2ZXJ0aWNhbEhlYWRSaWdodCwgeTogbm9ydGhIZWFkQmFzZSB9LFxuICAgIHsgeDogY2VudGVyLngsIHk6IG5vcnRoSGVhZFRpcCB9LFxuICAgIHsgeDogdmVydGljYWxIZWFkTGVmdCwgeTogbm9ydGhIZWFkQmFzZSB9LFxuICBdO1xuXG4gIGN0eC5maWxsU3R5bGUgPSBmaWxsU3R5bGU7XG4gIGN0eC5zdHJva2VTdHlsZSA9IHN0cm9rZVN0eWxlO1xuICBjdHguYmVnaW5QYXRoKCk7XG4gIGNvbnN0IHN0YXJ0UG9pbnQgPSBwb2ludHNbMF07XG4gIGN0eC5tb3ZlVG8oc3RhcnRQb2ludC54LCBzdGFydFBvaW50LnkpO1xuICBwb2ludHMuZm9yRWFjaCgoeyB4LCB5IH0pID0+IGN0eC5saW5lVG8oeCwgeSkpO1xuICBjdHgubGluZVRvKHN0YXJ0UG9pbnQueCwgc3RhcnRQb2ludC55KTtcbiAgY3R4LmNsb3NlUGF0aCgpO1xuICBjdHguZmlsbCgpO1xuICBpZiAoc3Ryb2tlU3R5bGUpIGN0eC5zdHJva2UoKTtcbn07XG4iLCJpbXBvcnQgVGlsZSBmcm9tIFwiLi4vVGlsZVwiO1xuaW1wb3J0IHsgTmVlZCwgQ29vcmRQb3NpdGlvbiB9IGZyb20gXCIuLi90eXBlcy9jb21tb25cIjtcbmltcG9ydCB7IGRyYXdEb3VibGVBcnJvdywgZHJhd0Fycm93LCBkcmF3Q3Jvc3NBcnJvdyB9IGZyb20gXCIuLi9jb25jZXJucy9kcmF3aW5nXCI7XG5cbmNvbnN0IE1BWF9DT0xPUl9JTlQgPSBwYXJzZUludChcIkZGRkZGRlwiLCAxNik7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhc1RpbGUgZXh0ZW5kcyBUaWxlIHtcbiAgcHVibGljIHdpZHRoID0gNTA7XG4gIHB1YmxpYyBoZWlnaHQgPSA1MDtcbiAgcHVibGljIGNvbG9yID0gJ3doaXRlJztcbiAgcHVibGljIHNlbGVjdGVkID0gZmFsc2U7XG4gIHB1YmxpYyB0YXJnZXRlZCA9IGZhbHNlO1xuICBwdWJsaWMgbWF0Y2hlZEF0ID0gbnVsbCBhcyBEYXRlfG51bGw7XG4gIHB1YmxpYyBibGFuayA9IGZhbHNlO1xuICBwdWJsaWMgbWF0Y2hBbmltYXRpb25NcyA9IDI1MDtcbiAgcHVibGljIGFwcGx5Tm9ybWFsU3R5bGU6IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgdGlsZTogQ2FudmFzVGlsZSwgcG9zOiBDb29yZFBvc2l0aW9uKSA9PiB2b2lkO1xuICBwdWJsaWMgYXBwbHlTZWxlY3RlZFN0eWxlOiAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHRpbGU6IENhbnZhc1RpbGUsIHBvczogQ29vcmRQb3NpdGlvbikgPT4gdm9pZDtcbiAgcHVibGljIGFwcGx5VGFyZ2V0ZWRTdHlsZTogKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB0aWxlOiBDYW52YXNUaWxlLCBwb3M6IENvb3JkUG9zaXRpb24pID0+IHZvaWQ7XG4gIHB1YmxpYyBhcHBseU1hdGNoZWRTdHlsZTogKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB0aWxlOiBDYW52YXNUaWxlLCBwb3M6IENvb3JkUG9zaXRpb24pID0+IHZvaWQ7XG4gIHByaXZhdGUgX2ltZ1VybCA9ICcnO1xuICBwcml2YXRlIF9pbWFnZT86IEhUTUxJbWFnZUVsZW1lbnQ7XG4gIHByaXZhdGUgYmxhbmtUaW1lb3V0PzogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKG9wdHM6IE5lZWQ8Q2FudmFzVGlsZSwgJ3R5cGUnPikge1xuICAgIHN1cGVyKG9wdHMpO1xuXG4gICAgdGhpcy53aWR0aCA9IG9wdHMud2lkdGggfHwgdGhpcy53aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IG9wdHMuaGVpZ2h0IHx8IHRoaXMuaGVpZ2h0O1xuICAgIHRoaXMuY29sb3IgPSBvcHRzLmNvbG9yIHx8IHRoaXMuY29sb3I7XG4gICAgdGhpcy5ibGFuayA9IG9wdHMuYmxhbmsgfHwgdGhpcy5ibGFuaztcbiAgICB0aGlzLm1hdGNoQW5pbWF0aW9uTXMgPSBvcHRzLm1hdGNoQW5pbWF0aW9uTXMgfHwgdGhpcy5tYXRjaEFuaW1hdGlvbk1zO1xuICAgIHRoaXMuX2ltZ1VybCA9IG9wdHMuaW1nVXJsIHx8IHRoaXMuX2ltZ1VybDtcbiAgICB0aGlzLmFwcGx5Tm9ybWFsU3R5bGUgPSBvcHRzLmFwcGx5Tm9ybWFsU3R5bGUgfHwgdGhpcy5kZWZhdWx0QXBwbHlOb3JtYWxTdHlsZTtcbiAgICB0aGlzLmFwcGx5U2VsZWN0ZWRTdHlsZSA9IG9wdHMuYXBwbHlTZWxlY3RlZFN0eWxlIHx8IHRoaXMuZGVmYXVsdEFwcGx5U2VsZWN0ZWRTdHlsZTtcbiAgICB0aGlzLmFwcGx5VGFyZ2V0ZWRTdHlsZSA9IG9wdHMuYXBwbHlUYXJnZXRlZFN0eWxlIHx8IHRoaXMuZGVmYXVsdEFwcGx5VGFyZ2V0ZWRTdHlsZTtcbiAgICB0aGlzLmFwcGx5TWF0Y2hlZFN0eWxlID0gb3B0cy5hcHBseU1hdGNoZWRTdHlsZSB8fCB0aGlzLmRlZmF1bHRBcHBseU1hdGNoZWRTdHlsZTtcbiAgfVxuXG4gIGdldCBtYXRjaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMubWF0Y2hlZEF0O1xuICB9XG5cbiAgc2V0IG1hdGNoZWQobWF0Y2hlZDogYm9vbGVhbikge1xuICAgIGlmIChtYXRjaGVkICYmIHRoaXMubWF0Y2hlZEF0KSByZXR1cm47XG5cbiAgICBjbGVhclRpbWVvdXQodGhpcy5ibGFua1RpbWVvdXQpO1xuICAgIGlmIChtYXRjaGVkKSB7XG4gICAgICB0aGlzLm1hdGNoZWRBdCA9IG5ldyBEYXRlKCk7XG4gICAgICB0aGlzLmJsYW5rVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuYmxhbmsgPSB0cnVlLCB0aGlzLm1hdGNoQW5pbWF0aW9uTXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hdGNoZWRBdCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGltZ1VybCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9pbWdVcmw7XG4gIH1cblxuICBzZXQgaW1nVXJsKGltZ1VybDogc3RyaW5nKSB7XG4gICAgdGhpcy5faW1nVXJsID0gaW1nVXJsO1xuICAgIGRlbGV0ZSB0aGlzLl9pbWFnZTtcbiAgfVxuXG4gIGdldCBpbWFnZSgpOiBudWxsfEhUTUxJbWFnZUVsZW1lbnQge1xuICAgIGlmICh0aGlzLl9pbWFnZSkgcmV0dXJuIHRoaXMuaW1hZ2U7XG4gICAgaWYgKCF0aGlzLmltZ1VybCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGltYWdlLnNyYyA9IHRoaXMuaW1nVXJsO1xuICAgIGltYWdlLndpZHRoID0gdGhpcy53aWR0aDtcbiAgICBpbWFnZS5oZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICB0aGlzLl9pbWFnZSA9IGltYWdlO1xuXG4gICAgcmV0dXJuIHRoaXMuX2ltYWdlO1xuICB9XG5cbiAgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5ibGFuaykgcmV0dXJuO1xuXG4gICAgdGhpcy5hcHBseU5vcm1hbFN0eWxlKGN0eCwgdGhpcywgeyB4LCB5IH0pO1xuICAgIGlmICh0aGlzLm1hdGNoZWQpIHtcbiAgICAgIHRoaXMuYXBwbHlNYXRjaGVkU3R5bGUoY3R4LCB0aGlzLCB7IHgsIHkgfSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkKSB7XG4gICAgICB0aGlzLmFwcGx5U2VsZWN0ZWRTdHlsZShjdHgsIHRoaXMsIHsgeCwgeSB9KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudGFyZ2V0ZWQpIHtcbiAgICAgIHRoaXMuYXBwbHlUYXJnZXRlZFN0eWxlKGN0eCwgdGhpcywgeyB4LCB5IH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGVmYXVsdEFwcGx5Tm9ybWFsU3R5bGUoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHRpbGU6IENhbnZhc1RpbGUsIHsgeCwgeSB9OiBDb29yZFBvc2l0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0LCBpbWFnZSwgY29sb3IsIHZhcmlhbnQgfSA9IHRpbGU7XG5cbiAgICBpZiAoaW1hZ2UpIHtcbiAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIHgsIHkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICBjdHguZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgfVxuXG4gICAgY29uc3QgY2VudGVyID0geyB4OiB4ICsgKGhlaWdodCAvIDIpLCB5OiB5ICsgKHdpZHRoIC8gMikgfTtcbiAgICBjb25zdCBhcnJvd1dpZHRoID0gd2lkdGggLyA4O1xuICAgIGNvbnN0IGFycm93TGVuZ3RoID0gMC42ICogaGVpZ2h0O1xuICAgIHN3aXRjaCAodmFyaWFudCkge1xuICAgICAgY2FzZSAnaG9yaXpvbnRhbENsZWFyJzogZHJhd0RvdWJsZUFycm93KGN0eCwgJ2hvcml6b250YWwnLCAnd2hpdGUnLCAnd2hpdGUnLCBjZW50ZXIsIGFycm93V2lkdGgsIGFycm93TGVuZ3RoKTsgYnJlYWs7XG4gICAgICBjYXNlICd2ZXJ0aWNhbENsZWFyJzogZHJhd0RvdWJsZUFycm93KGN0eCwgJ3ZlcnRpY2FsJywgJ3doaXRlJywgJ3doaXRlJywgY2VudGVyLCBhcnJvd1dpZHRoLCBhcnJvd0xlbmd0aCk7IGJyZWFrO1xuICAgICAgY2FzZSAnY3Jvc3NDbGVhcic6IGRyYXdDcm9zc0Fycm93KGN0eCwgJ3doaXRlJywgJ3doaXRlJywgY2VudGVyLCBhcnJvd1dpZHRoLCBhcnJvd0xlbmd0aCk7IGJyZWFrO1xuICAgICAgY2FzZSAndHlwZUNsZWFyJzoge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gYCMkeyhuZXcgRGF0ZSgpLmdldFRpbWUoKSAlIE1BWF9DT0xPUl9JTlQpLnRvU3RyaW5nKDE2KX1gO1xuICAgICAgICBjdHguZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnYm9tYkNsZWFyJzoge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgY29uc3QgYm94V2lkdGggPSB3aWR0aCAvIDI7XG4gICAgICAgIGNvbnN0IGJveEhlaWdodCA9IGhlaWdodCAvIDI7XG4gICAgICAgIGN0eC5maWxsUmVjdCh4ICsgKGJveFdpZHRoIC8gMiksIHkgKyAoYm94SGVpZ2h0IC8gMiksIGJveFdpZHRoLCBib3hIZWlnaHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGRlZmF1bHRBcHBseVNlbGVjdGVkU3R5bGUoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHRpbGU6IENhbnZhc1RpbGUsIHsgeCwgeSB9OiBDb29yZFBvc2l0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aWxlO1xuICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpJztcbiAgICBjdHguZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gIH1cblxuICBwcml2YXRlIGRlZmF1bHRBcHBseVRhcmdldGVkU3R5bGUoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHRpbGU6IENhbnZhc1RpbGUsIHsgeCwgeSB9OiBDb29yZFBvc2l0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aWxlO1xuICAgIGNvbnN0IG1pbGxpcyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIGNvbnN0IHB1bHNlTXMgPSB0aGlzLm1hdGNoQW5pbWF0aW9uTXM7XG4gICAgY29uc3QgbWluU3Ryb2tlID0gMjtcbiAgICBjb25zdCBtYXhTdHJva2UgPSA1O1xuICAgIGNvbnN0IHN0cm9rZVdpZHRoID0gbWluU3Ryb2tlICsgKE1hdGguc2luKChtaWxsaXMgLyBwdWxzZU1zKSAlIE1hdGguUEkpICogKG1heFN0cm9rZSAtIG1pblN0cm9rZSkpO1xuICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjkpJztcbiAgICBjdHguZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgY3R4LmZpbGxTdHlsZSA9IHRpbGUuY29sb3I7XG4gICAgY3R4LmZpbGxSZWN0KHggKyBzdHJva2VXaWR0aCwgeSArIHN0cm9rZVdpZHRoLCB3aWR0aCAtIChzdHJva2VXaWR0aCAqIDIpLCBoZWlnaHQgLSAoc3Ryb2tlV2lkdGggKiAyKSk7XG4gIH1cblxuICBwcml2YXRlIGRlZmF1bHRBcHBseU1hdGNoZWRTdHlsZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgdGlsZTogQ2FudmFzVGlsZSwgeyB4LCB5IH06IENvb3JkUG9zaXRpb24pOiB2b2lkIHtcbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQsIGNvbG9yLCBtYXRjaEFuaW1hdGlvbk1zIH0gPSB0aWxlO1xuICAgIGlmICghdGlsZS5tYXRjaGVkQXQpIHJldHVybjtcblxuICAgIGNvbnN0IG1zU2luY2VNYXRjaCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGlsZS5tYXRjaGVkQXQuZ2V0VGltZSgpO1xuICAgIGNvbnN0IHBlcmNlbnREb25lID0gbXNTaW5jZU1hdGNoID4gbWF0Y2hBbmltYXRpb25NcyA/IDEgOiBtc1NpbmNlTWF0Y2ggLyBtYXRjaEFuaW1hdGlvbk1zO1xuICAgIGNvbnN0IGhvcml6b250YWwgPSBwZXJjZW50RG9uZSAqICh3aWR0aCAvIDIpO1xuICAgIGNvbnN0IHZlcnRpY2FsID0gcGVyY2VudERvbmUgKiAoaGVpZ2h0IC8gMik7XG4gICAgY3R4LmZpbGxTdHlsZSA9ICcjRkZGJztcbiAgICBjdHguZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgIGN0eC5maWxsUmVjdCh4ICsgaG9yaXpvbnRhbCwgeSArIHZlcnRpY2FsLCB3aWR0aCAtIChob3Jpem9udGFsICogMiksIGhlaWdodCAtICh2ZXJ0aWNhbCAqIDIpKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIE1vdXNlIHtcbiAgcHVibGljIHggPSAwO1xuICBwdWJsaWMgeSA9IDA7XG4gIHB1YmxpYyBwcmVzc2VkID0gZmFsc2U7XG4gIHB1YmxpYyBwcmVzc2VkU3RhcnRQb3M6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfTtcbiAgcHVibGljIHByZXNzQ2FsbGJhY2tzOiAoKG1vdXNlOiBNb3VzZSkgPT4gdm9pZClbXSA9IFtdO1xuICBwdWJsaWMgZGVwcmVzc0NhbGxiYWNrczogKChtb3VzZTogTW91c2UpID0+IHZvaWQpW10gPSBbXTtcbiAgcHVibGljIG1vdmVDYWxsYmFja3M6ICgobW91c2U6IE1vdXNlKSA9PiB2b2lkKVtdID0gW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wcmVzc2VkU3RhcnRQb3MgPSB7IHg6IHRoaXMueCwgeTogdGhpcy55IH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbU1vdXNlRXZlbnQoZXZlbnQpO1xuICAgICAgdGhpcy5wcmVzc0NhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKHRoaXMpKTtcbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbU1vdXNlRXZlbnQoZXZlbnQpO1xuICAgICAgdGhpcy5tb3ZlQ2FsbGJhY2tzLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2sodGhpcykpO1xuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmRlcHJlc3NDYWxsYmFja3MuZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayh0aGlzKSk7IC8vIHdlIHdhbnQgdGhpcyBvbmUgdG8gaGFwcGVuIGJlZm9yZSB0aGUgcmVzZXRcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tTW91c2VFdmVudChldmVudCk7XG4gICAgfSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Ub3VjaEV2ZW50KGV2ZW50KTtcbiAgICAgIHRoaXMucHJlc3NDYWxsYmFja3MuZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayh0aGlzKSk7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Ub3VjaEV2ZW50KGV2ZW50KTtcbiAgICAgIHRoaXMubW92ZUNhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKHRoaXMpKTtcbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuZGVwcmVzc0NhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKHRoaXMpKTsgLy8gd2Ugd2FudCB0aGlzIG9uZSB0byBoYXBwZW4gYmVmb3JlIHRoZSByZXNldFxuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Ub3VjaEV2ZW50KGV2ZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldCBkcmFnVmVjdG9yKCk6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSB7XG4gICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLnByZXNzZWRTdGFydFBvcztcbiAgICByZXR1cm4gdGhpcy5wcmVzc2VkID8geyB4OiB0aGlzLnggLSB4LCB5OiB0aGlzLnkgLSB5IH0gOiB7IHg6IDAsIHk6IDAgfTtcbiAgfVxuXG4gIGdldCBkcmFnRGlyZWN0aW9uKCk6ICdub25lJ3wndXAnfCdkb3duJ3wnbGVmdCd8J3JpZ2h0JyB7XG4gICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLmRyYWdWZWN0b3I7XG4gICAgaWYgKHggPT09IDAgJiYgeSA9PT0gMCkgcmV0dXJuICdub25lJztcblxuICAgIGlmIChNYXRoLmFicyh4KSA+PSBNYXRoLmFicyh5KSkge1xuICAgICAgcmV0dXJuIHggPCAwID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHkgPCAwID8gJ3VwJyA6ICdkb3duJztcbiAgICB9XG4gIH1cblxuICBvblByZXNzKGNhbGxiYWNrOiAobW91c2U6IE1vdXNlKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5wcmVzc0NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIG9uRGVwcmVzcyhjYWxsYmFjazogKG1vdXNlOiBNb3VzZSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuZGVwcmVzc0NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIG9uTW92ZShjYWxsYmFjazogKG1vdXNlOiBNb3VzZSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMubW92ZUNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIHBvcHVsYXRlRnJvbU1vdXNlRXZlbnQoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnggPSBldmVudC54O1xuICAgIHRoaXMueSA9IGV2ZW50Lnk7XG4gICAgY29uc3QgYWxyZWFkeVByZXNzZWQgPSB0aGlzLnByZXNzZWQ7XG4gICAgdGhpcy5wcmVzc2VkID0gZXZlbnQuYnV0dG9ucyA9PT0gMTtcbiAgICBpZiAodGhpcy5wcmVzc2VkICYmICFhbHJlYWR5UHJlc3NlZCkge1xuICAgICAgdGhpcy5wcmVzc2VkU3RhcnRQb3MgPSB7IHg6IHRoaXMueCwgeTogdGhpcy55IH07XG4gICAgfVxuICB9XG5cbiAgcG9wdWxhdGVGcm9tVG91Y2hFdmVudChldmVudDogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHsgdG91Y2hlcyB9ID0gZXZlbnQ7XG4gICAgY29uc3QgYWxyZWFkeVByZXNzZWQgPSB0aGlzLnByZXNzZWQ7XG4gICAgaWYgKHRvdWNoZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnByZXNzZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdG91Y2ggPSB0b3VjaGVzWzBdO1xuICAgICAgdGhpcy54ID0gdG91Y2guY2xpZW50WDtcbiAgICAgIHRoaXMueSA9IHRvdWNoLmNsaWVudFk7XG4gICAgICB0aGlzLnByZXNzZWQgPSB0cnVlO1xuICAgICAgaWYgKCFhbHJlYWR5UHJlc3NlZCkgdGhpcy5wcmVzc2VkU3RhcnRQb3MgPSB7IHg6IHRoaXMueCwgeTogdGhpcy55IH07XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IG1vdXNlID0gbmV3IE1vdXNlKCk7XG5cbmV4cG9ydCBkZWZhdWx0IG1vdXNlO1xuIiwiaW1wb3J0IHsgcmFuZ2UsIHJvdGF0ZSwgZmluZE1hcCwgcm90YXRlR3JpZFBvc2l0aW9uIH0gZnJvbSBcIi4vY29uY2VybnMvdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBHcmlkUG9zaXRpb24gfSBmcm9tIFwiLi90eXBlcy9jb21tb25cIjtcblxuZXhwb3J0IHR5cGUgU2hhcGVNYXAgPSBib29sZWFuW11bXTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hhcGUge1xuICBwdWJsaWMgdmFsdWU6IG51bWJlcjtcbiAgcHJpdmF0ZSBfbWFwITogU2hhcGVNYXA7XG4gIHByaXZhdGUgX2V4dGVuZCE6IGJvb2xlYW47XG4gIHByaXZhdGUgX2xpbmVhciE6IGJvb2xlYW47XG4gIHByaXZhdGUgX2NlbnRlclBvc2l0aW9uPzogR3JpZFBvc2l0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKG9wdHM6IFBhcnRpYWw8U2hhcGU+ID0ge30pIHtcbiAgICB0aGlzLnZhbHVlID0gb3B0cy52YWx1ZSB8fCAxO1xuICAgIHRoaXMuZXh0ZW5kID0gb3B0cy5leHRlbmQgfHwgZmFsc2U7XG4gICAgdGhpcy5tYXAgPSBvcHRzLm1hcCB8fCBbW11dO1xuICB9XG5cbiAgc3RhdGljIGZyb21MZW5ndGgobGVuZ3RoOiBudW1iZXIsIHsgdmFsdWUgPSAxLCBvck1vcmUgfTogeyB2YWx1ZT86IG51bWJlcjsgb3JNb3JlPzogYm9vbGVhbiB9ID0ge30pOiBTaGFwZSB7XG4gICAgcmV0dXJuIG5ldyBTaGFwZSh7XG4gICAgICB2YWx1ZSxcbiAgICAgIGV4dGVuZDogISFvck1vcmUsXG4gICAgICBtYXA6IFtyYW5nZShsZW5ndGgsICgpID0+IHRydWUpXSxcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyByb3RhdGVkKHNoYXBlOiBTaGFwZSwgcm90YXRpb25zID0gMSk6IFNoYXBlIHtcbiAgICByZXR1cm4gbmV3IFNoYXBlKHsgLi4uc2hhcGUsIG1hcDogcm90YXRlKHNoYXBlLm1hcCwgcm90YXRpb25zKSB9KTtcbiAgfVxuXG4gIGdldCBleHRlbmQoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl9leHRlbmQgJiYgdGhpcy5saW5lYXIgfVxuICBzZXQgZXh0ZW5kKGV4dGVuZDogYm9vbGVhbikgeyB0aGlzLl9leHRlbmQgPSBleHRlbmQgfVxuXG4gIGdldCBtYXAoKTogU2hhcGVNYXAgeyByZXR1cm4gdGhpcy5fbWFwIH1cbiAgc2V0IG1hcChtYXA6IFNoYXBlTWFwKSB7XG4gICAgZGVsZXRlIHRoaXMuX2xpbmVhcjtcbiAgICBjb25zdCByb3dMZW5ndGggPSBtYXAucmVkdWNlKChtYXgsIHsgbGVuZ3RoIH0pID0+IChsZW5ndGggPiBtYXggPyBsZW5ndGggOiBtYXgpLCAwKTtcbiAgICB0aGlzLl9tYXAgPSBtYXAubWFwKHJvdyA9PiByYW5nZShyb3dMZW5ndGgsIGkgPT4gKHJvd1tpXSB8fCBmYWxzZSkpKTtcbiAgfVxuXG4gIGdldCBsaW5lYXIoKTogYm9vbGVhbiB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9saW5lYXIgIT09ICd1bmRlZmluZWQnKSByZXR1cm4gdGhpcy5fbGluZWFyO1xuXG4gICAgdGhpcy5fbGluZWFyID0gKHRoaXMubWFwLmxlbmd0aCA9PT0gMSAmJiB0aGlzLm1hcFswXS5ldmVyeShzcGFjZSA9PiBzcGFjZSkpXG4gICAgICB8fCB0aGlzLm1hcC5ldmVyeShyb3cgPT4gKHJvdy5sZW5ndGggPT09IDEgJiYgcm93WzBdKSk7XG5cbiAgICByZXR1cm4gdGhpcy5fbGluZWFyO1xuICB9XG5cbiAgbWF0Y2g8Tz4oZ3JpZDogT1tdW10sIGZpZWxkOiBrZXlvZiBPLCByb3RhdGlvbiA9IDApOiB7IHJvdGF0aW9uOiBudW1iZXI7IG1hdGNoZWQ6IE9bXTsgY2VudGVyOiBPfG51bGwgfSB7XG4gICAgY29uc3QgbWF0Y2hlZCA9IFtdIGFzIE9bXTtcbiAgICBpZiAocm90YXRpb24gPiAzKSByZXR1cm4geyByb3RhdGlvbiwgbWF0Y2hlZCwgY2VudGVyOiBudWxsIH07XG5cbiAgICBsZXQgbWF0Y2hWYWx1ZVNldCA9IGZhbHNlO1xuICAgIGxldCBtYXRjaFZhbHVlOiBPW2tleW9mIE9dO1xuICAgIGNvbnN0IHJvdGF0ZWRNYXAgPSByb3RhdGUodGhpcy5tYXAsIHJvdGF0aW9uKTtcblxuICAgIGNvbnN0IGFsbE1hdGNoZWQgPSByb3RhdGVkTWFwLmV2ZXJ5KChtYXRjaGVyUm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgY29uc3QgZ3JpZFJvdyA9IGdyaWRbcm93SW5kZXhdO1xuICAgICAgaWYgKCFncmlkUm93KSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIHJldHVybiBtYXRjaGVyUm93LmV2ZXJ5KChtdXN0TWF0Y2gsIGNvbEluZGV4KSA9PiB7XG4gICAgICAgIGlmICghbXVzdE1hdGNoKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgICBjb25zdCBncmlkSXRlbSA9IGdyaWRSb3dbY29sSW5kZXhdO1xuICAgICAgICBpZiAoIWdyaWRJdGVtKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgZ3JpZFZhbHVlID0gZ3JpZEl0ZW1bZmllbGRdO1xuICAgICAgICBpZiAoIW1hdGNoVmFsdWVTZXQpIHtcbiAgICAgICAgICBtYXRjaFZhbHVlID0gZ3JpZFZhbHVlO1xuICAgICAgICAgIG1hdGNoVmFsdWVTZXQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGdyaWRWYWx1ZSAhPT0gbWF0Y2hWYWx1ZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIG1hdGNoZWQucHVzaChncmlkSXRlbSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAoYWxsTWF0Y2hlZCkge1xuICAgICAgY29uc3QgeyByb3csIGNvbCB9ID0gdGhpcy5jZW50ZXJQb3NpdGlvbihyb3RhdGlvbik7XG4gICAgICBjb25zdCBjZW50ZXIgPSBncmlkW3Jvd11bY29sXTtcbiAgICAgIHJldHVybiB7IHJvdGF0aW9uLCBtYXRjaGVkLCBjZW50ZXIgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tYXRjaChncmlkLCBmaWVsZCwgcm90YXRpb24gKyAxKTtcbiAgfVxuXG4gIHNjcmVlbjxPIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55Pj4oZ3JpZDogT1tdW10sIG9mZnNldDogR3JpZFBvc2l0aW9uID0geyByb3c6IDAsIGNvbDogMCB9KTogT1tdIHtcbiAgICBjb25zdCBvZmZzZXRNYXBSb3dzID0gb2Zmc2V0LnJvdyA8IDBcbiAgICAgID8gdGhpcy5tYXAuc2xpY2UoLTEgKiBvZmZzZXQucm93KVxuICAgICAgOiBbLi4ucmFuZ2Uob2Zmc2V0LnJvdywgKCkgPT4gW10pLCAuLi50aGlzLm1hcF07XG5cbiAgICBjb25zdCBvZmZzZXRNYXAgPSBvZmZzZXRNYXBSb3dzLm1hcCgocm93KSA9PiB7XG4gICAgICByZXR1cm4gb2Zmc2V0LmNvbCA8IDBcbiAgICAgICAgPyByb3cuc2xpY2UoLTEgKiBvZmZzZXQuY29sKVxuICAgICAgICA6IFsuLi5yYW5nZShvZmZzZXQuY29sLCAoKSA9PiBmYWxzZSksIC4uLnJvd107XG4gICAgfSk7XG5cbiAgICAvLyBkZWJ1Z2dlclxuXG4gICAgcmV0dXJuIG9mZnNldE1hcC5yZWR1Y2UoKGFsbE1hdGNoZWRUaWxlcywgbWF0Y2hlclJvdywgcm93SW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGdyaWRSb3cgPSBncmlkW3Jvd0luZGV4XTtcblxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgLi4uYWxsTWF0Y2hlZFRpbGVzLFxuICAgICAgICAuLi5tYXRjaGVyUm93LnJlZHVjZSgobWF0Y2hlZFJvd1RpbGVzLCBtdXN0TWF0Y2gsIGNvbEluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgdGlsZSA9IGdyaWRSb3cgJiYgZ3JpZFJvd1tjb2xJbmRleF07XG4gICAgICAgICAgcmV0dXJuIHRpbGUgJiYgbXVzdE1hdGNoID8gWy4uLm1hdGNoZWRSb3dUaWxlcywgdGlsZV0gOiBtYXRjaGVkUm93VGlsZXM7XG4gICAgICAgIH0sIFtdIGFzIE9bXSksXG4gICAgICBdO1xuICAgIH0sIFtdIGFzIE9bXSk7XG4gIH1cblxuICBnZXQgY2VudGVyKCk6IHsgbXVzdE1hdGNoOiBib29sZWFuIH0gJiBHcmlkUG9zaXRpb24ge1xuICAgIGNvbnN0IHJvd0luZGV4ID0gTWF0aC5mbG9vcih0aGlzLm1hcC5sZW5ndGggLyAyKTtcbiAgICBjb25zdCBtYXBSb3cgPSB0aGlzLm1hcFtyb3dJbmRleF07XG4gICAgY29uc3QgY29sSW5kZXggPSBNYXRoLmZsb29yKG1hcFJvdy5sZW5ndGggLyAyKTtcbiAgICBjb25zdCBtdXN0TWF0Y2ggPSBtYXBSb3dbY29sSW5kZXhdO1xuICAgIHJldHVybiB7IG11c3RNYXRjaCwgcm93OiByb3dJbmRleCwgY29sOiBjb2xJbmRleCB9O1xuICB9XG5cbiAgY2VudGVyUG9zaXRpb24ocm90YXRpb25zID0gMCk6IEdyaWRQb3NpdGlvbiB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9jZW50ZXJQb3NpdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IG11c3RNYXRjaENvdW50ID0gdGhpcy5tYXAucmVkdWNlKCh0b3RhbCwgbWF0Y2hlclJvdykgPT4ge1xuICAgICAgICByZXR1cm4gdG90YWwgKyBtYXRjaGVyUm93LnJlZHVjZSgoc3VtLCBtdXN0TWF0Y2gpID0+IChtdXN0TWF0Y2ggPyBzdW0gKyAxIDogc3VtKSwgMCk7XG4gICAgICB9LCAwKTtcblxuICAgICAgY29uc3QgY2VudGVySW5kZXggPSBNYXRoLmZsb29yKG11c3RNYXRjaENvdW50IC8gMik7XG5cbiAgICAgIGxldCBjdXJzb3IgPSAwO1xuICAgICAgdGhpcy5fY2VudGVyUG9zaXRpb24gPSBmaW5kTWFwKHRoaXMubWFwLCAocm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4gZmluZE1hcChyb3csIChtdXN0TWF0Y2gsIGluZGV4KSA9PiB7XG4gICAgICAgICAgaWYgKCFtdXN0TWF0Y2gpIHJldHVybjtcbiAgICAgICAgICBpZiAoY3Vyc29yID09PSBjZW50ZXJJbmRleCkgcmV0dXJuIHsgcm93OiByb3dJbmRleCwgY29sOiBpbmRleCB9OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gICAgICAgICAgY3Vyc29yICs9IDE7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgcm93Q291bnQgPSB0aGlzLm1hcC5sZW5ndGg7XG4gICAgY29uc3QgY29sQ291bnQgPSB0aGlzLm1hcFswXS5sZW5ndGg7XG4gICAgcmV0dXJuIHJvdGF0ZUdyaWRQb3NpdGlvbih0aGlzLl9jZW50ZXJQb3NpdGlvbiEsIHJvd0NvdW50LCBjb2xDb3VudCwgcm90YXRpb25zKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZGVmYXVsdFNoYXBlcyA9ICgpOiBTaGFwZVtdID0+IFtcbiAgU2hhcGUuZnJvbUxlbmd0aCgzLCB7IHZhbHVlOiAxIH0pLFxuICBTaGFwZS5mcm9tTGVuZ3RoKDQsIHsgdmFsdWU6IDIgfSksXG4gIFNoYXBlLmZyb21MZW5ndGgoNSwgeyB2YWx1ZTogMyB9KSxcbiAgU2hhcGUuZnJvbUxlbmd0aCg2LCB7IHZhbHVlOiA0LCBvck1vcmU6IHRydWUgfSksXG4gIG5ldyBTaGFwZSh7XG4gICAgdmFsdWU6IDUsXG4gICAgbWFwOiBbXG4gICAgICBbdHJ1ZSwgdHJ1ZSwgdHJ1ZV0sXG4gICAgICBbdHJ1ZV0sXG4gICAgICBbdHJ1ZV0sXG4gICAgXSxcbiAgfSksXG4gIG5ldyBTaGFwZSh7XG4gICAgdmFsdWU6IDYsXG4gICAgbWFwOiBbXG4gICAgICBbdHJ1ZSwgdHJ1ZSwgdHJ1ZV0sXG4gICAgICBbZmFsc2UsIHRydWVdLFxuICAgICAgW2ZhbHNlLCB0cnVlXSxcbiAgICBdLFxuICB9KSxcbiAgbmV3IFNoYXBlKHtcbiAgICB2YWx1ZTogNyxcbiAgICBtYXA6IFtcbiAgICAgIFt0cnVlLCB0cnVlXSxcbiAgICAgIFt0cnVlLCB0cnVlXSxcbiAgICBdLFxuICB9KSxcbl07XG4iLCJpbXBvcnQgQm9hcmQgZnJvbSBcIi4uL0JvYXJkXCI7XG5pbXBvcnQgQ2FudmFzVGlsZSBmcm9tIFwiLi9DYW52YXNUaWxlXCI7XG5pbXBvcnQgeyByYW5nZSwgZGlzdGFuY2VCZXR3ZWVuLCBmaW5kTWFwLCBzYW1wbGUsIHR1cGxlLCB1bmlxIH0gZnJvbSBcIi4uL2NvbmNlcm5zL3V0aWxpdGllc1wiO1xuaW1wb3J0IG1vdXNlLCB7IE1vdXNlIH0gZnJvbSBcIi4vbW91c2VcIjtcbmltcG9ydCBTaGFwZSwgeyBkZWZhdWx0U2hhcGVzIH0gZnJvbSBcIi4uL1NoYXBlXCI7XG5pbXBvcnQgeyBHcmlkUG9zaXRpb24sIENvb3JkUG9zaXRpb24gfSBmcm9tIFwiLi4vdHlwZXMvY29tbW9uXCI7XG5cbmV4cG9ydCB0eXBlIFN3YXBEaXJlY3Rpb24gPSAnbm9uZSd8J3VwJ3wnZG93bid8J2xlZnQnfCdyaWdodCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJlc2VudENhbnZhc1RpbGVJbmZvIHtcbiAgcm93OiBudW1iZXI7XG4gIGNvbDogbnVtYmVyO1xuICB0aWxlOiBDYW52YXNUaWxlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJsYW5rQ2FudmFzVGlsZUluZm8ge1xuICByb3c6IC0xO1xuICBjb2w6IC0xO1xuICB0aWxlOiBudWxsO1xufVxuXG5leHBvcnQgdHlwZSBDYW52YXNUaWxlSW5mbyA9IFByZXNlbnRDYW52YXNUaWxlSW5mbyB8IEJsYW5rQ2FudmFzVGlsZUluZm87XG5cbmV4cG9ydCBpbnRlcmZhY2UgQm9hcmREcmFnRXZlbnQge1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbiAgZGlzdGFuY2U6IG51bWJlcjtcbiAgZGlyZWN0aW9uOiBTd2FwRGlyZWN0aW9uO1xuICBvcmlnaW46IFByZXNlbnRDYW52YXNUaWxlSW5mbztcbiAgZGVzdGluYXRpb246IFByZXNlbnRDYW52YXNUaWxlSW5mbztcbiAgbW91c2U6IE1vdXNlO1xufVxuXG5leHBvcnQgdHlwZSBCb2FyZERyYWdFdmVudENhbGxiYWNrID0gKGV2ZW50OiBCb2FyZERyYWdFdmVudCkgPT4gdm9pZDtcblxuY29uc3QgYmxhbmtDYW52YXNUaWxlSW5mbyA9ICgpOiBCbGFua0NhbnZhc1RpbGVJbmZvID0+ICh7IHJvdzogLTEsIGNvbDogLTEsIHRpbGU6IG51bGwgfSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhc0JvYXJkIGV4dGVuZHMgQm9hcmQ8Q2FudmFzVGlsZT4ge1xuICBwdWJsaWMgeDogbnVtYmVyO1xuICBwdWJsaWMgeTogbnVtYmVyO1xuICBwdWJsaWMgd2lkdGg6IG51bWJlcjtcbiAgcHVibGljIGhlaWdodDogbnVtYmVyO1xuICBwdWJsaWMgc2Vuc2l0aXZpdHk6IG51bWJlcjtcbiAgcHVibGljIGRyYWdTdGFydENhbGxiYWNrczogQm9hcmREcmFnRXZlbnRDYWxsYmFja1tdID0gW107XG4gIHB1YmxpYyBkcmFnRW5kQ2FsbGJhY2tzOiBCb2FyZERyYWdFdmVudENhbGxiYWNrW10gPSBbXTtcbiAgcHVibGljIGRyYWdDYWxsYmFja3M6IEJvYXJkRHJhZ0V2ZW50Q2FsbGJhY2tbXSA9IFtdO1xuICBwdWJsaWMgc2hhcGVzOiBTaGFwZVtdO1xuICBwdWJsaWMgYXBwbHlOb3JtYWxTdHlsZT86IENhbnZhc1RpbGVbJ2FwcGx5Tm9ybWFsU3R5bGUnXTtcbiAgcHVibGljIGFwcGx5U2VsZWN0ZWRTdHlsZT86IENhbnZhc1RpbGVbJ2FwcGx5U2VsZWN0ZWRTdHlsZSddO1xuICBwdWJsaWMgYXBwbHlUYXJnZXRlZFN0eWxlPzogQ2FudmFzVGlsZVsnYXBwbHlUYXJnZXRlZFN0eWxlJ107XG4gIHB1YmxpYyBhcHBseU1hdGNoZWRTdHlsZT86IENhbnZhc1RpbGVbJ2FwcGx5TWF0Y2hlZFN0eWxlJ107XG4gIHB1YmxpYyBtYXRjaEFuaW1hdGlvbk1zOiBudW1iZXI7XG4gIHByaXZhdGUgZHJhZ09yaWdpbjogQ2FudmFzVGlsZUluZm8gPSBibGFua0NhbnZhc1RpbGVJbmZvKCk7XG4gIHByaXZhdGUgc3dhcE9yaWdpbjogQ2FudmFzVGlsZUluZm8gPSBibGFua0NhbnZhc1RpbGVJbmZvKCk7XG4gIHByaXZhdGUgc3dhcFRhcmdldDogQ2FudmFzVGlsZUluZm8gPSBibGFua0NhbnZhc1RpbGVJbmZvKCk7XG4gIHByaXZhdGUgc3RhcnRlZFNldHRsaW5nQXQ/OiBEYXRlO1xuICBwcml2YXRlIG5lZWRzU2h1ZmZsZSA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKG9wdHM6IFBhcnRpYWw8Q2FudmFzQm9hcmQ+KSB7XG4gICAgc3VwZXIoe1xuICAgICAgLi4ub3B0cyxcbiAgICAgIHRpbGVEZWZzOiB7XG4gICAgICAgIHJlZDogeyBnZW5lcmF0b3I6ICh7IHZhcmlhbnQgfSkgPT4gdGhpcy5kZWZhdWx0TmV3VGlsZU9mVHlwZSgncmVkJywgdmFyaWFudCkgfSxcbiAgICAgICAgb3JhbmdlOiB7IGdlbmVyYXRvcjogKHsgdmFyaWFudCB9KSA9PiB0aGlzLmRlZmF1bHROZXdUaWxlT2ZUeXBlKCdvcmFuZ2UnLCB2YXJpYW50KSB9LFxuICAgICAgICBwdXJwbGU6IHsgZ2VuZXJhdG9yOiAoeyB2YXJpYW50IH0pID0+IHRoaXMuZGVmYXVsdE5ld1RpbGVPZlR5cGUoJ3B1cnBsZScsIHZhcmlhbnQpIH0sXG4gICAgICAgIGdyZWVuOiB7IGdlbmVyYXRvcjogKHsgdmFyaWFudCB9KSA9PiB0aGlzLmRlZmF1bHROZXdUaWxlT2ZUeXBlKCdncmVlbicsIHZhcmlhbnQpIH0sXG4gICAgICAgIGJsdWU6IHsgZ2VuZXJhdG9yOiAoeyB2YXJpYW50IH0pID0+IHRoaXMuZGVmYXVsdE5ld1RpbGVPZlR5cGUoJ2JsdWUnLCB2YXJpYW50KSB9LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMueCA9IG9wdHMueCB8fCAwO1xuICAgIHRoaXMueSA9IG9wdHMueSB8fCAwO1xuICAgIGNvbnN0IHJhd1dpZHRoID0gb3B0cy53aWR0aCB8fCB0aGlzLmNvbENvdW50ICogNTA7XG4gICAgdGhpcy53aWR0aCA9IHJhd1dpZHRoIC0gKHJhd1dpZHRoICUgdGhpcy5jb2xDb3VudCk7XG4gICAgdGhpcy5oZWlnaHQgPSBvcHRzLmhlaWdodCB8fCB0aGlzLndpZHRoO1xuICAgIHRoaXMuc2Vuc2l0aXZpdHkgPSBvcHRzLnNlbnNpdGl2aXR5IHx8IDI1O1xuICAgIHRoaXMuc2hhcGVzID0gb3B0cy5zaGFwZXMgfHwgZGVmYXVsdFNoYXBlcygpO1xuICAgIHRoaXMuYXBwbHlOb3JtYWxTdHlsZSA9IG9wdHMuYXBwbHlOb3JtYWxTdHlsZTtcbiAgICB0aGlzLmFwcGx5U2VsZWN0ZWRTdHlsZSA9IG9wdHMuYXBwbHlTZWxlY3RlZFN0eWxlO1xuICAgIHRoaXMuYXBwbHlUYXJnZXRlZFN0eWxlID0gb3B0cy5hcHBseVRhcmdldGVkU3R5bGU7XG4gICAgdGhpcy5hcHBseU1hdGNoZWRTdHlsZSA9IG9wdHMuYXBwbHlNYXRjaGVkU3R5bGU7XG4gICAgdGhpcy5tYXRjaEFuaW1hdGlvbk1zID0gb3B0cy5tYXRjaEFuaW1hdGlvbk1zIHx8IDI1MDtcblxuICAgIG1vdXNlLm9uUHJlc3ModGhpcy5ydW5EcmFnU3RhcnRDYWxsYmFja3MuYmluZCh0aGlzKSk7XG4gICAgbW91c2Uub25EZXByZXNzKHRoaXMucnVuRHJhZ0VuZENhbGxiYWNrcy5iaW5kKHRoaXMpKTtcbiAgICBtb3VzZS5vbk1vdmUodGhpcy5ydW5EcmFnQ2FsbGJhY2tzLmJpbmQodGhpcykpO1xuXG4gICAgdGhpcy5zdGFiaWxpemVJbml0aWFsVGlsZXMoKTtcblxuICAgIHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB0aGlzLmNoZWNrU2h1ZmZsZSgpLCAxMDAwKTtcbiAgfVxuXG4gIGdldCB0aWxlV2lkdGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy53aWR0aCAvIHRoaXMuY29sQ291bnQ7XG4gIH1cblxuICBnZXQgdGlsZUhlaWdodCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmhlaWdodCAvIHRoaXMucm93Q291bnQ7XG4gIH1cblxuICBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XG4gICAgY29uc3Qgc2V0dGxpbmcgPSB0aGlzLmNoZWNrU2V0dGxlKCk7XG4gICAgY29uc3QgbXNTaW5jZVNldHRsZSA9IHRoaXMuc3RhcnRlZFNldHRsaW5nQXQgPyBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMuc3RhcnRlZFNldHRsaW5nQXQuZ2V0VGltZSgpIDogMDtcbiAgICBjb25zdCBmYWxsVGltZU1zID0gMTAwO1xuICAgIGNvbnN0IGR5ID0gKG1zU2luY2VTZXR0bGUgLyBmYWxsVGltZU1zKSAqIHRoaXMudGlsZUhlaWdodDtcbiAgICBjb25zdCBpdHNTd2FwVGltZUJydWggPSBtc1NpbmNlU2V0dGxlID4gZmFsbFRpbWVNcztcbiAgICBpZiAoaXRzU3dhcFRpbWVCcnVoKSBkZWxldGUgdGhpcy5zdGFydGVkU2V0dGxpbmdBdDtcblxuICAgIGNvbnN0IHRpbGVzVG9Td2FwID0gW10gYXMgW0dyaWRQb3NpdGlvbiwgR3JpZFBvc2l0aW9uXVtdO1xuICAgIHRoaXMucm93cy5mb3JFYWNoKChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICByb3cuZm9yRWFjaCgodGlsZSwgdGlsZUluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHggPSB0aGlzLnggKyAodGlsZUluZGV4ICogdGlsZS53aWR0aCk7XG4gICAgICAgIGxldCB5ID0gdGhpcy55ICsgKHJvd0luZGV4ICogdGlsZS5oZWlnaHQpO1xuICAgICAgICBpZiAoc2V0dGxpbmcgJiYgIXRpbGUuYmxhbmspIHtcbiAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHsgcm93OiByb3dJbmRleCwgY29sOiB0aWxlSW5kZXggfTtcbiAgICAgICAgICBjb25zdCBiZWxvdyA9IHRoaXMuYWRqYWNlbnRUaWxlKHBvc2l0aW9uLCAnZG93bicpO1xuICAgICAgICAgIGlmIChiZWxvdy50aWxlICYmIGJlbG93LnRpbGUuYmxhbmspIHtcbiAgICAgICAgICAgIHkgKz0gZHk7XG4gICAgICAgICAgICBpZiAoaXRzU3dhcFRpbWVCcnVoKSB0aWxlc1RvU3dhcC5wdXNoKFtwb3NpdGlvbiwgYmVsb3ddKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGlsZS5kcmF3KGN0eCwgeCwgeSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRpbGVzVG9Td2FwLmZvckVhY2goKFtvcmlnaW4sIGJlbG93XSkgPT4gdGhpcy5zd2FwVGlsZShvcmlnaW4sIGJlbG93KSk7XG4gIH1cblxuICB1cGRhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5zcGF3bk5ld1RpbGVzKCk7XG4gICAgaWYgKHRoaXMudGlsZXNXaWxsRHJvcCgpKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5uZWVkc1NodWZmbGUpIHtcbiAgICAgIC8vIHRoaXMuZHJhd1NodWZmbGUoKTtcbiAgICAgIHRoaXMuc2h1ZmZsZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IG1hdGNoZWRTaGFwZXMgPSB0aGlzLm1hdGNoU2hhcGVzKCk7XG4gICAgaWYgKCFtYXRjaGVkU2hhcGVzLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgb3JpZ2luVGlsZSA9IHRoaXMuc3dhcE9yaWdpbi50aWxlO1xuICAgIGNvbnN0IHRhcmdldFRpbGUgPSB0aGlzLnN3YXBUYXJnZXQudGlsZTtcblxuICAgIGNvbnN0IHNvcnRlZE1hdGNoZWRTaGFwZXMgPSBbLi4ubWF0Y2hlZFNoYXBlc10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGEuc2hhcGUudmFsdWUgPiBiLnNoYXBlLnZhbHVlKSByZXR1cm4gLTE7XG4gICAgICBpZiAoYi5zaGFwZS52YWx1ZSA+IGEuc2hhcGUudmFsdWUpIHJldHVybiAxO1xuICAgICAgaWYgKGEudGlsZXMuc29tZSh0aWxlID0+ICh0aWxlID09PSB0YXJnZXRUaWxlIHx8IHRpbGUgPT09IG9yaWdpblRpbGUpKSkgcmV0dXJuIC0xO1xuICAgICAgaWYgKGIudGlsZXMuc29tZSh0aWxlID0+ICh0aWxlID09PSB0YXJnZXRUaWxlIHx8IHRpbGUgPT09IG9yaWdpblRpbGUpKSkgcmV0dXJuIDE7XG4gICAgICByZXR1cm4gMDtcbiAgICB9KTtcblxuICAgIGNvbnN0IHRyYW5zY2VuZGVudFRpbGVzOiBNYXA8Q2FudmFzVGlsZSwgc3RyaW5nW10+ID0gbmV3IE1hcCgpO1xuICAgIHNvcnRlZE1hdGNoZWRTaGFwZXMuZm9yRWFjaCgoeyB0aWxlcywgc2hhcGUsIHJvdGF0aW9uLCBjZW50ZXJUaWxlIH0pID0+IHtcbiAgICAgIHRpbGVzLmZvckVhY2godGlsZSA9PiB0aGlzLmV4cGxvZGVUaWxlKHRpbGUpKTtcbiAgICAgIGNvbnN0IHZhcmlhbnQgPSB0aGlzLnZhcmlhbnRGb3JTaGFwZShzaGFwZSwgcm90YXRpb24pO1xuICAgICAgaWYgKHZhcmlhbnQpIHtcbiAgICAgICAgY29uc3QgbW92ZWRUaWxlID0gdGlsZXMuZmluZCh0aWxlID0+ICh0aWxlID09PSB0YXJnZXRUaWxlIHx8IHRpbGUgPT09IG9yaWdpblRpbGUpKTtcbiAgICAgICAgY29uc3QgdHJhbnNjZW5kZW50ID0gbW92ZWRUaWxlIHx8IGNlbnRlclRpbGU7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdHJhbnNjZW5kZW50VGlsZXMuZ2V0KHRyYW5zY2VuZGVudCk7XG4gICAgICAgIHRyYW5zY2VuZGVudFRpbGVzLnNldCh0cmFuc2NlbmRlbnQsIFsuLi4oZXhpc3RpbmcgfHwgW10pLCB2YXJpYW50XSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0cmFuc2NlbmRlbnRUaWxlcy5mb3JFYWNoKCh2YXJpYW50cywgdGlsZSkgPT4ge1xuICAgICAgdGlsZS52YXJpYW50ID0gdmFyaWFudHNbMF07XG4gICAgICB0aWxlLm1hdGNoZWQgPSBmYWxzZTtcbiAgICB9KTtcblxuICAgIGlmIChtYXRjaGVkU2hhcGVzLmxlbmd0aCAmJiB0aGlzLm9uVGlsZU1hdGNoZWQpIHtcbiAgICAgIG5ldyBTZXQoW1xuICAgICAgICAuLi5BcnJheS5mcm9tKHRyYW5zY2VuZGVudFRpbGVzLmtleXMoKSksXG4gICAgICAgIC4uLnRoaXMudGlsZXMuZmlsdGVyKCh7IG1hdGNoZWQgfSkgPT4gbWF0Y2hlZCksXG4gICAgICBdKS5mb3JFYWNoKHRpbGUgPT4gdGhpcy5vblRpbGVNYXRjaGVkISh0aWxlKSk7XG4gICAgfVxuICB9XG5cbiAgc3Bhd25OZXdUaWxlcygpOiB2b2lkIHtcbiAgICB0aGlzLnJvd3NbMF0gPSB0aGlzLnJvd3NbMF0ubWFwKHRpbGUgPT4gKHRpbGUuYmxhbmsgPyB0aGlzLm5ld011bmRhbmVUaWxlKCkgOiB0aWxlKSk7XG4gIH1cblxuICB0aWxlc1dpbGxEcm9wKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJvd3Muc2xpY2UoMSkuc29tZShyb3cgPT4gcm93LnNvbWUodGlsZSA9PiAodGlsZS5tYXRjaGVkIHx8IHRpbGUuYmxhbmspKSk7XG4gIH1cblxuICBleHBsb2RlVGlsZSh0aWxlOiBDYW52YXNUaWxlKTogdm9pZCB7XG4gICAgaWYgKHRpbGUuaXNNdW5kYW5lKSB0aWxlLm1hdGNoZWQgPSB0cnVlO1xuICAgIGlmICh0aWxlLm1hdGNoZWQpIHJldHVybjtcblxuICAgIHRpbGUubWF0Y2hlZCA9IHRydWU7XG4gICAgc3dpdGNoICh0aWxlLnZhcmlhbnQpIHtcbiAgICAgIGNhc2UgJ2hvcml6b250YWxDbGVhcic6IHRoaXMuY2xlYXJSb3codGhpcy5maW5kVGlsZSh0aWxlKSk7IGJyZWFrO1xuICAgICAgY2FzZSAndmVydGljYWxDbGVhcic6IHRoaXMuY2xlYXJDb2wodGhpcy5maW5kVGlsZSh0aWxlKSk7IGJyZWFrO1xuICAgICAgY2FzZSAnY3Jvc3NDbGVhcic6IHRoaXMuY2xlYXJDcm9zcyh0aGlzLmZpbmRUaWxlKHRpbGUpKTsgYnJlYWs7XG4gICAgICBjYXNlICd0eXBlQ2xlYXInOiB0aGlzLmNsZWFyVHlwZSh0aWxlLnR5cGUpOyBicmVhaztcbiAgICAgIGNhc2UgJ2JvbWJDbGVhcic6IHRoaXMuY2xlYXJCb21iKHRoaXMuZmluZFRpbGUodGlsZSkpOyBicmVhaztcbiAgICB9XG4gIH1cblxuICBjbGVhclJvdyh7IHJvdyB9OiBQaWNrPEdyaWRQb3NpdGlvbiwgJ3Jvdyc+KTogdm9pZCB7XG4gICAgdGhpcy5yb3dzW3Jvd10uZm9yRWFjaCh0aWxlID0+IHRoaXMuZXhwbG9kZVRpbGUodGlsZSkpO1xuICB9XG5cbiAgY2xlYXJDb2woeyBjb2wgfTogUGljazxHcmlkUG9zaXRpb24sICdjb2wnPik6IHZvaWQge1xuICAgIHRoaXMucm93cy5mb3JFYWNoKHJvdyA9PiB0aGlzLmV4cGxvZGVUaWxlKHJvd1tjb2xdKSk7XG4gIH1cblxuICBjbGVhckNyb3NzKHsgcm93LCBjb2wgfTogR3JpZFBvc2l0aW9uKTogdm9pZCB7XG4gICAgdGhpcy5jbGVhclJvdyh7IHJvdyB9KTtcbiAgICB0aGlzLmNsZWFyQ29sKHsgY29sIH0pO1xuICB9XG5cbiAgY2xlYXJUeXBlKHR5cGU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMudGlsZXMuZm9yRWFjaCh0aWxlID0+IHsgaWYgKHRpbGUudHlwZSA9PT0gdHlwZSkgdGhpcy5leHBsb2RlVGlsZSh0aWxlKTsgfSk7XG4gIH1cblxuICBjbGVhckJvbWIoeyByb3csIGNvbCB9OiBHcmlkUG9zaXRpb24pOiB2b2lkIHtcbiAgICBjb25zdCBib21iU2hhcGUgPSBuZXcgU2hhcGUoe1xuICAgICAgbWFwOiBbXG4gICAgICAgIFtmYWxzZSwgZmFsc2UsIHRydWVdLFxuICAgICAgICBbZmFsc2UsIHRydWUsIHRydWUsIHRydWVdLFxuICAgICAgICBbdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZV0sXG4gICAgICAgIFtmYWxzZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZV0sXG4gICAgICAgIFtmYWxzZSwgZmFsc2UsIHRydWVdLFxuICAgICAgXSxcbiAgICB9KTtcbiAgICBjb25zdCB7IGNlbnRlciB9ID0gYm9tYlNoYXBlO1xuICAgIGNvbnN0IGJvbWJUb3AgPSByb3cgLSBjZW50ZXIucm93O1xuICAgIGNvbnN0IGJvbWJMZWZ0ID0gY29sIC0gY2VudGVyLmNvbDtcbiAgICBjb25zdCBib21iZWRUaWxlcyA9IGJvbWJTaGFwZS5zY3JlZW4odGhpcy5yb3dzLCB7IHJvdzogYm9tYlRvcCwgY29sOiBib21iTGVmdCB9KTtcbiAgICBib21iZWRUaWxlcy5mb3JFYWNoKHRpbGUgPT4gdGhpcy5leHBsb2RlVGlsZSh0aWxlKSk7XG4gIH1cblxuICBjaGVja1NldHRsZSgpOiBib29sZWFuIHtcbiAgICBjb25zdCBzZXR0bGluZyA9IHRoaXMudGlsZXMuc29tZSh0aWxlID0+IHRpbGUuYmxhbmspO1xuXG4gICAgaWYgKHNldHRsaW5nKSB7XG4gICAgICBpZiAoIXRoaXMuc3RhcnRlZFNldHRsaW5nQXQpIHRoaXMuc3RhcnRlZFNldHRsaW5nQXQgPSBuZXcgRGF0ZSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZGVsZXRlIHRoaXMuc3RhcnRlZFNldHRsaW5nQXQ7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdGlsZUF0KHBvczogQ29vcmRQb3NpdGlvbnxHcmlkUG9zaXRpb24pOiBDYW52YXNUaWxlSW5mbyB7XG4gICAgaWYgKCdyb3cnIGluIHBvcykge1xuICAgICAgY29uc3QgeyByb3csIGNvbCB9ID0gcG9zO1xuICAgICAgY29uc3QgdGlsZSA9IHRoaXMucm93c1tyb3ddW2NvbF07XG4gICAgICByZXR1cm4gdGlsZSA/IHsgcm93LCBjb2wsIHRpbGUgfSA6IGJsYW5rQ2FudmFzVGlsZUluZm8oKTtcbiAgICB9XG5cbiAgICBjb25zdCB4ID0gcG9zLnggLSB0aGlzLng7XG4gICAgY29uc3QgeSA9IHBvcy55IC0gdGhpcy55O1xuICAgIGlmICh4ID4gdGhpcy53aWR0aCB8fCB5ID4gdGhpcy5oZWlnaHQpIHJldHVybiBibGFua0NhbnZhc1RpbGVJbmZvKCk7XG5cbiAgICBjb25zdCBmcmFjdGlvblggPSB4IC8gdGhpcy53aWR0aDtcbiAgICBjb25zdCBmcmFjdGlvblkgPSB5IC8gdGhpcy5oZWlnaHQ7XG4gICAgY29uc3Qgcm93ID0gTWF0aC5mbG9vcihmcmFjdGlvblkgKiB0aGlzLnJvd0NvdW50KTtcbiAgICBjb25zdCBjb2wgPSBNYXRoLmZsb29yKGZyYWN0aW9uWCAqIHRoaXMuY29sQ291bnQpO1xuICAgIGNvbnN0IHRpbGUgPSB0aGlzLnJvd3Nbcm93XVtjb2xdO1xuICAgIHJldHVybiB7IHJvdywgY29sLCB0aWxlIH07XG4gIH1cblxuICBmaW5kVGlsZSh0YXJnZXQ6IENhbnZhc1RpbGUpOiBDYW52YXNUaWxlSW5mbyB7XG4gICAgcmV0dXJuIGZpbmRNYXAodGhpcy5yb3dzLCAocm93VGlsZXMsIHJvdykgPT4ge1xuICAgICAgcmV0dXJuIGZpbmRNYXAocm93VGlsZXMsICh0aWxlLCBjb2wpID0+IHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICAgICAgICBpZiAodGFyZ2V0ID09PSB0aWxlKSByZXR1cm4geyByb3csIGNvbCwgdGlsZSB9O1xuICAgICAgfSk7XG4gICAgfSkgfHwgYmxhbmtDYW52YXNUaWxlSW5mbygpO1xuICB9XG5cbiAgdGlsZUNlbnRlcih0aWxlSW5mbzogQ2FudmFzVGlsZUluZm8pOiBDb29yZFBvc2l0aW9uIHtcbiAgICBjb25zdCB7IHJvdywgY29sLCB0aWxlIH0gPSB0aWxlSW5mbztcbiAgICBpZiAoIXRpbGUpIHJldHVybiB7IHg6IC0xLCB5OiAtMSB9O1xuXG4gICAgY29uc3QgeCA9IHRoaXMueCArIChjb2wgKiB0aWxlLmhlaWdodCkgKyAodGlsZS5oZWlnaHQgLyAyKTtcbiAgICBjb25zdCB5ID0gdGhpcy55ICsgKHJvdyAqIHRpbGUud2lkdGgpICsgKHRpbGUud2lkdGggLyAyKTtcbiAgICByZXR1cm4geyB4LCB5IH07XG4gIH1cblxuICBzd2FwVGlsZShmcm9tOiBDb29yZFBvc2l0aW9ufEdyaWRQb3NpdGlvbiwgdG86IFN3YXBEaXJlY3Rpb258Q29vcmRQb3NpdGlvbnxHcmlkUG9zaXRpb24pOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIHRvID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5zd2FwVGlsZUluRGlyZWN0aW9uKGZyb20sIHRvKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zd2FwVGlsZVdpdGhUaWxlKGZyb20sIHRvKTtcbiAgICB9XG4gIH1cblxuICBvbkRyYWdTdGFydChjYWxsYmFjazogKGV2ZW50OiBCb2FyZERyYWdFdmVudCkgPT4gdm9pZCk6IG51bWJlciB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmRyYWdTdGFydENhbGxiYWNrcy5sZW5ndGg7XG4gICAgdGhpcy5kcmFnU3RhcnRDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgcmVtb3ZlRHJhZ1N0YXJ0TGlzdGVuZXIoaWQ6IG51bWJlcik6IHZvaWQge1xuICAgIGRlbGV0ZSB0aGlzLmRyYWdTdGFydENhbGxiYWNrc1tpZF07XG4gIH1cblxuICBvbkRyYWdFbmQoY2FsbGJhY2s6IChldmVudDogQm9hcmREcmFnRXZlbnQpID0+IHZvaWQpOiBudW1iZXIge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5kcmFnRW5kQ2FsbGJhY2tzLmxlbmd0aDtcbiAgICB0aGlzLmRyYWdFbmRDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgcmVtb3ZlRHJhZ0VuZExpc3RlbmVyKGlkOiBudW1iZXIpOiB2b2lkIHtcbiAgICBkZWxldGUgdGhpcy5kcmFnRW5kQ2FsbGJhY2tzW2lkXTtcbiAgfVxuXG4gIG9uRHJhZyhjYWxsYmFjazogKGV2ZW50OiBCb2FyZERyYWdFdmVudCkgPT4gdm9pZCk6IG51bWJlciB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmRyYWdDYWxsYmFja3MubGVuZ3RoO1xuICAgIHRoaXMuZHJhZ0NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICByZW1vdmVEcmFnTGlzdGVuZXIoaWQ6IG51bWJlcik6IHZvaWQge1xuICAgIGRlbGV0ZSB0aGlzLmRyYWdDYWxsYmFja3NbaWRdO1xuICB9XG5cbiAgYWRqYWNlbnRTcGFjZShvcmlnaW46IENvb3JkUG9zaXRpb258R3JpZFBvc2l0aW9uLCBkaXJlY3Rpb246IFN3YXBEaXJlY3Rpb24pOiBHcmlkUG9zaXRpb24ge1xuICAgIGNvbnN0IHsgcm93LCBjb2wgfSA9ICdyb3cnIGluIG9yaWdpbiA/IG9yaWdpbiA6IHRoaXMudGlsZUF0KG9yaWdpbik7XG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3VwJzogcmV0dXJuIHsgcm93OiByb3cgLSAxLCBjb2wgfTtcbiAgICAgIGNhc2UgJ2Rvd24nOiByZXR1cm4geyByb3c6IHJvdyArIDEsIGNvbCB9O1xuICAgICAgY2FzZSAnbGVmdCc6IHJldHVybiB7IHJvdywgY29sOiBjb2wgLSAxIH07XG4gICAgICBjYXNlICdyaWdodCc6IHJldHVybiB7IHJvdywgY29sOiBjb2wgKyAxIH07XG4gICAgICBkZWZhdWx0OiByZXR1cm4geyByb3csIGNvbCB9O1xuICAgIH1cbiAgfVxuXG4gIGFkamFjZW50VGlsZShvcmlnaW46IENhbnZhc1RpbGVJbmZvfENvb3JkUG9zaXRpb258R3JpZFBvc2l0aW9uLCBkaXJlY3Rpb246IFN3YXBEaXJlY3Rpb24pOiBDYW52YXNUaWxlSW5mbyB7XG4gICAgY29uc3QgeyByb3csIGNvbCB9ID0gdGhpcy5hZGphY2VudFNwYWNlKG9yaWdpbiwgZGlyZWN0aW9uKTtcbiAgICBjb25zdCB0aWxlID0gdGhpcy5yb3dzW3Jvd10gJiYgdGhpcy5yb3dzW3Jvd11bY29sXTtcbiAgICByZXR1cm4gdGlsZSA/IHsgcm93LCBjb2wsIHRpbGUgfSA6IGJsYW5rQ2FudmFzVGlsZUluZm8oKTtcbiAgfVxuXG4gIHJlbW92ZVRpbGUodGlsZTogQ2FudmFzVGlsZSk6IHZvaWQge1xuICAgIHRpbGUuYmxhbmsgPSB0cnVlO1xuICB9XG5cbiAgbWF0Y2hTaGFwZXMoKTogeyBzaGFwZTogU2hhcGU7IHJvdGF0aW9uOiBudW1iZXI7IHRpbGVzOiBDYW52YXNUaWxlW107IGNlbnRlclRpbGU6IENhbnZhc1RpbGUgfVtdIHtcbiAgICByZXR1cm4gcmFuZ2UodGhpcy5jb2xDb3VudCkucmVkdWNlKChtZW1vLCBjb2xJbmRleCkgPT4ge1xuICAgICAgdGhpcy5zaGFwZXMuZm9yRWFjaCgoc2hhcGUpID0+IHtcbiAgICAgICAgdGhpcy5yb3dzLmZvckVhY2goKF9yb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3R3JpZCA9IHRoaXMucm93cy5zbGljZShyb3dJbmRleCkubWFwKHJvdyA9PiByb3cuc2xpY2UoY29sSW5kZXgpKTtcbiAgICAgICAgICBjb25zdCB7IHJvdGF0aW9uLCBtYXRjaGVkLCBjZW50ZXIgfSA9IHNoYXBlLm1hdGNoKG5ld0dyaWQsICd0eXBlJyk7XG4gICAgICAgICAgaWYgKG1hdGNoZWQubGVuZ3RoID4gMCkgbWVtby5wdXNoKHsgc2hhcGUsIHJvdGF0aW9uLCB0aWxlczogbWF0Y2hlZCwgY2VudGVyVGlsZTogY2VudGVyISB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH0sIFtdIGFzIHsgc2hhcGU6IFNoYXBlOyByb3RhdGlvbjogbnVtYmVyOyB0aWxlczogQ2FudmFzVGlsZVtdOyBjZW50ZXJUaWxlOiBDYW52YXNUaWxlIH1bXSk7XG4gIH1cblxuICBwcml2YXRlIGRlZmF1bHROZXdUaWxlT2ZUeXBlKHR5cGU6IHN0cmluZywgdmFyaWFudD86IHN0cmluZyk6IENhbnZhc1RpbGUge1xuICAgIC8vIGZ1dHVyZTogY2hhbmdlIGNvbG9ycyBmb3IgXCJjb2xvclwiIHR5cGVzIGhlcmVcbiAgICBjb25zdCBjb2xvcnMgPSB7XG4gICAgICByZWQ6ICdyZWQnLFxuICAgICAgb3JhbmdlOiAnb3JhbmdlJyxcbiAgICAgIHB1cnBsZTogJ3B1cnBsZScsXG4gICAgICBncmVlbjogJ2dyZWVuJyxcbiAgICAgIGJsdWU6ICdibHVlJyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ldyBDYW52YXNUaWxlKHtcbiAgICAgIHR5cGUsXG4gICAgICB2YXJpYW50LFxuICAgICAgY29sb3I6IGNvbG9yc1t0eXBlIGFzIGtleW9mIHR5cGVvZiBjb2xvcnNdLFxuICAgICAgd2lkdGg6IHRoaXMudGlsZVdpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLnRpbGVIZWlnaHQsXG4gICAgICBhcHBseU5vcm1hbFN0eWxlOiB0aGlzLmFwcGx5Tm9ybWFsU3R5bGUsXG4gICAgICBhcHBseVNlbGVjdGVkU3R5bGU6IHRoaXMuYXBwbHlTZWxlY3RlZFN0eWxlLFxuICAgICAgYXBwbHlUYXJnZXRlZFN0eWxlOiB0aGlzLmFwcGx5VGFyZ2V0ZWRTdHlsZSxcbiAgICAgIGFwcGx5TWF0Y2hlZFN0eWxlOiB0aGlzLmFwcGx5TWF0Y2hlZFN0eWxlLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB2YXJpYW50Rm9yU2hhcGUoc2hhcGU6IFNoYXBlLCByb3RhdGlvbjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHNoYXBlLnZhbHVlKSB7XG4gICAgICBjYXNlIDI6IHJldHVybiByb3RhdGlvbiAlIDIgPT09IDAgPyAndmVydGljYWxDbGVhcicgOiAnaG9yaXpvbnRhbENsZWFyJztcbiAgICAgIGNhc2UgMzogcmV0dXJuICd0eXBlQ2xlYXInO1xuICAgICAgY2FzZSA0OiByZXR1cm4gJ3R5cGVDbGVhcic7XG4gICAgICBjYXNlIDU6IHJldHVybiAnY3Jvc3NDbGVhcic7XG4gICAgICBjYXNlIDY6IHJldHVybiAnY3Jvc3NDbGVhcic7XG4gICAgICBjYXNlIDc6IHJldHVybiAnYm9tYkNsZWFyJztcbiAgICAgIGRlZmF1bHQ6IHJldHVybiAnJztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN3YXBUaWxlV2l0aFRpbGUoZnJvbTogQ29vcmRQb3NpdGlvbnxHcmlkUG9zaXRpb24sIHRvOiBDb29yZFBvc2l0aW9ufEdyaWRQb3NpdGlvbik6IHZvaWQge1xuICAgIGNvbnN0IG9yaWdpbiA9IHRoaXMudGlsZUF0KGZyb20pO1xuICAgIGlmICghb3JpZ2luLnRpbGUpIHJldHVybjtcblxuICAgIHRoaXMuc3dhcE9yaWdpbiA9IG9yaWdpbjtcbiAgICBjb25zdCBkZXN0aW5hdGlvbiA9IHRoaXMudGlsZUF0KHRvKTtcbiAgICBpZiAoIWRlc3RpbmF0aW9uLnRpbGUpIHJldHVybjtcblxuICAgIHRoaXMuc3dhcFRhcmdldCA9IGRlc3RpbmF0aW9uO1xuICAgIHRoaXMucm93c1tkZXN0aW5hdGlvbi5yb3ddW2Rlc3RpbmF0aW9uLmNvbF0gPSBvcmlnaW4udGlsZTtcbiAgICB0aGlzLnJvd3Nbb3JpZ2luLnJvd11bb3JpZ2luLmNvbF0gPSBkZXN0aW5hdGlvbi50aWxlO1xuICB9XG5cbiAgcHJpdmF0ZSBzd2FwVGlsZUluRGlyZWN0aW9uKGZyb206IENvb3JkUG9zaXRpb258R3JpZFBvc2l0aW9uLCBkaXJlY3Rpb246IFN3YXBEaXJlY3Rpb24pOiB2b2lkIHtcbiAgICBjb25zdCBvcmlnaW4gPSB0aGlzLnRpbGVBdChmcm9tKTtcbiAgICBpZiAoIW9yaWdpbi50aWxlKSByZXR1cm47XG5cbiAgICB0aGlzLnN3YXBPcmlnaW4gPSBvcmlnaW47XG4gICAgY29uc3QgZGVzdGluYXRpb24gPSB0aGlzLmFkamFjZW50VGlsZShvcmlnaW4sIGRpcmVjdGlvbik7XG4gICAgaWYgKCFkZXN0aW5hdGlvbi50aWxlKSByZXR1cm47XG5cbiAgICB0aGlzLnN3YXBUYXJnZXQgPSBkZXN0aW5hdGlvbjtcbiAgICB0aGlzLnJvd3NbZGVzdGluYXRpb24ucm93XVtkZXN0aW5hdGlvbi5jb2xdID0gb3JpZ2luLnRpbGU7XG4gICAgdGhpcy5yb3dzW29yaWdpbi5yb3ddW29yaWdpbi5jb2xdID0gZGVzdGluYXRpb24udGlsZTtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYXJFeGlzdGluZ0RyYWdGbGFncygpOiB2b2lkIHtcbiAgICB0aGlzLnRpbGVzLmZvckVhY2goKHRpbGUpID0+IHtcbiAgICAgIHRpbGUuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgIHRpbGUudGFyZ2V0ZWQgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0RHJhZ1N0YXJ0RmxhZ3ModGlsZUluZm86IFByZXNlbnRDYW52YXNUaWxlSW5mbyk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJFeGlzdGluZ0RyYWdGbGFncygpO1xuICAgIHRpbGVJbmZvLnRpbGUuc2VsZWN0ZWQgPSB0cnVlO1xuICAgIHRpbGVJbmZvLnRpbGUudGFyZ2V0ZWQgPSB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXREcmFnRW5kRmxhZ3MoKTogdm9pZCB7XG4gICAgdGhpcy5jbGVhckV4aXN0aW5nRHJhZ0ZsYWdzKCk7XG4gIH1cblxuICBwcml2YXRlIHNldERyYWdGbGFncyhvcmlnaW46IFByZXNlbnRDYW52YXNUaWxlSW5mbywgZGVzdGluYXRpb246IFByZXNlbnRDYW52YXNUaWxlSW5mbyk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJFeGlzdGluZ0RyYWdGbGFncygpO1xuICAgIG9yaWdpbi50aWxlLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICBkZXN0aW5hdGlvbi50aWxlLnRhcmdldGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgcnVuRHJhZ1N0YXJ0Q2FsbGJhY2tzKG1vdXNlOiBNb3VzZSk6IHZvaWQge1xuICAgIGNvbnN0IHNldHRsaW5nID0gdGhpcy5jaGVja1NldHRsZSgpO1xuICAgIGlmIChzZXR0bGluZykgcmV0dXJuO1xuXG4gICAgY29uc3QgeyB4LCB5IH0gPSBtb3VzZTtcbiAgICBjb25zdCBvcmlnaW4gPSB0aGlzLnRpbGVBdCh7IHgsIHkgfSk7XG4gICAgaWYgKCFvcmlnaW4udGlsZSkgcmV0dXJuO1xuXG4gICAgdGhpcy5kcmFnT3JpZ2luID0gb3JpZ2luO1xuICAgIHRoaXMuc2V0RHJhZ1N0YXJ0RmxhZ3ModGhpcy5kcmFnT3JpZ2luKTtcbiAgICBjb25zdCBkaXN0YW5jZSA9IGRpc3RhbmNlQmV0d2Vlbihtb3VzZSwgdGhpcy50aWxlQ2VudGVyKG9yaWdpbikpO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IG1vdXNlLmRyYWdEaXJlY3Rpb247XG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBvcmlnaW47XG5cbiAgICB0aGlzLmRyYWdTdGFydENhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjaykgPT4ge1xuICAgICAgY2FsbGJhY2soeyB4LCB5LCBkaXN0YW5jZSwgZGlyZWN0aW9uLCBvcmlnaW4sIGRlc3RpbmF0aW9uLCBtb3VzZSB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcnVuRHJhZ0VuZENhbGxiYWNrcyhtb3VzZTogTW91c2UpOiB2b2lkIHtcbiAgICBjb25zdCBzZXR0bGluZyA9IHRoaXMuY2hlY2tTZXR0bGUoKTtcbiAgICBpZiAoc2V0dGxpbmcpIHJldHVybjtcblxuICAgIGNvbnN0IG9yaWdpbiA9IHRoaXMuZHJhZ09yaWdpbjtcbiAgICBpZiAoIW9yaWdpbi50aWxlKSByZXR1cm47XG5cbiAgICBjb25zdCB7IHgsIHkgfSA9IG1vdXNlO1xuICAgIGNvbnN0IGRpc3RhbmNlID0gZGlzdGFuY2VCZXR3ZWVuKG1vdXNlLCB0aGlzLnRpbGVDZW50ZXIob3JpZ2luKSk7XG4gICAgY29uc3QgbW92ZVRvID0gZGlzdGFuY2UgPiB0aGlzLnNlbnNpdGl2aXR5ID8gdGhpcy5hZGphY2VudFRpbGUob3JpZ2luLCBtb3VzZS5kcmFnRGlyZWN0aW9uKSA6IG9yaWdpbjtcbiAgICBjb25zdCBkZXN0aW5hdGlvbiA9IG1vdmVUby50aWxlID8gbW92ZVRvIDogb3JpZ2luO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IG1vdXNlLmRyYWdEaXJlY3Rpb247XG4gICAgdGhpcy5zZXREcmFnRW5kRmxhZ3MoKTtcblxuICAgIHRoaXMuZHJhZ0VuZENhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjaykgPT4ge1xuICAgICAgY2FsbGJhY2soeyB4LCB5LCBkaXN0YW5jZSwgZGlyZWN0aW9uLCBvcmlnaW4sIGRlc3RpbmF0aW9uLCBtb3VzZSB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuZHJhZ09yaWdpbiA9IGJsYW5rQ2FudmFzVGlsZUluZm8oKTtcbiAgfVxuXG4gIHByaXZhdGUgcnVuRHJhZ0NhbGxiYWNrcyhtb3VzZTogTW91c2UpOiB2b2lkIHtcbiAgICBjb25zdCBzZXR0bGluZyA9IHRoaXMuY2hlY2tTZXR0bGUoKTtcbiAgICBpZiAoc2V0dGxpbmcpIHJldHVybjtcblxuICAgIGNvbnN0IG9yaWdpbiA9IHRoaXMuZHJhZ09yaWdpbjtcbiAgICBpZiAoIW9yaWdpbi50aWxlKSByZXR1cm47XG5cbiAgICBjb25zdCB7IHgsIHksIHByZXNzZWQgfSA9IG1vdXNlO1xuICAgIGlmICghcHJlc3NlZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZUJldHdlZW4obW91c2UsIHRoaXMudGlsZUNlbnRlcihvcmlnaW4pKTtcbiAgICBjb25zdCBtb3ZlVG8gPSBkaXN0YW5jZSA+IHRoaXMuc2Vuc2l0aXZpdHkgPyB0aGlzLmFkamFjZW50VGlsZShvcmlnaW4sIG1vdXNlLmRyYWdEaXJlY3Rpb24pIDogb3JpZ2luO1xuICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gbW92ZVRvLnRpbGUgPyBtb3ZlVG8gOiBvcmlnaW47XG4gICAgY29uc3QgZGlyZWN0aW9uID0gbW91c2UuZHJhZ0RpcmVjdGlvbjtcbiAgICB0aGlzLnNldERyYWdGbGFncyhvcmlnaW4sIGRlc3RpbmF0aW9uKTtcblxuICAgIHRoaXMuZHJhZ0NhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjaykgPT4ge1xuICAgICAgY2FsbGJhY2soeyB4LCB5LCBkaXN0YW5jZSwgZGlyZWN0aW9uLCBvcmlnaW4sIGRlc3RpbmF0aW9uLCBtb3VzZSB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVwbGFjZVRpbGUodGlsZTE6IENhbnZhc1RpbGUsIHRpbGUyOiBDYW52YXNUaWxlKTogdm9pZCB7XG4gICAgY29uc3QgeyByb3csIGNvbCB9ID0gdGhpcy5maW5kVGlsZSh0aWxlMSk7XG4gICAgdGhpcy5yb3dzW3Jvd11bY29sXSA9IHRpbGUyO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGFiaWxpemVJbml0aWFsVGlsZXModHJpZXMgPSAyMCk6IHZvaWQge1xuICAgIGlmICh0cmllcyA8PSAwKSB7XG4gICAgICB0aGlzLnJvd3MgPSB0aGlzLm5ld1Jvd3MoKTtcbiAgICAgIHRoaXMuc3RhYmlsaXplSW5pdGlhbFRpbGVzKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbWF0Y2hlZFNoYXBlcyA9IHRoaXMubWF0Y2hTaGFwZXMoKTtcbiAgICBpZiAoIW1hdGNoZWRTaGFwZXMubGVuZ3RoKSByZXR1cm47XG5cbiAgICBtYXRjaGVkU2hhcGVzWzBdLnRpbGVzLmZvckVhY2godGlsZSA9PiB0aGlzLnJlcGxhY2VUaWxlKHRpbGUsIHRoaXMubmV3TXVuZGFuZVRpbGUoKSkpO1xuXG4gICAgdGhpcy5zdGFiaWxpemVJbml0aWFsVGlsZXModHJpZXMgLSAxKTtcbiAgfVxuXG4gIHByaXZhdGUgcG9zc2libGVNYXRjaGVzRXhpc3QoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhZmluZE1hcCh0aGlzLnJvd3MsIChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICByZXR1cm4gZmluZE1hcChyb3csIChfdGlsZSwgY29sSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB7IHJvdzogcm93SW5kZXgsIGNvbDogY29sSW5kZXggfTtcbiAgICAgICAgcmV0dXJuIGZpbmRNYXAodHVwbGUoJ3VwJywgJ2Rvd24nLCAnbGVmdCcsICdyaWdodCcpLCAoZGlyZWN0aW9uKSA9PiB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgICAgICAgICB0aGlzLnN3YXBUaWxlSW5EaXJlY3Rpb24ocG9zaXRpb24sIGRpcmVjdGlvbik7XG4gICAgICAgICAgaWYgKHRoaXMubWF0Y2hTaGFwZXMoKSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgdGhpcy5zd2FwVGlsZUluRGlyZWN0aW9uKHBvc2l0aW9uLCBkaXJlY3Rpb24pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjaGVja1NodWZmbGUoKTogdm9pZCB7XG4gICAgdGhpcy5uZWVkc1NodWZmbGUgPSAhdGhpcy5wb3NzaWJsZU1hdGNoZXNFeGlzdCgpO1xuICB9XG59XG5cbih3aW5kb3cgYXMgYW55KS5kZWZhdWx0U2hhcGVzID0gZGVmYXVsdFNoYXBlcztcbiIsImltcG9ydCBnYW1lTG9vcCBmcm9tIFwiLi9nYW1lL2dhbWVMb29wXCI7XG5pbXBvcnQgeyBjdHggfSBmcm9tIFwiLi9nYW1lL2NhbnZhc1wiO1xuaW1wb3J0IENhbnZhc0JvYXJkIGZyb20gXCIuL2dhbWUvQ2FudmFzQm9hcmRcIjtcblxuY29uc3Qgc2NvcmVzID0ge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbmxldCBtb3ZlcyA9IDEwO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgY29uc3QgYm9hcmRTaXplID0gTWF0aC5taW4od2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCwgNTAwKTtcblxuICBjb25zdCBib2FyZCA9IG5ldyBDYW52YXNCb2FyZCh7XG4gICAgd2lkdGg6IGJvYXJkU2l6ZSxcbiAgICByb3dDb3VudDogOSxcbiAgICBjb2xDb3VudDogOSxcbiAgICBvblRpbGVNYXRjaGVkOiAodGlsZSkgPT4ge1xuICAgICAgc2NvcmVzW3RpbGUudHlwZV0gPSBzY29yZXNbdGlsZS50eXBlXSB8fCAwO1xuICAgICAgc2NvcmVzW3RpbGUudHlwZV0gKz0gMTtcbiAgICB9LFxuICB9KTtcblxuICBib2FyZC5vbkRyYWdFbmQoKGV2ZW50KSA9PiB7XG4gICAgaWYgKG1vdmVzIDw9IDApIHJldHVybjtcblxuICAgIGJvYXJkLnN3YXBUaWxlKGV2ZW50Lm9yaWdpbiwgZXZlbnQuZGVzdGluYXRpb24pO1xuICAgIGNvbnN0IHNoYXBlcyA9IGJvYXJkLm1hdGNoU2hhcGVzKCk7XG4gICAgaWYgKHNoYXBlcy5sZW5ndGgpIHtcbiAgICAgIG1vdmVzLS07XG4gICAgfSBlbHNlIHtcbiAgICAgIGJvYXJkLnN3YXBUaWxlKGV2ZW50Lm9yaWdpbiwgZXZlbnQuZGVzdGluYXRpb24pO1xuICAgIH1cbiAgfSk7XG5cbiAgZ2FtZUxvb3AoY3R4LCAoX2xvb3BDb3VudCkgPT4ge1xuICAgIGJvYXJkLmRyYXcoY3R4KTtcbiAgICBib2FyZC51cGRhdGUoKTtcbiAgICBcbiAgICBjb25zdCBzaXplID0gMjQ7XG4gICAgY3R4LmZpbGxTdHlsZSA9ICdibGFjayc7XG4gICAgY3R4LmZvbnQgPSBgJHtzaXplfXB4IENvdXJpZXJgO1xuICAgIGlmIChtb3ZlcyA8PSAwKSB7XG4gICAgICBjdHguZmlsbFRleHQoJ0ZJTicsIHNpemUsIGJvYXJkU2l6ZSArIDIwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LmZpbGxUZXh0KGBNb3ZlcyBsZWZ0OiAke21vdmVzfWAsIHNpemUsIGJvYXJkU2l6ZSArIDIwKTtcbiAgICB9XG5cbiAgICBPYmplY3Qua2V5cyhzY29yZXMpLnNvcnQoKS5mb3JFYWNoKCh0aWxlVHlwZSwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHggPSAyMDtcbiAgICAgIGNvbnN0IHkgPSBib2FyZFNpemUgKyAyMCArICgoMSArIGluZGV4KSAqIDMwKTtcbiAgICAgIGNvbnN0IHNjb3JlID0gc2NvcmVzW3RpbGVUeXBlXTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSB0aWxlVHlwZTtcbiAgICAgIGN0eC5maWxsUmVjdCh4LCB5LCBzaXplLCBzaXplKTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAnYmxhY2snO1xuICAgICAgY3R4LmZvbnQgPSBgJHtzaXplfXB4IENvdXJpZXJgO1xuICAgICAgY3R4LmZpbGxUZXh0KGAke3Njb3JlfS8yMGAsIHggICsgc2l6ZSArIDEwLCB5ICsgKDAuODUgKiBzaXplKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gICh3aW5kb3cgYXMgYW55KS5ib2FyZCA9IGJvYXJkO1xufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9